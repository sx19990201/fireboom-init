import{r as i,d as j,g as m,a8 as se,a as l,k as te,c as D,R as F,j as q}from"./index.bb86fbbf.js";import{P as ce}from"./PortalWrapper.eb4c9ec4.js";import{e as ue,K as G}from"./Portal.a4c68d61.js";import{p as fe}from"./pickAttrs.38f17648.js";function de(){var e=m({},se);return e.useId}var J=0;function me(e){var n=i.exports.useState("ssr-id"),t=j(n,2),a=t[0],r=t[1],o=de(),s=o==null?void 0:o();return i.exports.useEffect(function(){if(!o){var c=J;J+=1,r("rc_unique_".concat(c))}},[]),e||s||a}function ve(e){var n=e.prefixCls,t=e.style,a=e.visible,r=e.maskProps,o=e.motionName;return l(te,{visible:a,motionName:o,leavedClassName:"".concat(n,"-mask-hidden"),children:function(s){var c=s.className,v=s.style;return l("div",{style:m(m({},v),t),className:D("".concat(n,"-mask"),c),...r})}},"mask")}function Q(e,n,t){var a=n;return!a&&t&&(a="".concat(e,"-").concat(t)),a}function Z(e,n){var t=e["page".concat(n?"Y":"X","Offset")],a="scroll".concat(n?"Top":"Left");if(typeof t!="number"){var r=e.document;t=r.documentElement[a],typeof t!="number"&&(t=r.body[a])}return t}function Ce(e){var n=e.getBoundingClientRect(),t={left:n.left,top:n.top},a=e.ownerDocument,r=a.defaultView||a.parentWindow;return t.left+=Z(r),t.top+=Z(r,!0),t}const ye=i.exports.memo(function(e){var n=e.children;return n},function(e,n){var t=n.shouldUpdate;return!t});var p={width:0,height:0,overflow:"hidden",outline:"none"},be=F.forwardRef(function(e,n){var t=e.prefixCls,a=e.className,r=e.style,o=e.title,s=e.ariaId,c=e.footer,v=e.closable,b=e.closeIcon,u=e.onClose,h=e.children,C=e.bodyStyle,R=e.bodyProps,g=e.modalRender,x=e.onMouseDown,I=e.onMouseUp,$=e.holderRef,k=e.visible,_=e.forceRender,d=e.width,S=e.height,N=i.exports.useRef(),w=i.exports.useRef();F.useImperativeHandle(n,function(){return{focus:function(){var y;(y=N.current)===null||y===void 0||y.focus()},changeActive:function(y){var A=document,W=A.activeElement;y&&W===w.current?N.current.focus():!y&&W===N.current&&w.current.focus()}}});var P={};d!==void 0&&(P.width=d),S!==void 0&&(P.height=S);var E;c&&(E=l("div",{className:"".concat(t,"-footer"),children:c}));var T;o&&(T=l("div",{className:"".concat(t,"-header"),children:l("div",{className:"".concat(t,"-title"),id:s,children:o})}));var U;v&&(U=l("button",{type:"button",onClick:u,"aria-label":"Close",className:"".concat(t,"-close"),children:b||l("span",{className:"".concat(t,"-close-x")})}));var V=q("div",{className:"".concat(t,"-content"),children:[U,T,l("div",{className:"".concat(t,"-body"),style:C,...R,children:h}),E]});return q("div",{role:"dialog","aria-labelledby":o?s:null,"aria-modal":"true",ref:$,style:m(m({},r),P),className:D(t,a),onMouseDown:x,onMouseUp:I,children:[l("div",{tabIndex:0,ref:N,style:p,"aria-hidden":"true"}),l(ye,{shouldUpdate:k||_,children:g?g(V):V}),l("div",{tabIndex:0,ref:w,style:p,"aria-hidden":"true"})]},"dialog-element")}),ne=i.exports.forwardRef(function(e,n){var t=e.prefixCls,a=e.title,r=e.style,o=e.className,s=e.visible,c=e.forceRender,v=e.destroyOnClose,b=e.motionName,u=e.ariaId,h=e.onVisibleChanged,C=e.mousePosition,R=i.exports.useRef(),g=i.exports.useState(),x=j(g,2),I=x[0],$=x[1],k={};I&&(k.transformOrigin=I);function _(){var d=Ce(R.current);$(C?"".concat(C.x-d.left,"px ").concat(C.y-d.top,"px"):"")}return l(te,{visible:s,onVisibleChanged:h,onAppearPrepare:_,onEnterPrepare:_,forceRender:c,motionName:b,removeOnLeave:v,ref:R,children:function(d,S){var N=d.className,w=d.style;return l(be,{...e,ref:n,title:a,ariaId:u,prefixCls:t,holderRef:S,style:m(m(m({},w),r),k),className:D(o,N)})}})});ne.displayName="Content";function ee(e){var n=e.prefixCls,t=n===void 0?"rc-dialog":n,a=e.zIndex,r=e.visible,o=r===void 0?!1:r,s=e.keyboard,c=s===void 0?!0:s,v=e.focusTriggerAfterClose,b=v===void 0?!0:v,u=e.scrollLocker,h=e.wrapStyle,C=e.wrapClassName,R=e.wrapProps,g=e.onClose,x=e.afterClose,I=e.transitionName,$=e.animation,k=e.closable,_=k===void 0?!0:k,d=e.mask,S=d===void 0?!0:d,N=e.maskTransitionName,w=e.maskAnimation,P=e.maskClosable,E=P===void 0?!0:P,T=e.maskStyle,U=e.maskProps,V=e.rootClassName,M=i.exports.useRef(),y=i.exports.useRef(),A=i.exports.useRef(),W=i.exports.useState(o),H=j(W,2),K=H[0],X=H[1],ae=me();function oe(f){if(f){if(!ue(y.current,document.activeElement)){var O;M.current=document.activeElement,(O=A.current)===null||O===void 0||O.focus()}}else{if(X(!1),S&&M.current&&b){try{M.current.focus({preventScroll:!0})}catch{}M.current=null}K&&(x==null||x())}}function z(f){g==null||g(f)}var L=i.exports.useRef(!1),B=i.exports.useRef(),re=function(){clearTimeout(B.current),L.current=!0},ie=function(){B.current=setTimeout(function(){L.current=!1})},Y=null;E&&(Y=function(O){L.current?L.current=!1:y.current===O.target&&z(O)});function le(f){if(c&&f.keyCode===G.ESC){f.stopPropagation(),z(f);return}o&&f.keyCode===G.TAB&&A.current.changeActive(!f.shiftKey)}return i.exports.useEffect(function(){return o&&X(!0),function(){}},[o]),i.exports.useEffect(function(){return function(){clearTimeout(B.current)}},[]),i.exports.useEffect(function(){return K?(u==null||u.lock(),u==null?void 0:u.unLock):function(){}},[K,u]),q("div",{className:D("".concat(t,"-root"),V),...fe(e,{data:!0}),children:[l(ve,{prefixCls:t,visible:S&&o,motionName:Q(t,N,w),style:m({zIndex:a},T),maskProps:U}),l("div",{tabIndex:-1,onKeyDown:le,className:D("".concat(t,"-wrap"),C),ref:y,onClick:Y,style:m(m({zIndex:a},h),{},{display:K?null:"none"}),...R,children:l(ne,{...e,onMouseDown:re,onMouseUp:ie,ref:A,closable:_,ariaId:ae,prefixCls:t,visible:o,onClose:z,onVisibleChanged:oe,motionName:Q(t,I,$)})})]})}var he=function(n){var t=n.visible,a=n.getContainer,r=n.forceRender,o=n.destroyOnClose,s=o===void 0?!1:o,c=n.afterClose,v=i.exports.useState(t),b=j(v,2),u=b[0],h=b[1];return i.exports.useEffect(function(){t&&h(!0)},[t]),a===!1?l(ee,{...n,getOpenCount:function(){return 2}}):!r&&s&&!u?null:l(ce,{visible:t,forceRender:r,getContainer:a,children:function(C){return l(ee,{...n,destroyOnClose:s,afterClose:function(){c==null||c(),h(!1)},...C})}})};he.displayName="Dialog";export{he as D};
