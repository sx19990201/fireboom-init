var x=Object.defineProperty;var D=(e,n,t)=>n in e?x(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var _=(e,n,t)=>(D(e,typeof n!="symbol"?n+"":n,t),t);import{r as y,a9 as b,a as u,j as c,F as o,aa as k}from"./index.bb86fbbf.js";import{_ as S,i as B,a as O}from"./identity.bf2ac13f.js";import{s as R}from"./_baseIsEqual.08bd8828.js";import{B as E}from"./button.aa0bb50b.js";import{C as T}from"./index.9ea41163.js";import{F as r}from"./index.2f0a4123.js";import"./row.b57345b2.js";import"./index.61964446.js";import{I as g}from"./index.4f67b986.js";import{S as v}from"./index.445b6a21.js";import{O as F}from"./source.c7b92d0a.js";function $(e,n,t){switch(t.length){case 0:return e.call(n);case 1:return e.call(n,t[0]);case 2:return e.call(n,t[0],t[1]);case 3:return e.call(n,t[0],t[1],t[2])}return e.apply(n,t)}var w=$,P=w,C=Math.max;function L(e,n,t){return n=C(n===void 0?e.length-1:n,0),function(){for(var i=arguments,l=-1,s=C(i.length-n,0),f=Array(s);++l<s;)f[l]=i[n+l];l=-1;for(var h=Array(n+1);++l<n;)h[l]=i[l];return h[n]=t(f),P(e,this,h)}}var q=L;function U(e){return function(){return e}}var M=U,Q=M,I=S,W=B,Y=I?function(e,n){return I(e,"toString",{configurable:!0,enumerable:!1,value:Q(n),writable:!0})}:W,j=Y,H=800,G=16,z=Date.now;function J(e){var n=0,t=0;return function(){var i=z(),l=G-(i-t);if(t=i,l>0){if(++n>=H)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}var K=J,V=j,X=K,Z=X(V),ee=Z,ne=B,te=q,ie=ee;function ue(e,n){return ie(te(e,n,ne),e+"")}var le=ue;function ae(e,n,t,i){for(var l=e.length,s=t+(i?1:-1);i?s--:++s<l;)if(n(e[s],s,e))return s;return-1}var re=ae;function se(e){return e!==e}var ce=se;function de(e,n,t){for(var i=t-1,l=e.length;++i<l;)if(e[i]===n)return i;return-1}var oe=de,he=re,me=ce,fe=oe;function pe(e,n,t){return n===n?fe(e,n,t):he(e,me,t)}var ve=pe;function Fe(e,n,t,i){for(var l=t-1,s=e.length;++l<s;)if(i(e[l],n))return l;return-1}var be=Fe;function ye(e,n){var t=-1,i=e.length;for(n||(n=Array(i));++t<i;)n[t]=e[t];return n}var ge=ye,_e=O,Ee=ve,Ce=be,Ie=R,Ne=ge,Ae=Array.prototype,N=Ae.splice;function Be(e,n,t,i){var l=i?Ce:Ee,s=-1,f=n.length,h=e;for(e===n&&(n=Ne(n)),t&&(h=_e(e,Ie(t)));++s<f;)for(var m=0,a=n[s],p=t?t(a):a;(m=l(h,p,m,i))>-1;)h!==e&&N.call(h,m,1),N.call(e,m,1);return e}var xe=Be,De=xe;function ke(e,n){return e&&e.length&&n&&n.length?De(e,n):e}var Se=ke,Oe=le,Re=Se,Te=Oe(Re),$e=Te;class we{constructor(){_(this,"_events");this._events={}}_getFns(n){return this._events[n]||(this._events[n]=[])}on(n,t){this._getFns(n).push(t)}off(n,t){if(t){const i=this._getFns(n);$e(i,t)}else delete this._events[n]}once(n,t){const i=l=>{this.off(n,i),t(l)};this.on(n,i)}emit(n){const t=this._getFns(n.event);for(let i=0;i<t.length;i++){const l=t[i];l(n)}}}const A=new we;function Xe(e,n){y.exports.useEffect(()=>(A.on(e,n),()=>{A.off(e,n)}))}const Pe="_panel_oh85i_1",Le="_splitLine_oh85i_19",qe="_tip_oh85i_25",d={panel:Pe,splitLine:Le,tip:qe};function Ze(e){const[n,t]=y.exports.useState(),[i,l]=y.exports.useState(),[s]=r.useForm();y.exports.useEffect(()=>{b.get("/operateApi/setting").then(a=>{l(a)}),e.id&&b.get(`/operateApi/setting/${e.id}`).then(a=>{t(a),s.setFieldsValue(a)})},[e.id]),y.exports.useEffect(()=>{let a;n!=null&&n.enable?a=n:i&&(a=i,a.authenticationRequired=!!{[F.QUERY]:i==null?void 0:i.authenticationQueriesRequired,[F.MUTATION]:i==null?void 0:i.authenticationMutationsRequired,[F.SUBSCRIPTION]:i==null?void 0:i.authenticationSubscriptionsRequired}[e.operationType||F.QUERY]),s.setFieldsValue(a)},[n,i]);const f=(a,p)=>{if(e.type==="panel"){if(a.enable!==void 0){b.put(`/operateApi/setting/${e.id}`,{...n,enable:a.enable,settingType:e.id?1:2,id:e.id||0}),t({...n,enable:a.enable});return}t({...n,...a}),b.put(`/operateApi/setting/${e.id}`,{...p,settingType:e.id?1:2,id:e.id||0})}},h=a=>{b.put("/operateApi/setting",{...a,settingType:e.id?1:2,id:e.id||0}).then(()=>{var p;k.success("\u4FDD\u5B58\u6210\u529F"),(p=e.onClose)==null||p.call(e)})},m=!(n!=null&&n.enable)&&e.type!=="global";return u("div",{className:d[e.type],children:c(r,{form:s,labelCol:{span:8},wrapperCol:{span:16},onFinish:h,autoComplete:"off",labelAlign:"left",onValuesChange:f,children:[e.type!=="global"?c(o,{children:[u(r.Item,{name:"enable",valuePropName:"checked",children:u(T,{children:"\u4F7F\u7528\u72EC\u7ACB\u914D\u7F6E"})}),u("div",{className:d.splitLine})]}):null,e.type==="global"?c(o,{children:[u("div",{className:d.tip,children:"\u6388\u6743\u914D\u7F6E"}),u(r.Item,{label:"\u67E5\u8BE2\u6388\u6743",children:c(o,{children:[u(r.Item,{noStyle:!0,name:"authenticationQueriesRequired",valuePropName:"checked",children:u(v,{checkedChildren:"\u5F00\u542F",unCheckedChildren:"\u5173\u95ED"})}),u("span",{className:d.tip,style:{marginLeft:12},children:"\u67E5\u8BE2\u662F\u5426\u9700\u8981\u767B\u5F55"})]})}),u(r.Item,{label:"\u53D8\u66F4\u6388\u6743",children:c(o,{children:[u(r.Item,{noStyle:!0,name:"authenticationMutationsRequired",valuePropName:"checked",children:u(v,{checkedChildren:"\u5F00\u542F",unCheckedChildren:"\u5173\u95ED"})}),u("span",{className:d.tip,style:{marginLeft:12},children:"\u53D8\u66F4\u662F\u5426\u9700\u8981\u767B\u5F55"})]})}),u(r.Item,{label:"\u8BA2\u9605\u6388\u6743",children:c(o,{children:[u(r.Item,{noStyle:!0,name:"authenticationSubscriptionsRequired",valuePropName:"checked",children:u(v,{checkedChildren:"\u5F00\u542F",unCheckedChildren:"\u5173\u95ED"})}),u("span",{className:d.tip,style:{marginLeft:12},children:"\u8BA2\u9605\u662F\u5426\u9700\u8981\u767B\u5F55"})]})})]}):u(r.Item,{label:"\u5F00\u542F\u6388\u6743",children:c(o,{children:[u(r.Item,{noStyle:!0,name:"authenticationRequired",valuePropName:"checked",children:u(v,{disabled:m,checkedChildren:"\u5F00\u542F",unCheckedChildren:"\u5173\u95ED"})}),u("span",{className:d.tip,style:{marginLeft:12},children:"\u662F\u5426\u9700\u8981\u767B\u5F55"})]})}),c(o,{children:[e.operationType===F.QUERY||e.type==="global"?c(o,{children:[e.type==="panel"?u("div",{className:d.splitLine}):"",u("div",{className:d.tip,children:"\u7F13\u5B58\u914D\u7F6E"}),u(r.Item,{label:"\u67E5\u8BE2\u7F13\u5B58",children:c(o,{children:[u(r.Item,{noStyle:!0,name:"cachingEnable",valuePropName:"checked",children:u(v,{checkedChildren:"\u5F00\u542F",unCheckedChildren:"\u5173\u95ED"})}),u("span",{className:d.tip,style:{marginLeft:12},children:"\u5BF9\u67E5\u8BE2\u8FDB\u884C\u7F13\u5B58"})]})}),u(r.Item,{label:"\u6700\u5927\u65F6\u957F",name:"cachingMaxAge",children:u(g,{disabled:m,addonAfter:"\u79D2"})}),u(r.Item,{label:"\u91CD\u65B0\u6821\u9A8C\u65F6\u957F",name:"cachingStaleWhileRevalidate",children:u(g,{disabled:m,addonAfter:"\u79D2"})})]}):null,e.operationType===F.QUERY||e.type==="global"?c(o,{children:[e.type==="panel"?u("div",{className:d.splitLine}):"",u("div",{className:d.tip,children:"\u5B9E\u65F6\u914D\u7F6E"}),u(r.Item,{label:"\u5B9E\u65F6\u67E5\u8BE2",children:c(o,{children:[u(r.Item,{noStyle:!0,name:"liveQueryEnable",valuePropName:"checked",children:u(v,{checkedChildren:"\u5F00\u542F",unCheckedChildren:"\u5173\u95ED"})}),u("span",{className:d.tip,style:{marginLeft:12},children:"\u670D\u52A1\u7AEF\u5B9E\u65F6\u67E5\u8BE2"})]})}),u(r.Item,{label:"\u8F6E\u8BE2\u95F4\u9694",name:"liveQueryPollingIntervalSeconds",children:u(g,{disabled:m,addonAfter:"\u79D2"})})]}):null]}),e.type==="global"?c(r.Item,{wrapperCol:{offset:8,span:16},children:[u(E,{className:"btn-save",onClick:()=>{s.submit()},children:"\u4FDD\u5B58"}),u(E,{className:"btn-cancel ml-4",onClick:e.onClose,children:u("span",{children:"\u53D6\u6D88"})})]}):null]})})}export{Ze as I,ve as _,A as e,Xe as u};
