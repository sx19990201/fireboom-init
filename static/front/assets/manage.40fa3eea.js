import{r as s,a as r,A as Ge,g as ae,l as Ke,f as le,e as W,c as Le,j as G,d as he,i as An,C as Ln,_ as Be,S as Vn,G as Mn,L as Rn,a9 as Ee,F as en,aa as Tn,aw as $n}from"./index.bb86fbbf.js";import{B as Ce}from"./button.aa0bb50b.js";import{u as Xe,b as Bn,B as Kn,d as Hn,g as Wn}from"./iconUtil.02bc4596.js";/* empty css              */import{D as nn}from"./index.80acc5c7.js";import{I as an}from"./index.837f2673.js";import"./index.61964446.js";import{M as zn}from"./index.bb824a09.js";/* empty css               *//* empty css               */import{U as Un,C as vn}from"./index.4aaa6195.js";import{L as jn,R as qn}from"./RightOutlined.93d63f13.js";import{c as Gn,a as je}from"./conductUtil.03254829.js";import{K as me,u as tn,g as rn,f as Xn}from"./Portal.a4c68d61.js";import{o as Jn}from"./omit.fd69d8d2.js";import{F as Yn}from"./context.24d2ae58.js";import{a as Qn,g as Zn}from"./statusUtils.077f8a48.js";import{D as ea,M as na}from"./index.c0722274.js";import{P as aa}from"./index.29ffa237.js";import{P as on}from"./index.86464724.js";import{T as ta}from"./styleChecker.d685456c.js";import{i as xe}from"./use-immer.module.c8467ba8.js";import{f as ra}from"./utils.c9742588.js";import{B as oa}from"./Sider.d20f3d2a.js";import{S as ln}from"./SearchOutlined.7a88f9ff.js";import"./type.4482a080.js";import"./pickAttrs.38f17648.js";import"./Overflow.7a0e3cac.js";import"./EyeOutlined.7a3a19f7.js";import"./DialogWrap.ab5d7a46.js";import"./PortalWrapper.eb4c9ec4.js";import"./PaperClipOutlined.9913305c.js";import"./useForceUpdate.c2f36fab.js";import"./DeleteOutlined.71bf1760.js";import"./_baseIsEqual.08bd8828.js";import"./Dropdown.6fe64b76.js";var ia={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M862 465.3h-81c-4.6 0-9 2-12.1 5.5L550 723.1V160c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v563.1L255.1 470.8c-3-3.5-7.4-5.5-12.1-5.5h-81c-6.8 0-10.5 8.1-6 13.2L487.9 861a31.96 31.96 0 0048.3 0L868 478.5c4.5-5.2.8-13.2-6-13.2z"}}]},name:"arrow-down",theme:"outlined"};const la=ia;var mn=function(a,t){return r(Ge,{...ae(ae({},a),{},{ref:t,icon:la})})};mn.displayName="ArrowDownOutlined";const sa=s.exports.forwardRef(mn);var ca={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 545.5L536.1 163a31.96 31.96 0 00-48.3 0L156 545.5a7.97 7.97 0 006 13.2h81c4.6 0 9-2 12.1-5.5L474 300.9V864c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V300.9l218.9 252.3c3 3.5 7.4 5.5 12.1 5.5h81c6.8 0 10.5-8 6-13.2z"}}]},name:"arrow-up",theme:"outlined"};const ua=ca;var hn=function(a,t){return r(Ge,{...ae(ae({},a),{},{ref:t,icon:ua})})};hn.displayName="ArrowUpOutlined";const da=s.exports.forwardRef(hn);var fa={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"};const pa=fa;var gn=function(a,t){return r(Ge,{...ae(ae({},a),{},{ref:t,icon:pa})})};gn.displayName="SyncOutlined";const va=s.exports.forwardRef(gn);var Me=s.exports.createContext(null),Je="__RC_CASCADER_SPLIT__",Cn="SHOW_PARENT",xn="SHOW_CHILD";function be(e){return e.join(Je)}function Oe(e){return e.map(be)}function ma(e){return e.split(Je)}function ha(e){var a=e||{},t=a.label,o=a.value,i=a.children,l=o||"value";return{label:t||"label",value:l,key:l,children:i||"children"}}function Fe(e,a){var t,o;return(t=e.isLeaf)!==null&&t!==void 0?t:!(!((o=e[a.children])===null||o===void 0)&&o.length)}function ga(e){var a=e.parentElement;if(!!a){var t=e.offsetTop-a.offsetTop;t-a.scrollTop<0?a.scrollTo({top:t}):t+e.offsetHeight-a.scrollTop>a.offsetHeight&&a.scrollTo({top:t+e.offsetHeight-a.offsetHeight})}}function sn(e,a,t){var o=new Set(e),i=a();return e.filter(function(l){var c=i[l],u=c?c.parent:null,d=c?c.children:null;return t===xn?!(d&&d.some(function(n){return n.key&&o.has(n.key)})):!(u&&!u.node.disabled&&o.has(u.key))})}function Ve(e,a,t){for(var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,i=a,l=[],c=function(n){var w,x,D,C=e[n],g=(w=i)===null||w===void 0?void 0:w.findIndex(function(b){var O=b[t.value];return o?String(O)===String(C):O===C}),v=g!==-1?(x=i)===null||x===void 0?void 0:x[g]:null;l.push({value:(D=v==null?void 0:v[t.value])!==null&&D!==void 0?D:C,index:g,option:v}),i=v==null?void 0:v[t.children]},u=0;u<e.length;u+=1)c(u);return l}const Ca=function(e,a,t,o,i){return s.exports.useMemo(function(){var l=i||function(c){var u=o?c.slice(-1):c,d=" / ";return u.every(function(n){return["string","number"].includes(Ke(n))})?u.join(d):u.reduce(function(n,w,x){var D=s.exports.isValidElement(w)?s.exports.cloneElement(w,{key:x}):w;return x===0?[D]:[].concat(le(n),[d,D])},[])};return e.map(function(c){var u,d,n=Ve(c,a,t),w=l(n.map(function(D){var C,g=D.option,v=D.value;return(C=g==null?void 0:g[t.label])!==null&&C!==void 0?C:v}),n.map(function(D){var C=D.option;return C})),x=be(c);return{label:w,value:x,key:x,valueCells:c,disabled:(u=n[n.length-1])===null||u===void 0||(d=u.option)===null||d===void 0?void 0:d.disabled}})},[e,a,t,i,o])},xa=function(e,a){var t=s.exports.useRef({options:null,info:null}),o=s.exports.useCallback(function(){return t.current.options!==e&&(t.current.options=e,t.current.info=Gn(e,{fieldNames:a,initWrapper:function(l){return ae(ae({},l),{},{pathKeyEntities:{}})},processEntity:function(l,c){var u=l.nodes.map(function(d){return d[a.value]}).join(Je);c.pathKeyEntities[u]=l,l.key=u}})),t.current.info.pathKeyEntities},[a,e]);return o},ba=function(e,a){return s.exports.useCallback(function(t){var o=[],i=[];return t.forEach(function(l){var c=Ve(l,e,a);c.every(function(u){return u.option})?i.push(l):o.push(l)}),[i,o]},[e,a])};function cn(e){var a=s.exports.useRef();a.current=e;var t=s.exports.useCallback(function(){return a.current.apply(a,arguments)},[]);return t}function Sa(e){return s.exports.useMemo(function(){if(!e)return[!1,{}];var a={matchInputWidth:!0,limit:50};return e&&Ke(e)==="object"&&(a=ae(ae({},a),e)),a.limit<=0&&delete a.limit,[!0,a]},[e])}var Ae="__rc_cascader_search_mark__",wa=function(a,t,o){var i=o.label;return t.some(function(l){return String(l[i]).toLowerCase().includes(a.toLowerCase())})},ya=function(a,t,o,i){return t.map(function(l){return l[i.label]}).join(" / ")};const ka=function(e,a,t,o,i,l){var c=i.filter,u=c===void 0?wa:c,d=i.render,n=d===void 0?ya:d,w=i.limit,x=w===void 0?50:w,D=i.sort;return s.exports.useMemo(function(){var C=[];if(!e)return[];function g(v,b){v.forEach(function(O){if(!(!D&&x>0&&C.length>=x)){var z=[].concat(le(b),[O]),S=O[t.children];if((!S||S.length===0||l)&&u(e,z,{label:t.label})){var T;C.push(ae(ae({},O),{},(T={},W(T,t.label,n(e,z,o,t)),W(T,Ae,z),T)))}S&&g(O[t.children],z)}})}return g(a,[]),D&&C.sort(function(v,b){return D(v[Ae],b[Ae],e,t)}),x>0?C.slice(0,x):C},[e,a,t,o,n,l,u,D,x])};function _a(e){var a,t=e.prefixCls,o=e.checked,i=e.halfChecked,l=e.disabled,c=e.onClick,u=s.exports.useContext(Me),d=u.checkable,n=typeof d!="boolean"?d:null;return r("span",{className:Le("".concat(t),(a={},W(a,"".concat(t,"-checked"),o),W(a,"".concat(t,"-indeterminate"),!o&&i),W(a,"".concat(t,"-disabled"),l),a)),onClick:c,children:n})}var bn="__cascader_fix_label__";function Oa(e){var a=e.prefixCls,t=e.multiple,o=e.options,i=e.activeValue,l=e.prevValuePath,c=e.onToggleOpen,u=e.onSelect,d=e.onActive,n=e.checkedSet,w=e.halfCheckedSet,x=e.loadingKeys,D=e.isSelectable,C="".concat(a,"-menu"),g="".concat(a,"-menu-item"),v=s.exports.useContext(Me),b=v.fieldNames,O=v.changeOnSelect,z=v.expandTrigger,S=v.expandIcon,T=v.loadingIcon,R=v.dropdownMenuColumnStyle,y=z==="hover",A=s.exports.useMemo(function(){return o.map(function(f){var P,k=f.disabled,N=f[Ae],j=(P=f[bn])!==null&&P!==void 0?P:f[b.label],E=f[b.value],K=Fe(f,b),Q=N?N.map(function(m){return m[b.value]}):[].concat(le(l),[E]),$=be(Q),U=x.includes($),p=n.has($),h=w.has($);return{disabled:k,label:j,value:E,isLeaf:K,isLoading:U,checked:p,halfChecked:h,option:f,fullPath:Q,fullPathKey:$}})},[o,n,b,w,x,l]);return r("ul",{className:C,role:"menu",children:A.map(function(f){var P,k=f.disabled,N=f.label,j=f.value,E=f.isLeaf,K=f.isLoading,Q=f.checked,$=f.halfChecked,U=f.option,p=f.fullPath,h=f.fullPathKey,m=function(){!k&&(!y||!E)&&d(p)},F=function(){D(U)&&u(p,E)},H;return typeof U.title=="string"?H=U.title:typeof N=="string"&&(H=N),G("li",{className:Le(g,(P={},W(P,"".concat(g,"-expand"),!E),W(P,"".concat(g,"-active"),i===j),W(P,"".concat(g,"-disabled"),k),W(P,"".concat(g,"-loading"),K),P)),style:R,role:"menuitemcheckbox",title:H,"aria-checked":Q,"data-path-key":h,onClick:function(){m(),(!t||E)&&F()},onDoubleClick:function(){O&&c(!1)},onMouseEnter:function(){y&&m()},onMouseDown:function(te){te.preventDefault()},children:[t&&r(_a,{prefixCls:"".concat(a,"-checkbox"),checked:Q,halfChecked:$,disabled:k,onClick:function(te){te.stopPropagation(),F()}}),r("div",{className:"".concat(g,"-content"),children:N}),!K&&S&&!E&&r("div",{className:"".concat(g,"-expand-icon"),children:S}),K&&T&&r("div",{className:"".concat(g,"-loading-icon"),children:T})]},h)})})}const Pa=function(){var e=Xe(),a=e.multiple,t=e.open,o=s.exports.useContext(Me),i=o.values,l=s.exports.useState([]),c=he(l,2),u=c[0],d=c[1];return s.exports.useEffect(function(){if(t&&!a){var n=i[0];d(n||[])}},[t]),[u,d]},Na=function(e,a,t,o,i,l){var c=Xe(),u=c.direction,d=c.searchValue,n=c.toggleOpen,w=c.open,x=u==="rtl",D=s.exports.useMemo(function(){for(var R=-1,y=a,A=[],f=[],P=o.length,k=function($){var U=y.findIndex(function(p){return p[t.value]===o[$]});if(U===-1)return"break";R=U,A.push(R),f.push(o[$]),y=y[R][t.children]},N=0;N<P&&y;N+=1){var j=k(N);if(j==="break")break}for(var E=a,K=0;K<A.length-1;K+=1)E=E[A[K]][t.children];return[f,R,E]},[o,t,a]),C=he(D,3),g=C[0],v=C[1],b=C[2],O=function(y){i(y)},z=function(y){var A=b.length,f=v;f===-1&&y<0&&(f=A);for(var P=0;P<A;P+=1){f=(f+y+A)%A;var k=b[f];if(k&&!k.disabled){var N=k[t.value],j=g.slice(0,-1).concat(N);O(j);return}}},S=function(){if(g.length>1){var y=g.slice(0,-1);O(y)}else n(!1)},T=function(){var y,A=((y=b[v])===null||y===void 0?void 0:y[t.children])||[],f=A.find(function(k){return!k.disabled});if(f){var P=[].concat(le(g),[f[t.value]]);O(P)}};s.exports.useImperativeHandle(e,function(){return{onKeyDown:function(y){var A=y.which;switch(A){case me.UP:case me.DOWN:{var f=0;A===me.UP?f=-1:A===me.DOWN&&(f=1),f!==0&&z(f);break}case me.LEFT:{x?T():S();break}case me.RIGHT:{x?S():T();break}case me.BACKSPACE:{d||S();break}case me.ENTER:{if(g.length){var P=b[v],k=(P==null?void 0:P[Ae])||[];k.length?l(k.map(function(N){return N[t.value]}),k[k.length-1]):l(g,b[v])}break}case me.ESC:n(!1),w&&y.stopPropagation()}},onKeyUp:function(){}}})};var Da=s.exports.forwardRef(function(e,a){var t,o,i,l,c=Xe(),u=c.prefixCls,d=c.multiple,n=c.searchValue,w=c.toggleOpen,x=c.notFoundContent,D=c.direction,C=s.exports.useRef(),g=D==="rtl",v=s.exports.useContext(Me),b=v.options,O=v.values,z=v.halfValues,S=v.fieldNames,T=v.changeOnSelect,R=v.onSelect,y=v.searchOptions,A=v.dropdownPrefixCls,f=v.loadData,P=v.expandTrigger,k=A||u,N=s.exports.useState([]),j=he(N,2),E=j[0],K=j[1],Q=function(_){if(!(!f||n)){var B=Ve(_,b,S),M=B.map(function(ce){var fe=ce.option;return fe}),X=M[M.length-1];if(X&&!Fe(X,S)){var oe=be(_);K(function(ce){return[].concat(le(ce),[oe])}),f(M)}}};s.exports.useEffect(function(){E.length&&E.forEach(function(V){var _=ma(V),B=Ve(_,b,S,!0).map(function(X){var oe=X.option;return oe}),M=B[B.length-1];(!M||M[S.children]||Fe(M,S))&&K(function(X){return X.filter(function(oe){return oe!==V})})})},[b,E,S]);var $=s.exports.useMemo(function(){return new Set(Oe(O))},[O]),U=s.exports.useMemo(function(){return new Set(Oe(z))},[z]),p=Pa(),h=he(p,2),m=h[0],F=h[1],H=function(_){F(_),Q(_)},Z=function(_){var B=_.disabled,M=Fe(_,S);return!B&&(M||T||d)},te=function(_,B){var M=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;R(_),!d&&(B||T&&(P==="hover"||M))&&w(!1)},ee=s.exports.useMemo(function(){return n?y:b},[n,y,b]),I=s.exports.useMemo(function(){for(var V=[{options:ee}],_=ee,B=function(ce){var fe=m[ce],ge=_.find(function(ue){return ue[S.value]===fe}),pe=ge==null?void 0:ge[S.children];if(!(pe!=null&&pe.length))return"break";_=pe,V.push({options:pe})},M=0;M<m.length;M+=1){var X=B(M);if(X==="break")break}return V},[ee,m,S]),q=function(_,B){Z(B)&&te(_,Fe(B,S),!0)};Na(a,ee,S,m,H,q),s.exports.useEffect(function(){for(var V=0;V<m.length;V+=1){var _,B=m.slice(0,V+1),M=be(B),X=(_=C.current)===null||_===void 0?void 0:_.querySelector('li[data-path-key="'.concat(M.replace(/\\{0,2}"/g,'\\"'),'"]'));X&&ga(X)}},[m]);var ne=!(!((t=I[0])===null||t===void 0||(o=t.options)===null||o===void 0)&&o.length),re=[(i={},W(i,S.value,"__EMPTY__"),W(i,bn,x),W(i,"disabled",!0),i)],se=ae(ae({},e),{},{multiple:!ne&&d,onSelect:te,onActive:H,onToggleOpen:w,checkedSet:$,halfCheckedSet:U,loadingKeys:E,isSelectable:Z}),we=ne?[{options:re}]:I,ye=we.map(function(V,_){var B=m.slice(0,_),M=m[_];return r(Oa,{...se,prefixCls:k,options:V.options,prevValuePath:B,activeValue:M},_)});return r("div",{className:Le("".concat(k,"-menus"),(l={},W(l,"".concat(k,"-menu-empty"),ne),W(l,"".concat(k,"-rtl"),g),l)),ref:C,children:ye})}),Ia=["id","prefixCls","fieldNames","defaultValue","value","changeOnSelect","onChange","displayRender","checkable","searchValue","onSearch","showSearch","expandTrigger","options","dropdownPrefixCls","loadData","popupVisible","open","popupClassName","dropdownClassName","dropdownMenuColumnStyle","popupPlacement","placement","onDropdownVisibleChange","onPopupVisibleChange","expandIcon","loadingIcon","children","dropdownMatchSelectWidth","showCheckedStrategy"];function Ea(e){return Array.isArray(e)&&Array.isArray(e[0])}function un(e){return e?Ea(e)?e:(e.length===0?[]:[e]).map(function(a){return Array.isArray(a)?a:[a]}):[]}var Re=s.exports.forwardRef(function(e,a){var t=e.id,o=e.prefixCls,i=o===void 0?"rc-cascader":o,l=e.fieldNames,c=e.defaultValue,u=e.value,d=e.changeOnSelect,n=e.onChange,w=e.displayRender,x=e.checkable,D=e.searchValue,C=e.onSearch,g=e.showSearch,v=e.expandTrigger,b=e.options,O=e.dropdownPrefixCls,z=e.loadData,S=e.popupVisible,T=e.open,R=e.popupClassName,y=e.dropdownClassName,A=e.dropdownMenuColumnStyle,f=e.popupPlacement,P=e.placement,k=e.onDropdownVisibleChange,N=e.onPopupVisibleChange,j=e.expandIcon,E=j===void 0?">":j,K=e.loadingIcon,Q=e.children,$=e.dropdownMatchSelectWidth,U=$===void 0?!1:$,p=e.showCheckedStrategy,h=p===void 0?Cn:p,m=An(e,Ia),F=Bn(t),H=!!x,Z=tn(c,{value:u,postState:un}),te=he(Z,2),ee=te[0],I=te[1],q=s.exports.useMemo(function(){return ha(l)},[JSON.stringify(l)]),ne=s.exports.useMemo(function(){return b||[]},[b]),re=xa(ne,q),se=s.exports.useCallback(function(J){var L=re();return J.map(function(Y){var de=L[Y].nodes;return de.map(function(ve){return ve[q.value]})})},[re,q]),we=tn("",{value:D,postState:function(L){return L||""}}),ye=he(we,2),V=ye[0],_=ye[1],B=function(L,Y){_(L),Y.source!=="blur"&&C&&C(L)},M=Sa(g),X=he(M,2),oe=X[0],ce=X[1],fe=ka(V,ne,q,O||i,ce,d),ge=ba(ne,q),pe=s.exports.useMemo(function(){var J=ge(ee),L=he(J,2),Y=L[0],de=L[1];if(!H||!ee.length)return[Y,[],de];var ve=Oe(Y),Ne=re(),Se=je(ve,!0,Ne),Te=Se.checkedKeys,$e=Se.halfCheckedKeys;return[se(Te),se($e),de]},[H,ee,re,se,ge]),ue=he(pe,3),ke=ue[0],He=ue[1],Pe=ue[2],Sn=s.exports.useMemo(function(){var J=Oe(ke),L=sn(J,re,h);return[].concat(le(Pe),le(se(L)))},[ke,re,se,Pe,h]),wn=Ca(Sn,ne,q,H,w),We=cn(function(J){if(I(J),n){var L=un(J),Y=L.map(function(Ne){return Ve(Ne,ne,q).map(function(Se){return Se.option})}),de=H?L:L[0],ve=H?Y:Y[0];n(de,ve)}}),ze=cn(function(J){if(_(""),!H)We(J);else{var L=be(J),Y=Oe(ke),de=Oe(He),ve=Y.includes(L),Ne=Pe.some(function(De){return be(De)===L}),Se=ke,Te=Pe;if(Ne&&!ve)Te=Pe.filter(function(De){return be(De)!==L});else{var $e=ve?Y.filter(function(De){return De!==L}):[].concat(le(Y),[L]),Ze=re(),Ue;if(ve){var In=je($e,{checked:!1,halfCheckedKeys:de},Ze);Ue=In.checkedKeys}else{var En=je($e,!0,Ze);Ue=En.checkedKeys}var Fn=sn(Ue,re,h);Se=se(Fn)}We([].concat(le(Te),le(Se)))}}),yn=function(L,Y){if(Y.type==="clear"){We([]);return}var de=Y.values[0].valueCells;ze(de)},kn=T!==void 0?T:S,_n=y||R,On=P||f,Pn=function(L){k==null||k(L),N==null||N(L)},Nn=s.exports.useMemo(function(){return{options:ne,fieldNames:q,values:ke,halfValues:He,changeOnSelect:d,onSelect:ze,checkable:x,searchOptions:fe,dropdownPrefixCls:O,loadData:z,expandTrigger:v,expandIcon:E,loadingIcon:K,dropdownMenuColumnStyle:A}},[ne,q,ke,He,d,ze,x,fe,O,z,v,E,K,A]),Qe=!(V?fe:ne).length,Dn=V&&ce.matchInputWidth||Qe?{}:{minWidth:"auto"};return r(Me.Provider,{value:Nn,children:r(Kn,{...m,ref:a,id:F,prefixCls:i,dropdownMatchSelectWidth:U,dropdownStyle:Dn,displayValues:wn,onDisplayValuesChange:yn,mode:H?"multiple":void 0,searchValue:V,onSearch:B,showSearch:oe,OptionList:Da,emptyOptions:Qe,open:kn,dropdownClassName:_n,placement:On,onDropdownVisibleChange:Pn,getRawInputElement:function(){return Q}})})});Re.SHOW_PARENT=Cn;Re.SHOW_CHILD=xn;var Fa=globalThis&&globalThis.__rest||function(e,a){var t={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&a.indexOf(o)<0&&(t[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,o=Object.getOwnPropertySymbols(e);i<o.length;i++)a.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(t[o[i]]=e[o[i]]);return t},Aa=Re.SHOW_CHILD,La=Re.SHOW_PARENT;function Va(e,a,t){var o=e.toLowerCase().split(a).reduce(function(c,u,d){return d===0?[u]:[].concat(le(c),[a,u])},[]),i=[],l=0;return o.forEach(function(c,u){var d=l+c.length,n=e.slice(l,d);l=d,u%2===1&&(n=r("span",{className:"".concat(t,"-menu-item-keyword"),children:n},"seperator-".concat(u))),i.push(n)}),i}var Ma=function(a,t,o,i){var l=[],c=a.toLowerCase();return t.forEach(function(u,d){d!==0&&l.push(" / ");var n=u[i.label],w=Ke(n);(w==="string"||w==="number")&&(n=Va(String(n),c,o)),l.push(n)}),l},Ye=s.exports.forwardRef(function(e,a){var t,o=e.prefixCls,i=e.size,l=e.disabled,c=e.className,u=e.multiple,d=e.bordered,n=d===void 0?!0:d,w=e.transitionName,x=e.choiceTransitionName,D=x===void 0?"":x,C=e.popupClassName,g=e.dropdownClassName,v=e.expandIcon,b=e.placement,O=e.showSearch,z=e.allowClear,S=z===void 0?!0:z,T=e.notFoundContent,R=e.direction,y=e.getPopupContainer,A=e.status,f=e.showArrow,P=Fa(e,["prefixCls","size","disabled","className","multiple","bordered","transitionName","choiceTransitionName","popupClassName","dropdownClassName","expandIcon","placement","showSearch","allowClear","notFoundContent","direction","getPopupContainer","status","showArrow"]),k=Jn(P,["suffixIcon"]),N=s.exports.useContext(Ln),j=N.getPopupContainer,E=N.getPrefixCls,K=N.renderEmpty,Q=N.direction,$=R||Q,U=$==="rtl",p=s.exports.useContext(Yn),h=p.status,m=p.hasFeedback,F=p.isFormItemInput,H=p.feedbackIcon,Z=Qn(h,A),te=T||(K||Hn)("Cascader"),ee=E(),I=E("select",o),q=E("cascader",o),ne=Le(C||g,"".concat(q,"-dropdown"),W({},"".concat(q,"-dropdown-rtl"),$==="rtl")),re=s.exports.useMemo(function(){if(!O)return O;var ue={render:Ma};return Ke(O)==="object"&&(ue=Be(Be({},ue),O)),ue},[O]),se=s.exports.useContext(Vn),we=i||se,ye=s.exports.useContext(Mn),V=l||ye,_=v;v||(_=U?r(jn,{}):r(qn,{}));var B=r("span",{className:"".concat(I,"-menu-item-loading-icon"),children:r(Rn,{spin:!0})}),M=s.exports.useMemo(function(){return u?r("span",{className:"".concat(q,"-checkbox-inner")}):!1},[u]),X=f!==void 0?f:e.loading||!u,oe=Wn(Be(Be({},e),{hasFeedback:m,feedbackIcon:H,showArrow:X,multiple:u,prefixCls:I})),ce=oe.suffixIcon,fe=oe.removeIcon,ge=oe.clearIcon,pe=function(){return b!==void 0?b:R==="rtl"?"bottomRight":"bottomLeft"};return r(Re,{prefixCls:I,className:Le(!o&&q,(t={},W(t,"".concat(I,"-lg"),we==="large"),W(t,"".concat(I,"-sm"),we==="small"),W(t,"".concat(I,"-rtl"),U),W(t,"".concat(I,"-borderless"),!n),W(t,"".concat(I,"-in-form-item"),F),t),Zn(I,Z,m),c),disabled:V,...k,direction:$,placement:pe(),notFoundContent:te,allowClear:S,showSearch:re,expandIcon:_,inputIcon:ce,removeIcon:fe,clearIcon:ge,loadingIcon:B,checkable:M,dropdownClassName:ne,dropdownPrefixCls:o||q,choiceTransitionName:rn(ee,"",D),transitionName:rn(ee,Xn(b),w),getPopupContainer:y||j,ref:a,showArrow:m||f})});Ye.SHOW_PARENT=La;Ye.SHOW_CHILD=Aa;const Ra=Ye,Ta="/assets/icon-compress.13fdfaa3.svg",$a="/assets/icon-doc.2d1327be.svg",qe="/assets/icon-fold.f1c27fac.svg",Ba="/assets/icon-other.14c73ad1.svg",Ka="/assets/icon-pic.5e3b961a.svg",Ha="/assets/icon-video.e242656f.svg",Wa="_container_14rga_1",za="_cascadeContainer_14rga_11",Ua="_fileDetail_14rga_22",ja="_fileDetailBody_14rga_104",qa="_header_14rga_109",Ga="_collapse_14rga_117",Xa="_bread_14rga_136",Ja="_leafBread_14rga_137",ie={container:Wa,cascadeContainer:za,fileDetail:Ua,"casader-select":"_casader-select_14rga_38",fileDetailBody:ja,header:qa,collapse:Ga,bread:Xa,leafBread:Ja},dn={compress:new Set(["zip","rar","7z","tar","gz","bz2","xz","lz","lzma","zst","cab"]),pic:new Set(["jpg","jpeg","png","gif","bmp","webp","svg","ico","tiff","psd","raw","heif","indd","ai","eps","svgz","ai","eps","ps"]),video:new Set(["mp4","avi","rmvb","rm","flv","mkv","mov","wmv","mpg","mpeg","3gp","webm","ts","m3u8","f4v","f4p","f4a","f4b","m4v","m4a","m4b","m4r","m4p","m4u"]),doc:new Set(["doc","docx","xls","xlsx","ppt","pptx","pdf","txt","md","csv","html","htm","xml","json","log","sql"])},{Panel:fn}=vn;function pn(e,a){return(e.isDir?1:2)-(a.isDir?1:2)}function _e(e){var o,i,l;const a=((i=(o=e.split("."))==null?void 0:o.pop())==null?void 0:i.toLowerCase())||"";return(l=Object.keys(dn).find(c=>{if(dn[c].has(a))return!0}))!=null?l:"other"}const Ie={pic:Ka,video:Ha,doc:$a,compress:Ta,other:Ba};function Ya({bucketId:e}){var K,Q,$,U;const[a,t]=xe(!0),[o,i]=xe(!1),[l,c]=xe(!1),[u,d]=xe(null),[n,w]=xe(void 0),[x,D]=xe([]),[C,g]=xe(!1),[v,b]=xe(!1),O=s.exports.useRef(null),z=s.exports.useMemo(()=>{var h,m,F;return n!=null&&n.isLeaf?(m=(h=n.parent)==null?void 0:h.value)!=null?m:"":(F=n==null?void 0:n.value)!=null?F:""},[n]),S=()=>{!e||Ee.get("/s3Upload/list",{params:{bucketID:e}}).then(p=>p.sort(pn).map(h=>({label:G(en,{children:[r("span",{children:h.isDir?r("img",{src:qe,alt:"\u6587\u4EF6\u5939",className:"w-3.5 h-3.5"}):r("img",{src:Ie[_e(h.name)],alt:"\u56FE\u7247",className:"w-3.5 h-3.5"})}),r(on,{content:r("div",{className:"max-w-[50vw] overflow-clip break-all",children:h.name}),placement:"topLeft",children:r("span",{className:`ml-2.5 ${h.isDir?"isDir":"isLeaf"}`,children:h.name})})]}),value:h.name,isLeaf:!h.isDir,...h})).filter(h=>h.name!=="")).then(p=>d(p))};s.exports.useEffect(S,[e]);const T=s.exports.useRef(!0);s.exports.useEffect(()=>{R()},[C]),s.exports.useEffect(()=>{R(!0)},[v]);const R=(p=!1)=>{if(T.current){T.current=!1;return}const h=p?n:n==null?void 0:n.parent;h?P([{...h}],n):S()},y=()=>{t(!a)},A=r(na,{items:[{key:"0",label:G("div",{onClick:()=>c(!l),children:["\u6309\u540D\u79F0",r("span",{className:"ml-2 text-red-500",children:l?r(da,{}):r(sa,{})})]})},{key:"1",label:r("div",{children:"\u6309\u6587\u4EF6\u5927\u5C0F"})},{key:"2",label:r("div",{children:"\u6309\u521B\u5EFA\u65F6\u95F4"})},{key:"3",label:r("div",{children:"\u6309\u4FEE\u6539\u65F6\u95F4"})}]}),f=(p,h)=>{D(h.map(F=>({value:F.isLeaf?F.value:F.value.replace(/\/$/,""),isLeaf:!!F.isLeaf}))),i(!1);const m=h[h.length-1];m.isLeaf&&(w({...m}),i(!0))},P=async(p,h)=>{var ee;const m=p[p.length-1];m.loading=!0,w(h?{...h}:{...m});let F=(ee=m.name)!=null?ee:"";if(m.isLeaf&&(F.includes("/")?F=F.replace(/\/[^/]+$/,"/"):F=""),!F){S();return}const Z=(await Ee.get("/s3Upload/list",{params:{bucketID:e,filePrefix:`${F}`}})).sort(pn).filter(I=>I.name!==m.name).map(I=>({parent:m,label:G(en,{children:[r("span",{children:I.isDir?r("img",{src:qe,alt:"\u6587\u4EF6\u5939",className:"w-3.5 h-3.5"}):r("img",{src:Ie[_e(I.name)],alt:"\u56FE\u7247",className:"w-3.5 h-3.5"})}),r(on,{content:r("div",{className:"max-w-[50vw] overflow-clip break-all",children:I.name.replace(m.value,"")}),placement:"topLeft",children:r("span",{className:`ml-2.5 ${I.isDir?"isDir":"isLeaf"}`,children:I.name.replace(m.value,"")})})]}),value:I.name.replace(m.value,""),isLeaf:!I.isDir,...I}));m.children=Z,m.loading=!1;const te=u.map(I=>I.name===m.name?m:I);d(te)},k=()=>{Ee.post("/s3Upload/remove",{bucketID:e,fileName:n==null?void 0:n.name}).then(()=>{Tn.success("\u5220\u9664\u6210\u529F"),g(!C)})},N=s.exports.useRef(),j=()=>{zn.info({title:"\u8BF7\u8F93\u5165\u6587\u4EF6\u5939\u540D\u79F0",content:r(an,{autoFocus:!0,placeholder:"\u8BF7\u8F93\u5165",onChange:p=>{N.current=p.target.value}}),okText:"\u521B\u5EFA",onOk:()=>{!N.current||Ee.post("/api/v1/s3Upload/upload",{bucketID:e,path:`${N.current}/`})}})},E=p=>{var m,F,H;if(!p)return null;const h=_e((m=p==null?void 0:p.name)!=null?m:"");return h==="pic"?r("img",{width:200,height:200,src:(F=n==null?void 0:n.url)!=null?F:"",alt:n==null?void 0:n.value}):h==="video"?r("video",{controls:!0,width:200,height:200,src:(H=n==null?void 0:n.url)!=null?H:""}):r("img",{src:Ie[_e(n==null?void 0:n.value)],width:200,height:200,alt:n==null?void 0:n.value})};return G("div",{className:"h-full flex flex-col",children:[G("div",{className:"bg-white pl-9 h-13 pr-4 flex  items-center justify-between flex-0",children:[r("div",{className:"flex flex-1 min-w-0",children:x.map((p,h)=>r("div",{className:p.isLeaf?ie.leafBread:ie.bread,children:p.value},p.value))}),G("div",{className:"flex flex-0 justify-center items-center",children:[a?r(ta,{title:"serach",children:r(Ce,{className:"mr-4",shape:"circle",icon:r(ln,{}),onClick:y})}):r(an,{status:"error",prefix:r(ln,{onClick:y,className:ie["form-item-icon"]}),className:"mr-4"}),r(nn,{type:"vertical",className:"!h-3 !mr-5"}),r(Ce,{onClick:()=>g(!C),icon:r(va,{}),className:"mr-2 !p-1 !border-0",children:"\u5237\u65B0"}),r(ea,{overlay:A,placement:"bottom",children:r(Ce,{icon:r(oa,{}),className:"mr-2 !p-1 !border-0",children:"\u6392\u5E8F"})}),r(nn,{type:"vertical",className:"!h-3 !mr-5"}),r(Un,{action:"/api/v1/s3Upload/upload",data:{bucketID:e,path:z},showUploadList:!1,onChange:p=>{(p.file.status==="success"||p.file.status==="done")&&b(!v)},children:r(Ce,{size:"small",className:"!h-7 !rounded-2px mr-4",children:"\u4E0A\u4F20"})}),r(Ce,{size:"small",className:"!h-7 !rounded-2px",onClick:j,children:"\u6587\u4EF6\u5939"})]})]}),O.current?r(Ra,{getPopupContainer:()=>O.current,open:!0,options:u,loadData:p=>void P(p),onChange:f,changeOnSelect:!0,popupClassName:`${ie["casader-select"]} flex mb-8`,children:r("div",{})}):null,G("div",{className:ie.container,children:[r("div",{ref:O,className:ie.cascadeContainer}),o?r("div",{className:ie.fileDetail,children:G("div",{className:ie.fileDetailBody,children:[G("div",{className:ie.header,children:[n!=null&&n.isLeaf?r("img",{src:Ie[_e(Ie[_e((K=n==null?void 0:n.name)!=null?K:"")])],alt:"\u56FE\u7247",className:"w-3.5 h-3.5 mr-2"}):r("img",{src:qe,alt:"\u6587\u4EF6\u5939",className:"w-3.5 h-3.5 mr-2"}),n==null?void 0:n.name]}),G(vn,{defaultActiveKey:["1","2"],bordered:!1,expandIconPosition:"end",ghost:!0,className:ie.collapse,children:[G(fn,{header:"\u57FA\u672C\u4FE1\u606F",children:[G("p",{children:["\u7C7B\u578B\uFF1A",(Q=n==null?void 0:n.mime)!=null?Q:"\u672A\u77E5"]}),G("p",{children:["\u5927\u5C0F\uFF1A",ra(n==null?void 0:n.size)]}),G("p",{children:["\u521B\u5EFA\u4E8E\uFF1A",($=n==null?void 0:n.createTime)!=null?$:""]}),G("p",{children:["\u4FEE\u6539\u4E8E\uFF1A",(U=n==null?void 0:n.updateTime)!=null?U:""]})]},"1"),r(fn,{header:"\u9884\u89C8",children:r("div",{className:`${ie["panel-style"]} flex-col justify-center items-center flex`,children:E(n)})},"2"),G("div",{className:"flex flex-col",children:[r(Ce,{className:"m-1.5",children:"\u4E0B\u8F7D"}),r(Ce,{onClick:()=>{var p;return void navigator.clipboard.writeText(`${(p=n==null?void 0:n.name)!=null?p:""}`)},className:"m-1.5",children:"\u590D\u5236URL"}),r(aa,{title:"\u786E\u5B9A\u5220\u9664\u5417?",onConfirm:k,okText:"\u5220\u9664",cancelText:"\u53D6\u6D88",children:r(Ce,{className:"m-1.5",children:r("span",{className:"text-[#F21212]",children:"\u5220\u9664"})})})]})]})]})}):null]})]})}function Lt(){const{id:e}=$n(),[a,t]=s.exports.useState();return s.exports.useEffect(()=>{Ee.get("/storageBucket").then(o=>{t(o.filter(i=>i.id===Number(e))[0])})},[e]),r("div",{className:"h-full",children:r(Ya,{bucketId:a==null?void 0:a.id},a==null?void 0:a.id)})}export{Lt as default};
