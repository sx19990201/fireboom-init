import{C as f}from"./codemirror.es.f74c380b.js";import{f as j}from"./forEachState.es.d8431927.js";import{g,o as b,G as O,b as y,p as N,q as D}from"./index.5bf4d2ac.js";import"./index.bb86fbbf.js";import"./index.4a2fd767.js";import"./Dropdown.6fe64b76.js";import"./index.61964446.js";import"./Portal.a4c68d61.js";import"./type.4482a080.js";import"./Overflow.7a0e3cac.js";import"./statusUtils.077f8a48.js";import"./context.24d2ae58.js";import"./_baseIsEqual.08bd8828.js";import"./omit.fd69d8d2.js";import"./PlusOutlined.c73517e2.js";import"./styleChecker.d685456c.js";import"./button.aa0bb50b.js";import"./index.11df8be1.js";import"./isSymbol.5f361b44.js";import"./index.9ea41163.js";import"./source.c7b92d0a.js";import"./parser.416ca819.js";import"./printer.6dfbd086.js";import"./Helmet.0418c866.js";import"./index.10921ee9.js";import"./index.ef4e31c1.js";import"./identity.bf2ac13f.js";import"./index.2f0a4123.js";import"./row.b57345b2.js";import"./responsiveObserve.57a0a6d3.js";import"./index.4f67b986.js";import"./iconUtil.02bc4596.js";import"./pickAttrs.38f17648.js";import"./SearchOutlined.7a88f9ff.js";import"./index.445b6a21.js";import"./workbenchContext.3d2abc29.js";import"./parameter.aff251c0.js";import"./utils.c9742588.js";import"./PortalWrapper.eb4c9ec4.js";import"./index.6d8ed736.js";import"./state-local.735e622b.js";import"./index.4c04c22e.js";import"./dayjs.min.bdeb7890.js";import"./DoubleRightOutlined.3d4f0e16.js";import"./getDefaultCode.40c4b411.js";import"./Breadcrumb.9423f423.js";import"./index.c0722274.js";import"./RightOutlined.93d63f13.js";import"./Sider.d20f3d2a.js";import"./index.837f2673.js";import"./EyeOutlined.7a3a19f7.js";import"./index.cf3f625b.js";import"./main.6fe01a4a.js";var M=Object.defineProperty,a=(o,i)=>M(o,"name",{value:i,configurable:!0});function c(o,i,e){const r=x(e,d(i.string));if(!r)return;const t=i.type!==null&&/"|\w/.test(i.string[0])?i.start:i.end;return{list:r,from:{line:o.line,ch:t},to:{line:o.line,ch:i.end}}}a(c,"hintList");function x(o,i){if(!i)return u(o,n=>!n.isDeprecated);const e=o.map(n=>({proximity:T(d(n.text),i),entry:n}));return u(u(e,n=>n.proximity<=2),n=>!n.entry.isDeprecated).sort((n,p)=>(n.entry.isDeprecated?1:0)-(p.entry.isDeprecated?1:0)||n.proximity-p.proximity||n.entry.text.length-p.entry.text.length).map(n=>n.entry)}a(x,"filterAndSortList");function u(o,i){const e=o.filter(i);return e.length===0?o:e}a(u,"filterNonEmpty");function d(o){return o.toLowerCase().replace(/\W/g,"")}a(d,"normalizeText");function T(o,i){let e=v(i,o);return o.length>i.length&&(e-=o.length-i.length-1,e+=o.indexOf(i)===0?0:.5),e}a(T,"getProximity");function v(o,i){let e,r;const t=[],n=o.length,p=i.length;for(e=0;e<=n;e++)t[e]=[e];for(r=1;r<=p;r++)t[0][r]=r;for(e=1;e<=n;e++)for(r=1;r<=p;r++){const m=o[e-1]===i[r-1]?0:1;t[e][r]=Math.min(t[e-1][r]+1,t[e][r-1]+1,t[e-1][r-1]+m),e>1&&r>1&&o[e-1]===i[r-2]&&o[e-2]===i[r-1]&&(t[e][r]=Math.min(t[e][r],t[e-2][r-2]+m))}return t[n][p]}a(v,"lexicalDistance");f.registerHelper("hint","graphql-variables",(o,i)=>{const e=o.getCursor(),r=o.getTokenAt(e),t=L(e,r,i);return(t==null?void 0:t.list)&&t.list.length>0&&(t.from=f.Pos(t.from.line,t.from.ch),t.to=f.Pos(t.to.line,t.to.ch),f.signal(o,"hasCompletion",o,t,r)),t});function L(o,i,e){const r=i.state.kind==="Invalid"?i.state.prevState:i.state,t=r.kind,n=r.step;if(t==="Document"&&n===0)return c(o,i,[{text:"{"}]);const p=e.variableToType;if(!p)return;const m=V(p,i.state);if(t==="Document"||t==="Variable"&&n===0){const s=Object.keys(p);return c(o,i,s.map(l=>({text:`"${l}": `,type:p[l]})))}if((t==="ObjectValue"||t==="ObjectField"&&n===0)&&m.fields){const s=Object.keys(m.fields).map(l=>m.fields[l]);return c(o,i,s.map(l=>({text:`"${l.name}": `,type:l.type,description:l.description})))}if(t==="StringValue"||t==="NumberValue"||t==="BooleanValue"||t==="NullValue"||t==="ListValue"&&n===1||t==="ObjectField"&&n===2||t==="Variable"&&n===2){const s=m.type?g(m.type):void 0;if(s instanceof b)return c(o,i,[{text:"{"}]);if(s instanceof O){const l=s.getValues();return c(o,i,l.map(h=>({text:`"${h.name}"`,type:s,description:h.description})))}else if(s===y)return c(o,i,[{text:"true",type:y,description:"Not false."},{text:"false",type:y,description:"Not true."}])}}a(L,"getVariablesHint");function V(o,i){const e={type:null,fields:null};return j(i,r=>{if(r.kind==="Variable")e.type=o[r.name];else if(r.kind==="ListValue"){const t=e.type?N(e.type):void 0;e.type=t instanceof D?t.ofType:null}else if(r.kind==="ObjectValue"){const t=e.type?g(e.type):void 0;e.fields=t instanceof b?t.getFields():null}else if(r.kind==="ObjectField"){const t=r.name&&e.fields?e.fields[r.name]:null;e.type=t==null?void 0:t.type}}),e}a(V,"getTypeInfo");
