import{r as Pt,a as Xs,A as Js,g as _i,h as he,aA as Zs,av as eu,aa as ja}from"./index.bb86fbbf.js";import{_ as we,a as P,b as br,c as Xe,d as Je,e as St}from"./tslib.es6.d40f4976.js";import{S as tu,K as Ba}from"./source.c7b92d0a.js";import{v as Ge,B as Va,p as ru}from"./printer.6dfbd086.js";var nu={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M747.4 535.7c-.4-68.2 30.5-119.6 92.9-157.5-34.9-50-87.7-77.5-157.3-82.8-65.9-5.2-138 38.4-164.4 38.4-27.9 0-91.7-36.6-141.9-36.6C273.1 298.8 163 379.8 163 544.6c0 48.7 8.9 99 26.7 150.8 23.8 68.2 109.6 235.3 199.1 232.6 46.8-1.1 79.9-33.2 140.8-33.2 59.1 0 89.7 33.2 141.9 33.2 90.3-1.3 167.9-153.2 190.5-221.6-121.1-57.1-114.6-167.2-114.6-170.7zm-10.6 267c-14.3 19.9-28.7 35.6-41.9 45.7-10.5 8-18.6 11.4-24 11.6-9-.1-17.7-2.3-34.7-8.8-1.2-.5-2.5-1-4.2-1.6l-4.4-1.7c-17.4-6.7-27.8-10.3-41.1-13.8-18.6-4.8-37.1-7.4-56.9-7.4-20.2 0-39.2 2.5-58.1 7.2-13.9 3.5-25.6 7.4-42.7 13.8-.7.3-8.1 3.1-10.2 3.9-3.5 1.3-6.2 2.3-8.7 3.2-10.4 3.6-17 5.1-22.9 5.2-.7 0-1.3-.1-1.8-.2-1.1-.2-2.5-.6-4.1-1.3-4.5-1.8-9.9-5.1-16-9.8-14-10.9-29.4-28-45.1-49.9-27.5-38.6-53.5-89.8-66-125.7-15.4-44.8-23-87.7-23-128.6 0-60.2 17.8-106 48.4-137.1 26.3-26.6 61.7-41.5 97.8-42.3 5.9.1 14.5 1.5 25.4 4.5 8.6 2.3 18 5.4 30.7 9.9 3.8 1.4 16.9 6.1 18.5 6.7 7.7 2.8 13.5 4.8 19.2 6.6 18.2 5.8 32.3 9 47.6 9 15.5 0 28.8-3.3 47.7-9.8 7.1-2.4 32.9-12 37.5-13.6 25.6-9.1 44.5-14 60.8-15.2 4.8-.4 9.1-.4 13.2-.1 22.7 1.8 42.1 6.3 58.6 13.8-37.6 43.4-57 96.5-56.9 158.4-.3 14.7.9 31.7 5.1 51.8 6.4 30.5 18.6 60.7 37.9 89 14.7 21.5 32.9 40.9 54.7 57.8-11.5 23.7-25.6 48.2-40.4 68.8zm-94.5-572c50.7-60.2 46.1-115 44.6-134.7-44.8 2.6-96.6 30.5-126.1 64.8-32.5 36.8-51.6 82.3-47.5 133.6 48.4 3.7 92.6-21.2 129-63.7z"}}]},name:"apple",theme:"outlined"};const iu=nu;var qa=function(e,r){return Xs(Js,{..._i(_i({},e),{},{ref:r,icon:iu})})};qa.displayName="AppleOutlined";const _p=Pt.exports.forwardRef(qa),Wa="fetch_blocks",Ga="refetch_blocks",Qa="update_blocks",za="update_current_entity_id",Ka="update_preview_filters",Ha="save_gql_schema",Ya="create_apollo_client",au=(t,e,r)=>({type:Wa,payload:{blocks:t,dbSource:e,schema:r}}),ou=(t,e)=>({type:Ga,payload:{blocks:t,schema:e}}),su=t=>({type:Qa,payload:t}),uu=t=>({type:za,payload:t}),Tp=t=>({type:Ka,payload:t}),Op=t=>({type:Ha,payload:t}),cu=t=>({type:Ya,payload:t});var $a={},nr={};Object.defineProperty(nr,"__esModule",{value:!0});nr.VERSION=void 0;nr.VERSION="9.1.0";var Kr={},N={},lu=he&&he.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,a;n<i;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return t.concat(a||Array.prototype.slice.call(e))};Object.defineProperty(N,"__esModule",{value:!0});N.toFastProperties=N.timer=N.peek=N.isES2015MapSupported=N.PRINT_WARNING=N.PRINT_ERROR=N.packArray=N.IDENTITY=N.NOOP=N.merge=N.groupBy=N.defaults=N.assignNoOverwrite=N.assign=N.zipObject=N.sortBy=N.indexOf=N.some=N.difference=N.every=N.isObject=N.isRegExp=N.isArray=N.partial=N.uniq=N.compact=N.reduce=N.findAll=N.find=N.cloneObj=N.cloneArr=N.contains=N.has=N.pick=N.reject=N.filter=N.dropRight=N.drop=N.isFunction=N.isUndefined=N.isString=N.forEach=N.last=N.first=N.flatten=N.map=N.mapValues=N.values=N.keys=N.isEmpty=void 0;N.upperFirst=void 0;function Xa(t){return t&&t.length===0}N.isEmpty=Xa;function dt(t){return t==null?[]:Object.keys(t)}N.keys=dt;function Ja(t){for(var e=[],r=Object.keys(t),n=0;n<r.length;n++)e.push(t[r[n]]);return e}N.values=Ja;function fu(t,e){for(var r=[],n=dt(t),i=0;i<n.length;i++){var a=n[i];r.push(e.call(null,t[a],a))}return r}N.mapValues=fu;function hu(t,e){for(var r=[],n=0;n<t.length;n++)r.push(e.call(null,t[n],n));return r}N.map=hu;function Za(t){for(var e=[],r=0;r<t.length;r++){var n=t[r];Array.isArray(n)?e=e.concat(Za(n)):e.push(n)}return e}N.flatten=Za;function pu(t){return Xa(t)?void 0:t[0]}N.first=pu;function du(t){var e=t&&t.length;return e?t[e-1]:void 0}N.last=du;function eo(t,e){if(Array.isArray(t))for(var r=0;r<t.length;r++)e.call(null,t[r],r);else if(zn(t))for(var n=dt(t),r=0;r<n.length;r++){var i=n[r],a=t[i];e.call(null,a,i)}else throw Error("non exhaustive match")}N.forEach=eo;function vu(t){return typeof t=="string"}N.isString=vu;function mu(t){return t===void 0}N.isUndefined=mu;function yu(t){return t instanceof Function}N.isFunction=yu;function gu(t,e){return e===void 0&&(e=1),t.slice(e,t.length)}N.drop=gu;function Eu(t,e){return e===void 0&&(e=1),t.slice(0,t.length-e)}N.dropRight=Eu;function to(t,e){var r=[];if(Array.isArray(t))for(var n=0;n<t.length;n++){var i=t[n];e.call(null,i)&&r.push(i)}return r}N.filter=to;function Gn(t,e){return to(t,function(r){return!e(r)})}N.reject=Gn;function _u(t,e){for(var r=Object.keys(t),n={},i=0;i<r.length;i++){var a=r[i],o=t[a];e(o)&&(n[a]=o)}return n}N.pick=_u;function ro(t,e){return zn(t)?t.hasOwnProperty(e):!1}N.has=ro;function Qn(t,e){return ao(t,function(r){return r===e})!==void 0}N.contains=Qn;function no(t){for(var e=[],r=0;r<t.length;r++)e.push(t[r]);return e}N.cloneArr=no;function io(t){var e={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}N.cloneObj=io;function ao(t,e){for(var r=0;r<t.length;r++){var n=t[r];if(e.call(null,n))return n}}N.find=ao;function Tu(t,e){for(var r=[],n=0;n<t.length;n++){var i=t[n];e.call(null,i)&&r.push(i)}return r}N.findAll=Tu;function oo(t,e,r){for(var n=Array.isArray(t),i=n?t:Ja(t),a=n?[]:dt(t),o=r,u=0;u<i.length;u++)o=e.call(null,o,i[u],n?u:a[u]);return o}N.reduce=oo;function Ou(t){return Gn(t,function(e){return e==null})}N.compact=Ou;function Au(t,e){e===void 0&&(e=function(n){return n});var r=[];return oo(t,function(n,i){var a=e(i);return Qn(r,a)?n:(r.push(a),n.concat(i))},[])}N.uniq=Au;function bu(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];var n=[null],i=n.concat(e);return Function.bind.apply(t,i)}N.partial=bu;function Ru(t){return Array.isArray(t)}N.isArray=Ru;function Su(t){return t instanceof RegExp}N.isRegExp=Su;function zn(t){return t instanceof Object}N.isObject=zn;function ku(t,e){for(var r=0;r<t.length;r++)if(!e(t[r],r))return!1;return!0}N.every=ku;function Nu(t,e){return Gn(t,function(r){return Qn(e,r)})}N.difference=Nu;function Iu(t,e){for(var r=0;r<t.length;r++)if(e(t[r]))return!0;return!1}N.some=Iu;function Pu(t,e){for(var r=0;r<t.length;r++)if(t[r]===e)return r;return-1}N.indexOf=Pu;function Lu(t,e){var r=no(t);return r.sort(function(n,i){return e(n)-e(i)}),r}N.sortBy=Lu;function Cu(t,e){if(t.length!==e.length)throw Error("can't zipObject with different number of keys and values!");for(var r={},n=0;n<t.length;n++)r[t[n]]=e[n];return r}N.zipObject=Cu;function wu(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var n=0;n<e.length;n++)for(var i=e[n],a=dt(i),o=0;o<a.length;o++){var u=a[o];t[u]=i[u]}return t}N.assign=wu;function so(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var n=0;n<e.length;n++)for(var i=e[n],a=dt(i),o=0;o<a.length;o++){var u=a[o];ro(t,u)||(t[u]=i[u])}return t}N.assignNoOverwrite=so;function Mu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return so.apply(void 0,lu([{}],t,!1))}N.defaults=Mu;function Fu(t,e){var r={};return eo(t,function(n){var i=e(n),a=r[i];a?a.push(n):r[i]=[n]}),r}N.groupBy=Fu;function Du(t,e){for(var r=io(t),n=dt(e),i=0;i<n.length;i++){var a=n[i],o=e[a];r[a]=o}return r}N.merge=Du;function xu(){}N.NOOP=xu;function Uu(t){return t}N.IDENTITY=Uu;function ju(t){for(var e=[],r=0;r<t.length;r++){var n=t[r];e.push(n!==void 0?n:void 0)}return e}N.packArray=ju;function Bu(t){console&&console.error&&console.error("Error: "+t)}N.PRINT_ERROR=Bu;function Vu(t){console&&console.warn&&console.warn("Warning: "+t)}N.PRINT_WARNING=Vu;function qu(){return typeof Map=="function"}N.isES2015MapSupported=qu;function Wu(t){return t[t.length-1]}N.peek=Wu;function Gu(t){var e=new Date().getTime(),r=t(),n=new Date().getTime(),i=n-e;return{time:i,value:r}}N.timer=Gu;function Qu(t){function e(){}e.prototype=t;var r=new e;function n(){return typeof r.bar}return n(),n(),t}N.toFastProperties=Qu;function zu(t){if(!t)return t;var e=Hu(t,0);return e.toUpperCase()+t.substring(e.length)}N.upperFirst=zu;var Ku=/[\uD800-\uDBFF][\uDC00-\uDFFF]/;function Hu(t,e){var r=t.substring(e,e+1);return Ku.test(r)?r:t[e]}var De={},Lt={},X={},nt={},Hr={},Yr={},Ir={exports:{}};(function(t){(function(e,r){t.exports?t.exports=r():e.regexpToAst=r()})(typeof self<"u"?self:he,function(){function e(){}e.prototype.saveState=function(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}},e.prototype.restoreState=function(f){this.idx=f.idx,this.input=f.input,this.groupIdx=f.groupIdx},e.prototype.pattern=function(f){this.idx=0,this.input=f,this.groupIdx=0,this.consumeChar("/");var v=this.disjunction();this.consumeChar("/");for(var m={type:"Flags",loc:{begin:this.idx,end:f.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};this.isRegExpFlag();)switch(this.popChar()){case"g":u(m,"global");break;case"i":u(m,"ignoreCase");break;case"m":u(m,"multiLine");break;case"u":u(m,"unicode");break;case"y":u(m,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:m,value:v,loc:this.loc(0)}},e.prototype.disjunction=function(){var f=[],v=this.idx;for(f.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),f.push(this.alternative());return{type:"Disjunction",value:f,loc:this.loc(v)}},e.prototype.alternative=function(){for(var f=[],v=this.idx;this.isTerm();)f.push(this.term());return{type:"Alternative",value:f,loc:this.loc(v)}},e.prototype.term=function(){return this.isAssertion()?this.assertion():this.atom()},e.prototype.assertion=function(){var f=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(f)};case"$":return{type:"EndAnchor",loc:this.loc(f)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(f)};case"B":return{type:"NonWordBoundary",loc:this.loc(f)}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");var v;switch(this.popChar()){case"=":v="Lookahead";break;case"!":v="NegativeLookahead";break}s(v);var m=this.disjunction();return this.consumeChar(")"),{type:v,value:m,loc:this.loc(f)}}c()},e.prototype.quantifier=function(f){var v,m=this.idx;switch(this.popChar()){case"*":v={atLeast:0,atMost:1/0};break;case"+":v={atLeast:1,atMost:1/0};break;case"?":v={atLeast:0,atMost:1};break;case"{":var E=this.integerIncludingZero();switch(this.popChar()){case"}":v={atLeast:E,atMost:E};break;case",":var g;this.isDigit()?(g=this.integerIncludingZero(),v={atLeast:E,atMost:g}):v={atLeast:E,atMost:1/0},this.consumeChar("}");break}if(f===!0&&v===void 0)return;s(v);break}if(!(f===!0&&v===void 0))return s(v),this.peekChar(0)==="?"?(this.consumeChar("?"),v.greedy=!1):v.greedy=!0,v.type="Quantifier",v.loc=this.loc(m),v},e.prototype.atom=function(){var f,v=this.idx;switch(this.peekChar()){case".":f=this.dotAll();break;case"\\":f=this.atomEscape();break;case"[":f=this.characterClass();break;case"(":f=this.group();break}return f===void 0&&this.isPatternCharacter()&&(f=this.patternCharacter()),s(f),f.loc=this.loc(v),this.isQuantifier()&&(f.quantifier=this.quantifier()),f},e.prototype.dotAll=function(){return this.consumeChar("."),{type:"Set",complement:!0,value:[a(`
`),a("\r"),a("\u2028"),a("\u2029")]}},e.prototype.atomEscape=function(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}},e.prototype.decimalEscapeAtom=function(){var f=this.positiveInteger();return{type:"GroupBackReference",value:f}},e.prototype.characterClassEscape=function(){var f,v=!1;switch(this.popChar()){case"d":f=l;break;case"D":f=l,v=!0;break;case"s":f=d;break;case"S":f=d,v=!0;break;case"w":f=p;break;case"W":f=p,v=!0;break}return s(f),{type:"Set",value:f,complement:v}},e.prototype.controlEscapeAtom=function(){var f;switch(this.popChar()){case"f":f=a("\f");break;case"n":f=a(`
`);break;case"r":f=a("\r");break;case"t":f=a("	");break;case"v":f=a("\v");break}return s(f),{type:"Character",value:f}},e.prototype.controlLetterEscapeAtom=function(){this.consumeChar("c");var f=this.popChar();if(/[a-zA-Z]/.test(f)===!1)throw Error("Invalid ");var v=f.toUpperCase().charCodeAt(0)-64;return{type:"Character",value:v}},e.prototype.nulCharacterAtom=function(){return this.consumeChar("0"),{type:"Character",value:a("\0")}},e.prototype.hexEscapeSequenceAtom=function(){return this.consumeChar("x"),this.parseHexDigits(2)},e.prototype.regExpUnicodeEscapeSequenceAtom=function(){return this.consumeChar("u"),this.parseHexDigits(4)},e.prototype.identityEscapeAtom=function(){var f=this.popChar();return{type:"Character",value:a(f)}},e.prototype.classPatternCharacterAtom=function(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:var f=this.popChar();return{type:"Character",value:a(f)}}},e.prototype.characterClass=function(){var f=[],v=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),v=!0);this.isClassAtom();){var m=this.classAtom(),E=m.type==="Character";if(E&&this.isRangeDash()){this.consumeChar("-");var g=this.classAtom(),T=g.type==="Character";if(T){if(g.value<m.value)throw Error("Range out of order in character class");f.push({from:m.value,to:g.value})}else o(m.value,f),f.push(a("-")),o(g.value,f)}else o(m.value,f)}return this.consumeChar("]"),{type:"Set",complement:v,value:f}},e.prototype.classAtom=function(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}},e.prototype.classEscape=function(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:a("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}},e.prototype.group=function(){var f=!0;switch(this.consumeChar("("),this.peekChar(0)){case"?":this.consumeChar("?"),this.consumeChar(":"),f=!1;break;default:this.groupIdx++;break}var v=this.disjunction();this.consumeChar(")");var m={type:"Group",capturing:f,value:v};return f&&(m.idx=this.groupIdx),m},e.prototype.positiveInteger=function(){var f=this.popChar();if(i.test(f)===!1)throw Error("Expecting a positive integer");for(;n.test(this.peekChar(0));)f+=this.popChar();return parseInt(f,10)},e.prototype.integerIncludingZero=function(){var f=this.popChar();if(n.test(f)===!1)throw Error("Expecting an integer");for(;n.test(this.peekChar(0));)f+=this.popChar();return parseInt(f,10)},e.prototype.patternCharacter=function(){var f=this.popChar();switch(f){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:a(f)}}},e.prototype.isRegExpFlag=function(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}},e.prototype.isRangeDash=function(){return this.peekChar()==="-"&&this.isClassAtom(1)},e.prototype.isDigit=function(){return n.test(this.peekChar(0))},e.prototype.isClassAtom=function(f){switch(f===void 0&&(f=0),this.peekChar(f)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}},e.prototype.isTerm=function(){return this.isAtom()||this.isAssertion()},e.prototype.isAtom=function(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}},e.prototype.isAssertion=function(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!");default:return!1}},e.prototype.isQuantifier=function(){var f=this.saveState();try{return this.quantifier(!0)!==void 0}catch{return!1}finally{this.restoreState(f)}},e.prototype.isPatternCharacter=function(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}},e.prototype.parseHexDigits=function(f){for(var v="",m=0;m<f;m++){var E=this.popChar();if(r.test(E)===!1)throw Error("Expecting a HexDecimal digits");v+=E}var g=parseInt(v,16);return{type:"Character",value:g}},e.prototype.peekChar=function(f){return f===void 0&&(f=0),this.input[this.idx+f]},e.prototype.popChar=function(){var f=this.peekChar(0);return this.consumeChar(),f},e.prototype.consumeChar=function(f){if(f!==void 0&&this.input[this.idx]!==f)throw Error("Expected: '"+f+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++},e.prototype.loc=function(f){return{begin:f,end:this.idx}};var r=/[0-9a-fA-F]/,n=/[0-9]/,i=/[1-9]/;function a(f){return f.charCodeAt(0)}function o(f,v){f.length!==void 0?f.forEach(function(m){v.push(m)}):v.push(f)}function u(f,v){if(f[v]===!0)throw"duplicate flag "+v;f[v]=!0}function s(f){if(f===void 0)throw Error("Internal Error - Should never get here!")}function c(){throw Error("Internal Error - Should never get here!")}var h,l=[];for(h=a("0");h<=a("9");h++)l.push(h);var p=[a("_")].concat(l);for(h=a("a");h<=a("z");h++)p.push(h);for(h=a("A");h<=a("Z");h++)p.push(h);var d=[a(" "),a("\f"),a(`
`),a("\r"),a("	"),a("\v"),a("	"),a("\xA0"),a("\u1680"),a("\u2000"),a("\u2001"),a("\u2002"),a("\u2003"),a("\u2004"),a("\u2005"),a("\u2006"),a("\u2007"),a("\u2008"),a("\u2009"),a("\u200A"),a("\u2028"),a("\u2029"),a("\u202F"),a("\u205F"),a("\u3000"),a("\uFEFF")];function y(){}return y.prototype.visitChildren=function(f){for(var v in f){var m=f[v];f.hasOwnProperty(v)&&(m.type!==void 0?this.visit(m):Array.isArray(m)&&m.forEach(function(E){this.visit(E)},this))}},y.prototype.visit=function(f){switch(f.type){case"Pattern":this.visitPattern(f);break;case"Flags":this.visitFlags(f);break;case"Disjunction":this.visitDisjunction(f);break;case"Alternative":this.visitAlternative(f);break;case"StartAnchor":this.visitStartAnchor(f);break;case"EndAnchor":this.visitEndAnchor(f);break;case"WordBoundary":this.visitWordBoundary(f);break;case"NonWordBoundary":this.visitNonWordBoundary(f);break;case"Lookahead":this.visitLookahead(f);break;case"NegativeLookahead":this.visitNegativeLookahead(f);break;case"Character":this.visitCharacter(f);break;case"Set":this.visitSet(f);break;case"Group":this.visitGroup(f);break;case"GroupBackReference":this.visitGroupBackReference(f);break;case"Quantifier":this.visitQuantifier(f);break}this.visitChildren(f)},y.prototype.visitPattern=function(f){},y.prototype.visitFlags=function(f){},y.prototype.visitDisjunction=function(f){},y.prototype.visitAlternative=function(f){},y.prototype.visitStartAnchor=function(f){},y.prototype.visitEndAnchor=function(f){},y.prototype.visitWordBoundary=function(f){},y.prototype.visitNonWordBoundary=function(f){},y.prototype.visitLookahead=function(f){},y.prototype.visitNegativeLookahead=function(f){},y.prototype.visitCharacter=function(f){},y.prototype.visitSet=function(f){},y.prototype.visitGroup=function(f){},y.prototype.visitGroupBackReference=function(f){},y.prototype.visitQuantifier=function(f){},{RegExpParser:e,BaseRegExpVisitor:y,VERSION:"0.5.0"}})})(Ir);var $r={},et={};Object.defineProperty(et,"__esModule",{value:!0});et.clearRegExpParserCache=et.getRegExpAst=void 0;var Yu=Ir.exports,yr={},$u=new Yu.RegExpParser;function Xu(t){var e=t.toString();if(yr.hasOwnProperty(e))return yr[e];var r=$u.pattern(e);return yr[e]=r,r}et.getRegExpAst=Xu;function Ju(){yr={}}et.clearRegExpParserCache=Ju;var Ti;function Zu(){return Ti||(Ti=1,function(t){var e=he&&he.__extends||function(){var f=function(v,m){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,g){E.__proto__=g}||function(E,g){for(var T in g)Object.prototype.hasOwnProperty.call(g,T)&&(E[T]=g[T])},f(v,m)};return function(v,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");f(v,m);function E(){this.constructor=v}v.prototype=m===null?Object.create(m):(E.prototype=m.prototype,new E)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.canMatchCharCode=t.firstCharOptimizedIndices=t.getOptimizedStartCodesIndices=t.failedOptimizationPrefixMsg=void 0;var r=Ir.exports,n=N,i=et,a=uo(),o="Complement Sets are not supported for first char optimization";t.failedOptimizationPrefixMsg=`Unable to use "first char" lexer optimizations:
`;function u(f,v){v===void 0&&(v=!1);try{var m=(0,i.getRegExpAst)(f),E=s(m.value,{},m.flags.ignoreCase);return E}catch(T){if(T.message===o)v&&(0,n.PRINT_WARNING)(""+t.failedOptimizationPrefixMsg+("	Unable to optimize: < "+f.toString()+` >
`)+`	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{var g="";v&&(g=`
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),(0,n.PRINT_ERROR)(t.failedOptimizationPrefixMsg+`
`+("	Failed parsing: < "+f.toString()+` >
`)+("	Using the regexp-to-ast library version: "+r.VERSION+`
`)+"	Please open an issue at: https://github.com/bd82/regexp-to-ast/issues"+g)}}return[]}t.getOptimizedStartCodesIndices=u;function s(f,v,m){switch(f.type){case"Disjunction":for(var E=0;E<f.value.length;E++)s(f.value[E],v,m);break;case"Alternative":for(var g=f.value,E=0;E<g.length;E++){var T=g[E];switch(T.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}var L=T;switch(L.type){case"Character":c(L.value,v,m);break;case"Set":if(L.complement===!0)throw Error(o);(0,n.forEach)(L.value,function(I){if(typeof I=="number")c(I,v,m);else{var R=I;if(m===!0)for(var k=R.from;k<=R.to;k++)c(k,v,m);else{for(var k=R.from;k<=R.to&&k<a.minOptimizationVal;k++)c(k,v,m);if(R.to>=a.minOptimizationVal)for(var _=R.from>=a.minOptimizationVal?R.from:a.minOptimizationVal,S=R.to,O=(0,a.charCodeToOptimizedIndex)(_),C=(0,a.charCodeToOptimizedIndex)(S),U=O;U<=C;U++)v[U]=U}}});break;case"Group":s(L.value,v,m);break;default:throw Error("Non Exhaustive Match")}var A=L.quantifier!==void 0&&L.quantifier.atLeast===0;if(L.type==="Group"&&p(L)===!1||L.type!=="Group"&&A===!1)break}break;default:throw Error("non exhaustive match!")}return(0,n.values)(v)}t.firstCharOptimizedIndices=s;function c(f,v,m){var E=(0,a.charCodeToOptimizedIndex)(f);v[E]=E,m===!0&&h(f,v)}function h(f,v){var m=String.fromCharCode(f),E=m.toUpperCase();if(E!==m){var g=(0,a.charCodeToOptimizedIndex)(E.charCodeAt(0));v[g]=g}else{var T=m.toLowerCase();if(T!==m){var g=(0,a.charCodeToOptimizedIndex)(T.charCodeAt(0));v[g]=g}}}function l(f,v){return(0,n.find)(f.value,function(m){if(typeof m=="number")return(0,n.contains)(v,m);var E=m;return(0,n.find)(v,function(g){return E.from<=g&&g<=E.to})!==void 0})}function p(f){return f.quantifier&&f.quantifier.atLeast===0?!0:f.value?(0,n.isArray)(f.value)?(0,n.every)(f.value,p):p(f.value):!1}var d=function(f){e(v,f);function v(m){var E=f.call(this)||this;return E.targetCharCodes=m,E.found=!1,E}return v.prototype.visitChildren=function(m){if(this.found!==!0){switch(m.type){case"Lookahead":this.visitLookahead(m);return;case"NegativeLookahead":this.visitNegativeLookahead(m);return}f.prototype.visitChildren.call(this,m)}},v.prototype.visitCharacter=function(m){(0,n.contains)(this.targetCharCodes,m.value)&&(this.found=!0)},v.prototype.visitSet=function(m){m.complement?l(m,this.targetCharCodes)===void 0&&(this.found=!0):l(m,this.targetCharCodes)!==void 0&&(this.found=!0)},v}(r.BaseRegExpVisitor);function y(f,v){if(v instanceof RegExp){var m=(0,i.getRegExpAst)(v),E=new d(f);return E.visit(m),E.found}else return(0,n.find)(v,function(g){return(0,n.contains)(f,g.charCodeAt(0))})!==void 0}t.canMatchCharCode=y}($r)),$r}var Oi;function uo(){return Oi||(Oi=1,function(t){var e=he&&he.__extends||function(){var M=function(w,F){return M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,j){D.__proto__=j}||function(D,j){for(var Q in j)Object.prototype.hasOwnProperty.call(j,Q)&&(D[Q]=j[Q])},M(w,F)};return function(w,F){if(typeof F!="function"&&F!==null)throw new TypeError("Class extends value "+String(F)+" is not a constructor or null");M(w,F);function D(){this.constructor=w}w.prototype=F===null?Object.create(F):(D.prototype=F.prototype,new D)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.charCodeToOptimizedIndex=t.minOptimizationVal=t.buildLineBreakIssueMessage=t.LineTerminatorOptimizedTester=t.isShortPattern=t.isCustomPattern=t.cloneEmptyGroups=t.performWarningRuntimeChecks=t.performRuntimeChecks=t.addStickyFlag=t.addStartOfInput=t.findUnreachablePatterns=t.findModesThatDoNotExist=t.findInvalidGroupType=t.findDuplicatePatterns=t.findUnsupportedFlags=t.findStartOfInputAnchor=t.findEmptyMatchRegExps=t.findEndOfInputAnchor=t.findInvalidPatterns=t.findMissingPatterns=t.validatePatterns=t.analyzeTokenTypes=t.enableSticky=t.disableSticky=t.SUPPORT_STICKY=t.MODES=t.DEFAULT_MODE=void 0;var r=Ir.exports,n=Pr(),i=N,a=Zu(),o=et,u="PATTERN";t.DEFAULT_MODE="defaultMode",t.MODES="modes",t.SUPPORT_STICKY=typeof new RegExp("(?:)").sticky=="boolean";function s(){t.SUPPORT_STICKY=!1}t.disableSticky=s;function c(){t.SUPPORT_STICKY=!0}t.enableSticky=c;function h(M,w){w=(0,i.defaults)(w,{useSticky:t.SUPPORT_STICKY,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:function(ie,z){return z()}});var F=w.tracer;F("initCharCodeToOptimizedIndexMap",function(){Y()});var D;F("Reject Lexer.NA",function(){D=(0,i.reject)(M,function(ie){return ie[u]===n.Lexer.NA})});var j=!1,Q;F("Transform Patterns",function(){j=!1,Q=(0,i.map)(D,function(ie){var z=ie[u];if((0,i.isRegExp)(z)){var de=z.source;return de.length===1&&de!=="^"&&de!=="$"&&de!=="."&&!z.ignoreCase?de:de.length===2&&de[0]==="\\"&&!(0,i.contains)(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],de[1])?de[1]:w.useSticky?S(z):_(z)}else{if((0,i.isFunction)(z))return j=!0,{exec:z};if((0,i.has)(z,"exec"))return j=!0,z;if(typeof z=="string"){if(z.length===1)return z;var He=z.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),st=new RegExp(He);return w.useSticky?S(st):_(st)}else throw Error("non exhaustive match")}})});var J,ue,re,Pe,at;F("misc mapping",function(){J=(0,i.map)(D,function(ie){return ie.tokenTypeIdx}),ue=(0,i.map)(D,function(ie){var z=ie.GROUP;if(z!==n.Lexer.SKIPPED){if((0,i.isString)(z))return z;if((0,i.isUndefined)(z))return!1;throw Error("non exhaustive match")}}),re=(0,i.map)(D,function(ie){var z=ie.LONGER_ALT;if(z){var de=(0,i.isArray)(z)?(0,i.map)(z,function(He){return(0,i.indexOf)(D,He)}):[(0,i.indexOf)(D,z)];return de}}),Pe=(0,i.map)(D,function(ie){return ie.PUSH_MODE}),at=(0,i.map)(D,function(ie){return(0,i.has)(ie,"POP_MODE")})});var ot;F("Line Terminator Handling",function(){var ie=G(w.lineTerminatorCharacters);ot=(0,i.map)(D,function(z){return!1}),w.positionTracking!=="onlyOffset"&&(ot=(0,i.map)(D,function(z){if((0,i.has)(z,"LINE_BREAKS"))return z.LINE_BREAKS;if(x(z,ie)===!1)return(0,a.canMatchCharCode)(ie,z.PATTERN)}))});var Le,ze,pr,Be;F("Misc Mapping #2",function(){Le=(0,i.map)(D,q),ze=(0,i.map)(Q,B),pr=(0,i.reduce)(D,function(ie,z){var de=z.GROUP;return(0,i.isString)(de)&&de!==n.Lexer.SKIPPED&&(ie[de]=[]),ie},{}),Be=(0,i.map)(Q,function(ie,z){return{pattern:Q[z],longerAlt:re[z],canLineTerminator:ot[z],isCustom:Le[z],short:ze[z],group:ue[z],push:Pe[z],pop:at[z],tokenTypeIdx:J[z],tokenType:D[z]}})});var Ke=!0,Ve=[];return w.safeMode||F("First Char Optimization",function(){Ve=(0,i.reduce)(D,function(ie,z,de){if(typeof z.PATTERN=="string"){var He=z.PATTERN.charCodeAt(0),st=$(He);K(ie,st,Be[de])}else if((0,i.isArray)(z.START_CHARS_HINT)){var Ye;(0,i.forEach)(z.START_CHARS_HINT,function(ye){var ut=typeof ye=="string"?ye.charCodeAt(0):ye,Me=$(ut);Ye!==Me&&(Ye=Me,K(ie,Me,Be[de]))})}else if((0,i.isRegExp)(z.PATTERN))if(z.PATTERN.unicode)Ke=!1,w.ensureOptimizations&&(0,i.PRINT_ERROR)(""+a.failedOptimizationPrefixMsg+("	Unable to analyze < "+z.PATTERN.toString()+` > pattern.
`)+`	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{var yt=(0,a.getOptimizedStartCodesIndices)(z.PATTERN,w.ensureOptimizations);(0,i.isEmpty)(yt)&&(Ke=!1),(0,i.forEach)(yt,function(ye){K(ie,ye,Be[de])})}else w.ensureOptimizations&&(0,i.PRINT_ERROR)(""+a.failedOptimizationPrefixMsg+("	TokenType: <"+z.name+`> is using a custom token pattern without providing <start_chars_hint> parameter.
`)+`	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),Ke=!1;return ie},[])}),F("ArrayPacking",function(){Ve=(0,i.packArray)(Ve)}),{emptyGroups:pr,patternIdxToConfig:Be,charCodeToPatternIdxToConfig:Ve,hasCustom:j,canBeOptimized:Ke}}t.analyzeTokenTypes=h;function l(M,w){var F=[],D=d(M);F=F.concat(D.errors);var j=y(D.valid),Q=j.valid;return F=F.concat(j.errors),F=F.concat(p(Q)),F=F.concat(A(Q)),F=F.concat(b(Q,w)),F=F.concat(I(Q)),F}t.validatePatterns=l;function p(M){var w=[],F=(0,i.filter)(M,function(D){return(0,i.isRegExp)(D[u])});return w=w.concat(v(F)),w=w.concat(g(F)),w=w.concat(T(F)),w=w.concat(L(F)),w=w.concat(m(F)),w}function d(M){var w=(0,i.filter)(M,function(j){return!(0,i.has)(j,u)}),F=(0,i.map)(w,function(j){return{message:"Token Type: ->"+j.name+"<- missing static 'PATTERN' property",type:n.LexerDefinitionErrorType.MISSING_PATTERN,tokenTypes:[j]}}),D=(0,i.difference)(M,w);return{errors:F,valid:D}}t.findMissingPatterns=d;function y(M){var w=(0,i.filter)(M,function(j){var Q=j[u];return!(0,i.isRegExp)(Q)&&!(0,i.isFunction)(Q)&&!(0,i.has)(Q,"exec")&&!(0,i.isString)(Q)}),F=(0,i.map)(w,function(j){return{message:"Token Type: ->"+j.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:n.LexerDefinitionErrorType.INVALID_PATTERN,tokenTypes:[j]}}),D=(0,i.difference)(M,w);return{errors:F,valid:D}}t.findInvalidPatterns=y;var f=/[^\\][\$]/;function v(M){var w=function(j){e(Q,j);function Q(){var J=j!==null&&j.apply(this,arguments)||this;return J.found=!1,J}return Q.prototype.visitEndAnchor=function(J){this.found=!0},Q}(r.BaseRegExpVisitor),F=(0,i.filter)(M,function(j){var Q=j[u];try{var J=(0,o.getRegExpAst)(Q),ue=new w;return ue.visit(J),ue.found}catch{return f.test(Q.source)}}),D=(0,i.map)(F,function(j){return{message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+j.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:n.LexerDefinitionErrorType.EOI_ANCHOR_FOUND,tokenTypes:[j]}});return D}t.findEndOfInputAnchor=v;function m(M){var w=(0,i.filter)(M,function(D){var j=D[u];return j.test("")}),F=(0,i.map)(w,function(D){return{message:"Token Type: ->"+D.name+"<- static 'PATTERN' must not match an empty string",type:n.LexerDefinitionErrorType.EMPTY_MATCH_PATTERN,tokenTypes:[D]}});return F}t.findEmptyMatchRegExps=m;var E=/[^\\[][\^]|^\^/;function g(M){var w=function(j){e(Q,j);function Q(){var J=j!==null&&j.apply(this,arguments)||this;return J.found=!1,J}return Q.prototype.visitStartAnchor=function(J){this.found=!0},Q}(r.BaseRegExpVisitor),F=(0,i.filter)(M,function(j){var Q=j[u];try{var J=(0,o.getRegExpAst)(Q),ue=new w;return ue.visit(J),ue.found}catch{return E.test(Q.source)}}),D=(0,i.map)(F,function(j){return{message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+j.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:n.LexerDefinitionErrorType.SOI_ANCHOR_FOUND,tokenTypes:[j]}});return D}t.findStartOfInputAnchor=g;function T(M){var w=(0,i.filter)(M,function(D){var j=D[u];return j instanceof RegExp&&(j.multiline||j.global)}),F=(0,i.map)(w,function(D){return{message:"Token Type: ->"+D.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:n.LexerDefinitionErrorType.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[D]}});return F}t.findUnsupportedFlags=T;function L(M){var w=[],F=(0,i.map)(M,function(Q){return(0,i.reduce)(M,function(J,ue){return Q.PATTERN.source===ue.PATTERN.source&&!(0,i.contains)(w,ue)&&ue.PATTERN!==n.Lexer.NA&&(w.push(ue),J.push(ue)),J},[])});F=(0,i.compact)(F);var D=(0,i.filter)(F,function(Q){return Q.length>1}),j=(0,i.map)(D,function(Q){var J=(0,i.map)(Q,function(re){return re.name}),ue=(0,i.first)(Q).PATTERN;return{message:"The same RegExp pattern ->"+ue+"<-"+("has been used in all of the following Token Types: "+J.join(", ")+" <-"),type:n.LexerDefinitionErrorType.DUPLICATE_PATTERNS_FOUND,tokenTypes:Q}});return j}t.findDuplicatePatterns=L;function A(M){var w=(0,i.filter)(M,function(D){if(!(0,i.has)(D,"GROUP"))return!1;var j=D.GROUP;return j!==n.Lexer.SKIPPED&&j!==n.Lexer.NA&&!(0,i.isString)(j)}),F=(0,i.map)(w,function(D){return{message:"Token Type: ->"+D.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:n.LexerDefinitionErrorType.INVALID_GROUP_TYPE_FOUND,tokenTypes:[D]}});return F}t.findInvalidGroupType=A;function b(M,w){var F=(0,i.filter)(M,function(j){return j.PUSH_MODE!==void 0&&!(0,i.contains)(w,j.PUSH_MODE)}),D=(0,i.map)(F,function(j){var Q="Token Type: ->"+j.name+"<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->"+j.PUSH_MODE+"<-which does not exist";return{message:Q,type:n.LexerDefinitionErrorType.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[j]}});return D}t.findModesThatDoNotExist=b;function I(M){var w=[],F=(0,i.reduce)(M,function(D,j,Q){var J=j.PATTERN;return J===n.Lexer.NA||((0,i.isString)(J)?D.push({str:J,idx:Q,tokenType:j}):(0,i.isRegExp)(J)&&k(J)&&D.push({str:J.source,idx:Q,tokenType:j})),D},[]);return(0,i.forEach)(M,function(D,j){(0,i.forEach)(F,function(Q){var J=Q.str,ue=Q.idx,re=Q.tokenType;if(j<ue&&R(J,D.PATTERN)){var Pe="Token: ->"+re.name+`<- can never be matched.
`+("Because it appears AFTER the Token Type ->"+D.name+"<-")+`in the lexer's definition.
See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;w.push({message:Pe,type:n.LexerDefinitionErrorType.UNREACHABLE_PATTERN,tokenTypes:[D,re]})}})}),w}t.findUnreachablePatterns=I;function R(M,w){if((0,i.isRegExp)(w)){var F=w.exec(M);return F!==null&&F.index===0}else{if((0,i.isFunction)(w))return w(M,0,[],{});if((0,i.has)(w,"exec"))return w.exec(M,0,[],{});if(typeof w=="string")return w===M;throw Error("non exhaustive match")}}function k(M){var w=[".","\\","[","]","|","^","$","(",")","?","*","+","{"];return(0,i.find)(w,function(F){return M.source.indexOf(F)!==-1})===void 0}function _(M){var w=M.ignoreCase?"i":"";return new RegExp("^(?:"+M.source+")",w)}t.addStartOfInput=_;function S(M){var w=M.ignoreCase?"iy":"y";return new RegExp(""+M.source,w)}t.addStickyFlag=S;function O(M,w,F){var D=[];return(0,i.has)(M,t.DEFAULT_MODE)||D.push({message:"A MultiMode Lexer cannot be initialized without a <"+t.DEFAULT_MODE+`> property in its definition
`,type:n.LexerDefinitionErrorType.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),(0,i.has)(M,t.MODES)||D.push({message:"A MultiMode Lexer cannot be initialized without a <"+t.MODES+`> property in its definition
`,type:n.LexerDefinitionErrorType.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),(0,i.has)(M,t.MODES)&&(0,i.has)(M,t.DEFAULT_MODE)&&!(0,i.has)(M.modes,M.defaultMode)&&D.push({message:"A MultiMode Lexer cannot be initialized with a "+t.DEFAULT_MODE+": <"+M.defaultMode+`>which does not exist
`,type:n.LexerDefinitionErrorType.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),(0,i.has)(M,t.MODES)&&(0,i.forEach)(M.modes,function(j,Q){(0,i.forEach)(j,function(J,ue){(0,i.isUndefined)(J)&&D.push({message:"A Lexer cannot be initialized using an undefined Token Type. Mode:"+("<"+Q+"> at index: <"+ue+`>
`),type:n.LexerDefinitionErrorType.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED})})}),D}t.performRuntimeChecks=O;function C(M,w,F){var D=[],j=!1,Q=(0,i.compact)((0,i.flatten)((0,i.mapValues)(M.modes,function(re){return re}))),J=(0,i.reject)(Q,function(re){return re[u]===n.Lexer.NA}),ue=G(F);return w&&(0,i.forEach)(J,function(re){var Pe=x(re,ue);if(Pe!==!1){var at=W(re,Pe),ot={message:at,type:Pe.issue,tokenType:re};D.push(ot)}else(0,i.has)(re,"LINE_BREAKS")?re.LINE_BREAKS===!0&&(j=!0):(0,a.canMatchCharCode)(ue,re.PATTERN)&&(j=!0)}),w&&!j&&D.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS 
	for details.`,type:n.LexerDefinitionErrorType.NO_LINE_BREAKS_FLAGS}),D}t.performWarningRuntimeChecks=C;function U(M){var w={},F=(0,i.keys)(M);return(0,i.forEach)(F,function(D){var j=M[D];if((0,i.isArray)(j))w[D]=[];else throw Error("non exhaustive match")}),w}t.cloneEmptyGroups=U;function q(M){var w=M.PATTERN;if((0,i.isRegExp)(w))return!1;if((0,i.isFunction)(w))return!0;if((0,i.has)(w,"exec"))return!0;if((0,i.isString)(w))return!1;throw Error("non exhaustive match")}t.isCustomPattern=q;function B(M){return(0,i.isString)(M)&&M.length===1?M.charCodeAt(0):!1}t.isShortPattern=B,t.LineTerminatorOptimizedTester={test:function(M){for(var w=M.length,F=this.lastIndex;F<w;F++){var D=M.charCodeAt(F);if(D===10)return this.lastIndex=F+1,!0;if(D===13)return M.charCodeAt(F+1)===10?this.lastIndex=F+2:this.lastIndex=F+1,!0}return!1},lastIndex:0};function x(M,w){if((0,i.has)(M,"LINE_BREAKS"))return!1;if((0,i.isRegExp)(M.PATTERN)){try{(0,a.canMatchCharCode)(w,M.PATTERN)}catch(F){return{issue:n.LexerDefinitionErrorType.IDENTIFY_TERMINATOR,errMsg:F.message}}return!1}else{if((0,i.isString)(M.PATTERN))return!1;if(q(M))return{issue:n.LexerDefinitionErrorType.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}function W(M,w){if(w.issue===n.LexerDefinitionErrorType.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
`+("	The problem is in the <"+M.name+`> Token Type
`)+("	 Root cause: "+w.errMsg+`.
`)+"	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR";if(w.issue===n.LexerDefinitionErrorType.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
`+("	The problem is in the <"+M.name+`> Token Type
`)+"	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK";throw Error("non exhaustive match")}t.buildLineBreakIssueMessage=W;function G(M){var w=(0,i.map)(M,function(F){return(0,i.isString)(F)&&F.length>0?F.charCodeAt(0):F});return w}function K(M,w,F){M[w]===void 0?M[w]=[F]:M[w].push(F)}t.minOptimizationVal=256;var H=[];function $(M){return M<t.minOptimizationVal?M:H[M]}t.charCodeToOptimizedIndex=$;function Y(){if((0,i.isEmpty)(H)){H=new Array(65536);for(var M=0;M<65536;M++)H[M]=M>255?255+~~(M/255):M}}}(Yr)),Yr}var Ct={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isTokenType=t.hasExtendingTokensTypesMapProperty=t.hasExtendingTokensTypesProperty=t.hasCategoriesProperty=t.hasShortKeyProperty=t.singleAssignCategoriesToksMap=t.assignCategoriesMapProp=t.assignCategoriesTokensProp=t.assignTokenDefaultProps=t.expandCategories=t.augmentTokenTypes=t.tokenIdxToClass=t.tokenShortNameIdx=t.tokenStructuredMatcherNoCategories=t.tokenStructuredMatcher=void 0;var e=N;function r(f,v){var m=f.tokenTypeIdx;return m===v.tokenTypeIdx?!0:v.isParent===!0&&v.categoryMatchesMap[m]===!0}t.tokenStructuredMatcher=r;function n(f,v){return f.tokenTypeIdx===v.tokenTypeIdx}t.tokenStructuredMatcherNoCategories=n,t.tokenShortNameIdx=1,t.tokenIdxToClass={};function i(f){var v=a(f);o(v),s(v),u(v),(0,e.forEach)(v,function(m){m.isParent=m.categoryMatches.length>0})}t.augmentTokenTypes=i;function a(f){for(var v=(0,e.cloneArr)(f),m=f,E=!0;E;){m=(0,e.compact)((0,e.flatten)((0,e.map)(m,function(T){return T.CATEGORIES})));var g=(0,e.difference)(m,v);v=v.concat(g),(0,e.isEmpty)(g)?E=!1:m=g}return v}t.expandCategories=a;function o(f){(0,e.forEach)(f,function(v){h(v)||(t.tokenIdxToClass[t.tokenShortNameIdx]=v,v.tokenTypeIdx=t.tokenShortNameIdx++),l(v)&&!(0,e.isArray)(v.CATEGORIES)&&(v.CATEGORIES=[v.CATEGORIES]),l(v)||(v.CATEGORIES=[]),p(v)||(v.categoryMatches=[]),d(v)||(v.categoryMatchesMap={})})}t.assignTokenDefaultProps=o;function u(f){(0,e.forEach)(f,function(v){v.categoryMatches=[],(0,e.forEach)(v.categoryMatchesMap,function(m,E){v.categoryMatches.push(t.tokenIdxToClass[E].tokenTypeIdx)})})}t.assignCategoriesTokensProp=u;function s(f){(0,e.forEach)(f,function(v){c([],v)})}t.assignCategoriesMapProp=s;function c(f,v){(0,e.forEach)(f,function(m){v.categoryMatchesMap[m.tokenTypeIdx]=!0}),(0,e.forEach)(v.CATEGORIES,function(m){var E=f.concat(v);(0,e.contains)(E,m)||c(E,m)})}t.singleAssignCategoriesToksMap=c;function h(f){return(0,e.has)(f,"tokenTypeIdx")}t.hasShortKeyProperty=h;function l(f){return(0,e.has)(f,"CATEGORIES")}t.hasCategoriesProperty=l;function p(f){return(0,e.has)(f,"categoryMatches")}t.hasExtendingTokensTypesProperty=p;function d(f){return(0,e.has)(f,"categoryMatchesMap")}t.hasExtendingTokensTypesMapProperty=d;function y(f){return(0,e.has)(f,"tokenTypeIdx")}t.isTokenType=y})(Ct);var ir={};Object.defineProperty(ir,"__esModule",{value:!0});ir.defaultLexerErrorProvider=void 0;ir.defaultLexerErrorProvider={buildUnableToPopLexerModeMessage:function(t){return"Unable to pop Lexer Mode after encountering Token ->"+t.image+"<- The Mode Stack is empty"},buildUnexpectedCharactersMessage:function(t,e,r,n,i){return"unexpected character: ->"+t.charAt(e)+"<- at offset: "+e+","+(" skipped "+r+" characters.")}};var Ai;function Pr(){return Ai||(Ai=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Lexer=t.LexerDefinitionErrorType=void 0;var e=uo(),r=N,n=Ct,i=ir,a=et;(function(s){s[s.MISSING_PATTERN=0]="MISSING_PATTERN",s[s.INVALID_PATTERN=1]="INVALID_PATTERN",s[s.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",s[s.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",s[s.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",s[s.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",s[s.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",s[s.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",s[s.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",s[s.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",s[s.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",s[s.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",s[s.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",s[s.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",s[s.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",s[s.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",s[s.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK"})(t.LexerDefinitionErrorType||(t.LexerDefinitionErrorType={}));var o={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:i.defaultLexerErrorProvider,traceInitPerf:!1,skipValidations:!1};Object.freeze(o);var u=function(){function s(c,h){var l=this;if(h===void 0&&(h=o),this.lexerDefinition=c,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.config=void 0,this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},typeof h=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=(0,r.merge)(o,h);var p=this.config.traceInitPerf;p===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof p=="number"&&(this.traceInitMaxIdent=p,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",function(){var d,y=!0;l.TRACE_INIT("Lexer Config handling",function(){if(l.config.lineTerminatorsPattern===o.lineTerminatorsPattern)l.config.lineTerminatorsPattern=e.LineTerminatorOptimizedTester;else if(l.config.lineTerminatorCharacters===o.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(h.safeMode&&h.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');l.trackStartLines=/full|onlyStart/i.test(l.config.positionTracking),l.trackEndLines=/full/i.test(l.config.positionTracking),(0,r.isArray)(c)?(d={modes:{}},d.modes[e.DEFAULT_MODE]=(0,r.cloneArr)(c),d[e.DEFAULT_MODE]=e.DEFAULT_MODE):(y=!1,d=(0,r.cloneObj)(c))}),l.config.skipValidations===!1&&(l.TRACE_INIT("performRuntimeChecks",function(){l.lexerDefinitionErrors=l.lexerDefinitionErrors.concat((0,e.performRuntimeChecks)(d,l.trackStartLines,l.config.lineTerminatorCharacters))}),l.TRACE_INIT("performWarningRuntimeChecks",function(){l.lexerDefinitionWarning=l.lexerDefinitionWarning.concat((0,e.performWarningRuntimeChecks)(d,l.trackStartLines,l.config.lineTerminatorCharacters))})),d.modes=d.modes?d.modes:{},(0,r.forEach)(d.modes,function(E,g){d.modes[g]=(0,r.reject)(E,function(T){return(0,r.isUndefined)(T)})});var f=(0,r.keys)(d.modes);if((0,r.forEach)(d.modes,function(E,g){l.TRACE_INIT("Mode: <"+g+"> processing",function(){if(l.modes.push(g),l.config.skipValidations===!1&&l.TRACE_INIT("validatePatterns",function(){l.lexerDefinitionErrors=l.lexerDefinitionErrors.concat((0,e.validatePatterns)(E,f))}),(0,r.isEmpty)(l.lexerDefinitionErrors)){(0,n.augmentTokenTypes)(E);var T;l.TRACE_INIT("analyzeTokenTypes",function(){T=(0,e.analyzeTokenTypes)(E,{lineTerminatorCharacters:l.config.lineTerminatorCharacters,positionTracking:h.positionTracking,ensureOptimizations:h.ensureOptimizations,safeMode:h.safeMode,tracer:l.TRACE_INIT.bind(l)})}),l.patternIdxToConfig[g]=T.patternIdxToConfig,l.charCodeToPatternIdxToConfig[g]=T.charCodeToPatternIdxToConfig,l.emptyGroups=(0,r.merge)(l.emptyGroups,T.emptyGroups),l.hasCustom=T.hasCustom||l.hasCustom,l.canModeBeOptimized[g]=T.canBeOptimized}})}),l.defaultMode=d.defaultMode,!(0,r.isEmpty)(l.lexerDefinitionErrors)&&!l.config.deferDefinitionErrorsHandling){var v=(0,r.map)(l.lexerDefinitionErrors,function(E){return E.message}),m=v.join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+m)}(0,r.forEach)(l.lexerDefinitionWarning,function(E){(0,r.PRINT_WARNING)(E.message)}),l.TRACE_INIT("Choosing sub-methods implementations",function(){if(e.SUPPORT_STICKY?(l.chopInput=r.IDENTITY,l.match=l.matchWithTest):(l.updateLastIndex=r.NOOP,l.match=l.matchWithExec),y&&(l.handleModes=r.NOOP),l.trackStartLines===!1&&(l.computeNewColumn=r.IDENTITY),l.trackEndLines===!1&&(l.updateTokenEndLineColumnLocation=r.NOOP),/full/i.test(l.config.positionTracking))l.createTokenInstance=l.createFullToken;else if(/onlyStart/i.test(l.config.positionTracking))l.createTokenInstance=l.createStartOnlyToken;else if(/onlyOffset/i.test(l.config.positionTracking))l.createTokenInstance=l.createOffsetOnlyToken;else throw Error('Invalid <positionTracking> config option: "'+l.config.positionTracking+'"');l.hasCustom?(l.addToken=l.addTokenUsingPush,l.handlePayload=l.handlePayloadWithCustom):(l.addToken=l.addTokenUsingMemberAccess,l.handlePayload=l.handlePayloadNoCustom)}),l.TRACE_INIT("Failed Optimization Warnings",function(){var E=(0,r.reduce)(l.canModeBeOptimized,function(g,T,L){return T===!1&&g.push(L),g},[]);if(h.ensureOptimizations&&!(0,r.isEmpty)(E))throw Error("Lexer Modes: < "+E.join(", ")+` > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)}),l.TRACE_INIT("clearRegExpParserCache",function(){(0,a.clearRegExpParserCache)()}),l.TRACE_INIT("toFastProperties",function(){(0,r.toFastProperties)(l)})})}return s.prototype.tokenize=function(c,h){if(h===void 0&&(h=this.defaultMode),!(0,r.isEmpty)(this.lexerDefinitionErrors)){var l=(0,r.map)(this.lexerDefinitionErrors,function(y){return y.message}),p=l.join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+p)}var d=this.tokenizeInternal(c,h);return d},s.prototype.tokenizeInternal=function(c,h){var l=this,p,d,y,f,v,m,E,g,T,L,A,b,I,R,k,_=c,S=_.length,O=0,C=0,U=this.hasCustom?0:Math.floor(c.length/10),q=new Array(U),B=[],x=this.trackStartLines?1:void 0,W=this.trackStartLines?1:void 0,G=(0,e.cloneEmptyGroups)(this.emptyGroups),K=this.trackStartLines,H=this.config.lineTerminatorsPattern,$=0,Y=[],M=[],w=[],F=[];Object.freeze(F);var D=void 0;function j(){return Y}function Q(ye){var ut=(0,e.charCodeToOptimizedIndex)(ye),Me=M[ut];return Me===void 0?F:Me}var J=function(ye){if(w.length===1&&ye.tokenType.PUSH_MODE===void 0){var ut=l.config.errorMessageProvider.buildUnableToPopLexerModeMessage(ye);B.push({offset:ye.startOffset,line:ye.startLine!==void 0?ye.startLine:void 0,column:ye.startColumn!==void 0?ye.startColumn:void 0,length:ye.image.length,message:ut})}else{w.pop();var Me=(0,r.last)(w);Y=l.patternIdxToConfig[Me],M=l.charCodeToPatternIdxToConfig[Me],$=Y.length;var $s=l.canModeBeOptimized[Me]&&l.config.safeMode===!1;M&&$s?D=Q:D=j}};function ue(ye){w.push(ye),M=this.charCodeToPatternIdxToConfig[ye],Y=this.patternIdxToConfig[ye],$=Y.length,$=Y.length;var ut=this.canModeBeOptimized[ye]&&this.config.safeMode===!1;M&&ut?D=Q:D=j}ue.call(this,h);for(var re;O<S;){m=null;var Pe=_.charCodeAt(O),at=D(Pe),ot=at.length;for(p=0;p<ot;p++){re=at[p];var Le=re.pattern;E=null;var ze=re.short;if(ze!==!1?Pe===ze&&(m=Le):re.isCustom===!0?(k=Le.exec(_,O,q,G),k!==null?(m=k[0],k.payload!==void 0&&(E=k.payload)):m=null):(this.updateLastIndex(Le,O),m=this.match(Le,c,O)),m!==null){if(v=re.longerAlt,v!==void 0){var pr=v.length;for(y=0;y<pr;y++){var Be=Y[v[y]],Ke=Be.pattern;if(g=null,Be.isCustom===!0?(k=Ke.exec(_,O,q,G),k!==null?(f=k[0],k.payload!==void 0&&(g=k.payload)):f=null):(this.updateLastIndex(Ke,O),f=this.match(Ke,c,O)),f&&f.length>m.length){m=f,E=g,re=Be;break}}}break}}if(m!==null){if(T=m.length,L=re.group,L!==void 0&&(A=re.tokenTypeIdx,b=this.createTokenInstance(m,O,A,re.tokenType,x,W,T),this.handlePayload(b,E),L===!1?C=this.addToken(q,C,b):G[L].push(b)),c=this.chopInput(c,T),O=O+T,W=this.computeNewColumn(W,T),K===!0&&re.canLineTerminator===!0){var Ve=0,ie=void 0,z=void 0;H.lastIndex=0;do ie=H.test(m),ie===!0&&(z=H.lastIndex-1,Ve++);while(ie===!0);Ve!==0&&(x=x+Ve,W=T-z,this.updateTokenEndLineColumnLocation(b,L,z,Ve,x,W,T))}this.handleModes(re,J,ue,b)}else{for(var de=O,He=x,st=W,Ye=!1;!Ye&&O<S;)for(_.charCodeAt(O),c=this.chopInput(c,1),O++,d=0;d<$;d++){var yt=Y[d],Le=yt.pattern,ze=yt.short;if(ze!==!1?_.charCodeAt(O)===ze&&(Ye=!0):yt.isCustom===!0?Ye=Le.exec(_,O,q,G)!==null:(this.updateLastIndex(Le,O),Ye=Le.exec(c)!==null),Ye===!0)break}I=O-de,R=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(_,de,I,He,st),B.push({offset:de,line:He,column:st,length:I,message:R})}}return this.hasCustom||(q.length=C),{tokens:q,groups:G,errors:B}},s.prototype.handleModes=function(c,h,l,p){if(c.pop===!0){var d=c.push;h(p),d!==void 0&&l.call(this,d)}else c.push!==void 0&&l.call(this,c.push)},s.prototype.chopInput=function(c,h){return c.substring(h)},s.prototype.updateLastIndex=function(c,h){c.lastIndex=h},s.prototype.updateTokenEndLineColumnLocation=function(c,h,l,p,d,y,f){var v,m;h!==void 0&&(v=l===f-1,m=v?-1:0,p===1&&v===!0||(c.endLine=d+m,c.endColumn=y-1+-m))},s.prototype.computeNewColumn=function(c,h){return c+h},s.prototype.createTokenInstance=function(){return null},s.prototype.createOffsetOnlyToken=function(c,h,l,p){return{image:c,startOffset:h,tokenTypeIdx:l,tokenType:p}},s.prototype.createStartOnlyToken=function(c,h,l,p,d,y){return{image:c,startOffset:h,startLine:d,startColumn:y,tokenTypeIdx:l,tokenType:p}},s.prototype.createFullToken=function(c,h,l,p,d,y,f){return{image:c,startOffset:h,endOffset:h+f-1,startLine:d,endLine:d,startColumn:y,endColumn:y+f-1,tokenTypeIdx:l,tokenType:p}},s.prototype.addToken=function(c,h,l){return 666},s.prototype.addTokenUsingPush=function(c,h,l){return c.push(l),h},s.prototype.addTokenUsingMemberAccess=function(c,h,l){return c[h]=l,h++,h},s.prototype.handlePayload=function(c,h){},s.prototype.handlePayloadNoCustom=function(c,h){},s.prototype.handlePayloadWithCustom=function(c,h){h!==null&&(c.payload=h)},s.prototype.match=function(c,h,l){return null},s.prototype.matchWithTest=function(c,h,l){var p=c.test(h);return p===!0?h.substring(l,c.lastIndex):null},s.prototype.matchWithExec=function(c,h){var l=c.exec(h);return l!==null?l[0]:l},s.prototype.TRACE_INIT=function(c,h){if(this.traceInitPerf===!0){this.traceInitIndent++;var l=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(l+"--> <"+c+">");var p=(0,r.timer)(h),d=p.time,y=p.value,f=d>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&f(l+"<-- <"+c+"> time: "+d+"ms"),this.traceInitIndent--,y}else return h()},s.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.",s.NA=/NOT_APPLICABLE/,s}();t.Lexer=u}(Hr)),Hr}(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.tokenMatcher=t.createTokenInstance=t.EOF=t.createToken=t.hasTokenLabel=t.tokenName=t.tokenLabel=void 0;var e=N,r=Pr(),n=Ct;function i(T){return o(T)?T.LABEL:T.name}t.tokenLabel=i;function a(T){return T.name}t.tokenName=a;function o(T){return(0,e.isString)(T.LABEL)&&T.LABEL!==""}t.hasTokenLabel=o;var u="parent",s="categories",c="label",h="group",l="push_mode",p="pop_mode",d="longer_alt",y="line_breaks",f="start_chars_hint";function v(T){return m(T)}t.createToken=v;function m(T){var L=T.pattern,A={};if(A.name=T.name,(0,e.isUndefined)(L)||(A.PATTERN=L),(0,e.has)(T,u))throw`The parent property is no longer supported.
See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.`;return(0,e.has)(T,s)&&(A.CATEGORIES=T[s]),(0,n.augmentTokenTypes)([A]),(0,e.has)(T,c)&&(A.LABEL=T[c]),(0,e.has)(T,h)&&(A.GROUP=T[h]),(0,e.has)(T,p)&&(A.POP_MODE=T[p]),(0,e.has)(T,l)&&(A.PUSH_MODE=T[l]),(0,e.has)(T,d)&&(A.LONGER_ALT=T[d]),(0,e.has)(T,y)&&(A.LINE_BREAKS=T[y]),(0,e.has)(T,f)&&(A.START_CHARS_HINT=T[f]),A}t.EOF=v({name:"EOF",pattern:r.Lexer.NA}),(0,n.augmentTokenTypes)([t.EOF]);function E(T,L,A,b,I,R,k,_){return{image:L,startOffset:A,endOffset:b,startLine:I,endLine:R,startColumn:k,endColumn:_,tokenTypeIdx:T.tokenTypeIdx,tokenType:T}}t.createTokenInstance=E;function g(T,L){return(0,n.tokenStructuredMatcher)(T,L)}t.tokenMatcher=g})(nt);var Qe=he&&he.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(X,"__esModule",{value:!0});X.serializeProduction=X.serializeGrammar=X.Terminal=X.Alternation=X.RepetitionWithSeparator=X.Repetition=X.RepetitionMandatoryWithSeparator=X.RepetitionMandatory=X.Option=X.Alternative=X.Rule=X.NonTerminal=X.AbstractProduction=void 0;var le=N,ec=nt,je=function(){function t(e){this._definition=e}return Object.defineProperty(t.prototype,"definition",{get:function(){return this._definition},set:function(e){this._definition=e},enumerable:!1,configurable:!0}),t.prototype.accept=function(e){e.visit(this),(0,le.forEach)(this.definition,function(r){r.accept(e)})},t}();X.AbstractProduction=je;var co=function(t){Qe(e,t);function e(r){var n=t.call(this,[])||this;return n.idx=1,(0,le.assign)(n,(0,le.pick)(r,function(i){return i!==void 0})),n}return Object.defineProperty(e.prototype,"definition",{get:function(){return this.referencedRule!==void 0?this.referencedRule.definition:[]},set:function(r){},enumerable:!1,configurable:!0}),e.prototype.accept=function(r){r.visit(this)},e}(je);X.NonTerminal=co;var lo=function(t){Qe(e,t);function e(r){var n=t.call(this,r.definition)||this;return n.orgText="",(0,le.assign)(n,(0,le.pick)(r,function(i){return i!==void 0})),n}return e}(je);X.Rule=lo;var fo=function(t){Qe(e,t);function e(r){var n=t.call(this,r.definition)||this;return n.ignoreAmbiguities=!1,(0,le.assign)(n,(0,le.pick)(r,function(i){return i!==void 0})),n}return e}(je);X.Alternative=fo;var ho=function(t){Qe(e,t);function e(r){var n=t.call(this,r.definition)||this;return n.idx=1,(0,le.assign)(n,(0,le.pick)(r,function(i){return i!==void 0})),n}return e}(je);X.Option=ho;var po=function(t){Qe(e,t);function e(r){var n=t.call(this,r.definition)||this;return n.idx=1,(0,le.assign)(n,(0,le.pick)(r,function(i){return i!==void 0})),n}return e}(je);X.RepetitionMandatory=po;var vo=function(t){Qe(e,t);function e(r){var n=t.call(this,r.definition)||this;return n.idx=1,(0,le.assign)(n,(0,le.pick)(r,function(i){return i!==void 0})),n}return e}(je);X.RepetitionMandatoryWithSeparator=vo;var mo=function(t){Qe(e,t);function e(r){var n=t.call(this,r.definition)||this;return n.idx=1,(0,le.assign)(n,(0,le.pick)(r,function(i){return i!==void 0})),n}return e}(je);X.Repetition=mo;var yo=function(t){Qe(e,t);function e(r){var n=t.call(this,r.definition)||this;return n.idx=1,(0,le.assign)(n,(0,le.pick)(r,function(i){return i!==void 0})),n}return e}(je);X.RepetitionWithSeparator=yo;var go=function(t){Qe(e,t);function e(r){var n=t.call(this,r.definition)||this;return n.idx=1,n.ignoreAmbiguities=!1,n.hasPredicates=!1,(0,le.assign)(n,(0,le.pick)(r,function(i){return i!==void 0})),n}return Object.defineProperty(e.prototype,"definition",{get:function(){return this._definition},set:function(r){this._definition=r},enumerable:!1,configurable:!0}),e}(je);X.Alternation=go;var gr=function(){function t(e){this.idx=1,(0,le.assign)(this,(0,le.pick)(e,function(r){return r!==void 0}))}return t.prototype.accept=function(e){e.visit(this)},t}();X.Terminal=gr;function tc(t){return(0,le.map)(t,Kt)}X.serializeGrammar=tc;function Kt(t){function e(a){return(0,le.map)(a,Kt)}if(t instanceof co){var r={type:"NonTerminal",name:t.nonTerminalName,idx:t.idx};return(0,le.isString)(t.label)&&(r.label=t.label),r}else{if(t instanceof fo)return{type:"Alternative",definition:e(t.definition)};if(t instanceof ho)return{type:"Option",idx:t.idx,definition:e(t.definition)};if(t instanceof po)return{type:"RepetitionMandatory",idx:t.idx,definition:e(t.definition)};if(t instanceof vo)return{type:"RepetitionMandatoryWithSeparator",idx:t.idx,separator:Kt(new gr({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof yo)return{type:"RepetitionWithSeparator",idx:t.idx,separator:Kt(new gr({terminalType:t.separator})),definition:e(t.definition)};if(t instanceof mo)return{type:"Repetition",idx:t.idx,definition:e(t.definition)};if(t instanceof go)return{type:"Alternation",idx:t.idx,definition:e(t.definition)};if(t instanceof gr){var n={type:"Terminal",name:t.terminalType.name,label:(0,ec.tokenLabel)(t.terminalType),idx:t.idx};(0,le.isString)(t.label)&&(n.terminalLabel=t.label);var i=t.terminalType.PATTERN;return t.terminalType.PATTERN&&(n.pattern=(0,le.isRegExp)(i)?i.source:i),n}else{if(t instanceof lo)return{type:"Rule",name:t.name,orgText:t.orgText,definition:e(t.definition)};throw Error("non exhaustive match")}}}X.serializeProduction=Kt;Object.defineProperty(Lt,"__esModule",{value:!0});Lt.RestWalker=void 0;var Xr=N,Se=X,rc=function(){function t(){}return t.prototype.walk=function(e,r){var n=this;r===void 0&&(r=[]),(0,Xr.forEach)(e.definition,function(i,a){var o=(0,Xr.drop)(e.definition,a+1);if(i instanceof Se.NonTerminal)n.walkProdRef(i,o,r);else if(i instanceof Se.Terminal)n.walkTerminal(i,o,r);else if(i instanceof Se.Alternative)n.walkFlat(i,o,r);else if(i instanceof Se.Option)n.walkOption(i,o,r);else if(i instanceof Se.RepetitionMandatory)n.walkAtLeastOne(i,o,r);else if(i instanceof Se.RepetitionMandatoryWithSeparator)n.walkAtLeastOneSep(i,o,r);else if(i instanceof Se.RepetitionWithSeparator)n.walkManySep(i,o,r);else if(i instanceof Se.Repetition)n.walkMany(i,o,r);else if(i instanceof Se.Alternation)n.walkOr(i,o,r);else throw Error("non exhaustive match")})},t.prototype.walkTerminal=function(e,r,n){},t.prototype.walkProdRef=function(e,r,n){},t.prototype.walkFlat=function(e,r,n){var i=r.concat(n);this.walk(e,i)},t.prototype.walkOption=function(e,r,n){var i=r.concat(n);this.walk(e,i)},t.prototype.walkAtLeastOne=function(e,r,n){var i=[new Se.Option({definition:e.definition})].concat(r,n);this.walk(e,i)},t.prototype.walkAtLeastOneSep=function(e,r,n){var i=bi(e,r,n);this.walk(e,i)},t.prototype.walkMany=function(e,r,n){var i=[new Se.Option({definition:e.definition})].concat(r,n);this.walk(e,i)},t.prototype.walkManySep=function(e,r,n){var i=bi(e,r,n);this.walk(e,i)},t.prototype.walkOr=function(e,r,n){var i=this,a=r.concat(n);(0,Xr.forEach)(e.definition,function(o){var u=new Se.Alternative({definition:[o]});i.walk(u,a)})},t}();Lt.RestWalker=rc;function bi(t,e,r){var n=[new Se.Option({definition:[new Se.Terminal({terminalType:t.separator})].concat(t.definition)})],i=n.concat(e,r);return i}var Ce={},be={},it={};Object.defineProperty(it,"__esModule",{value:!0});it.GAstVisitor=void 0;var Fe=X,nc=function(){function t(){}return t.prototype.visit=function(e){var r=e;switch(r.constructor){case Fe.NonTerminal:return this.visitNonTerminal(r);case Fe.Alternative:return this.visitAlternative(r);case Fe.Option:return this.visitOption(r);case Fe.RepetitionMandatory:return this.visitRepetitionMandatory(r);case Fe.RepetitionMandatoryWithSeparator:return this.visitRepetitionMandatoryWithSeparator(r);case Fe.RepetitionWithSeparator:return this.visitRepetitionWithSeparator(r);case Fe.Repetition:return this.visitRepetition(r);case Fe.Alternation:return this.visitAlternation(r);case Fe.Terminal:return this.visitTerminal(r);case Fe.Rule:return this.visitRule(r);default:throw Error("non exhaustive match")}},t.prototype.visitNonTerminal=function(e){},t.prototype.visitAlternative=function(e){},t.prototype.visitOption=function(e){},t.prototype.visitRepetition=function(e){},t.prototype.visitRepetitionMandatory=function(e){},t.prototype.visitRepetitionMandatoryWithSeparator=function(e){},t.prototype.visitRepetitionWithSeparator=function(e){},t.prototype.visitAlternation=function(e){},t.prototype.visitTerminal=function(e){},t.prototype.visitRule=function(e){},t}();it.GAstVisitor=nc;var ic=he&&he.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(be,"__esModule",{value:!0});be.collectMethods=be.DslMethodsCollectorVisitor=be.getProductionDslName=be.isBranchingProd=be.isOptionalProd=be.isSequenceProd=void 0;var Ht=N,pe=X,ac=it;function oc(t){return t instanceof pe.Alternative||t instanceof pe.Option||t instanceof pe.Repetition||t instanceof pe.RepetitionMandatory||t instanceof pe.RepetitionMandatoryWithSeparator||t instanceof pe.RepetitionWithSeparator||t instanceof pe.Terminal||t instanceof pe.Rule}be.isSequenceProd=oc;function vn(t,e){e===void 0&&(e=[]);var r=t instanceof pe.Option||t instanceof pe.Repetition||t instanceof pe.RepetitionWithSeparator;return r?!0:t instanceof pe.Alternation?(0,Ht.some)(t.definition,function(n){return vn(n,e)}):t instanceof pe.NonTerminal&&(0,Ht.contains)(e,t)?!1:t instanceof pe.AbstractProduction?(t instanceof pe.NonTerminal&&e.push(t),(0,Ht.every)(t.definition,function(n){return vn(n,e)})):!1}be.isOptionalProd=vn;function sc(t){return t instanceof pe.Alternation}be.isBranchingProd=sc;function uc(t){if(t instanceof pe.NonTerminal)return"SUBRULE";if(t instanceof pe.Option)return"OPTION";if(t instanceof pe.Alternation)return"OR";if(t instanceof pe.RepetitionMandatory)return"AT_LEAST_ONE";if(t instanceof pe.RepetitionMandatoryWithSeparator)return"AT_LEAST_ONE_SEP";if(t instanceof pe.RepetitionWithSeparator)return"MANY_SEP";if(t instanceof pe.Repetition)return"MANY";if(t instanceof pe.Terminal)return"CONSUME";throw Error("non exhaustive match")}be.getProductionDslName=uc;var Eo=function(t){ic(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.separator="-",r.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]},r}return e.prototype.reset=function(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}},e.prototype.visitTerminal=function(r){var n=r.terminalType.name+this.separator+"Terminal";(0,Ht.has)(this.dslMethods,n)||(this.dslMethods[n]=[]),this.dslMethods[n].push(r)},e.prototype.visitNonTerminal=function(r){var n=r.nonTerminalName+this.separator+"Terminal";(0,Ht.has)(this.dslMethods,n)||(this.dslMethods[n]=[]),this.dslMethods[n].push(r)},e.prototype.visitOption=function(r){this.dslMethods.option.push(r)},e.prototype.visitRepetitionWithSeparator=function(r){this.dslMethods.repetitionWithSeparator.push(r)},e.prototype.visitRepetitionMandatory=function(r){this.dslMethods.repetitionMandatory.push(r)},e.prototype.visitRepetitionMandatoryWithSeparator=function(r){this.dslMethods.repetitionMandatoryWithSeparator.push(r)},e.prototype.visitRepetition=function(r){this.dslMethods.repetition.push(r)},e.prototype.visitAlternation=function(r){this.dslMethods.alternation.push(r)},e}(ac.GAstVisitor);be.DslMethodsCollectorVisitor=Eo;var dr=new Eo;function cc(t){dr.reset(),t.accept(dr);var e=dr.dslMethods;return dr.reset(),e}be.collectMethods=cc;Object.defineProperty(Ce,"__esModule",{value:!0});Ce.firstForTerminal=Ce.firstForBranching=Ce.firstForSequence=Ce.first=void 0;var Er=N,Ri=X,mn=be;function Lr(t){if(t instanceof Ri.NonTerminal)return Lr(t.referencedRule);if(t instanceof Ri.Terminal)return Oo(t);if((0,mn.isSequenceProd)(t))return _o(t);if((0,mn.isBranchingProd)(t))return To(t);throw Error("non exhaustive match")}Ce.first=Lr;function _o(t){for(var e=[],r=t.definition,n=0,i=r.length>n,a,o=!0;i&&o;)a=r[n],o=(0,mn.isOptionalProd)(a),e=e.concat(Lr(a)),n=n+1,i=r.length>n;return(0,Er.uniq)(e)}Ce.firstForSequence=_o;function To(t){var e=(0,Er.map)(t.definition,function(r){return Lr(r)});return(0,Er.uniq)((0,Er.flatten)(e))}Ce.firstForBranching=To;function Oo(t){return[t.terminalType]}Ce.firstForTerminal=Oo;var ar={};Object.defineProperty(ar,"__esModule",{value:!0});ar.IN=void 0;ar.IN="_~IN~_";var lc=he&&he.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(De,"__esModule",{value:!0});De.buildInProdFollowPrefix=De.buildBetweenProdsFollowPrefix=De.computeAllProdsFollows=De.ResyncFollowsWalker=void 0;var fc=Lt,hc=Ce,Si=N,Ao=ar,pc=X,bo=function(t){lc(e,t);function e(r){var n=t.call(this)||this;return n.topProd=r,n.follows={},n}return e.prototype.startWalking=function(){return this.walk(this.topProd),this.follows},e.prototype.walkTerminal=function(r,n,i){},e.prototype.walkProdRef=function(r,n,i){var a=Ro(r.referencedRule,r.idx)+this.topProd.name,o=n.concat(i),u=new pc.Alternative({definition:o}),s=(0,hc.first)(u);this.follows[a]=s},e}(fc.RestWalker);De.ResyncFollowsWalker=bo;function dc(t){var e={};return(0,Si.forEach)(t,function(r){var n=new bo(r).startWalking();(0,Si.assign)(e,n)}),e}De.computeAllProdsFollows=dc;function Ro(t,e){return t.name+e+Ao.IN}De.buildBetweenProdsFollowPrefix=Ro;function vc(t){var e=t.terminalType.name;return e+t.idx+Ao.IN}De.buildInProdFollowPrefix=vc;var or={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.defaultGrammarValidatorErrorProvider=t.defaultGrammarResolverErrorProvider=t.defaultParserErrorProvider=void 0;var e=nt,r=N,n=N,i=X,a=be;t.defaultParserErrorProvider={buildMismatchTokenMessage:function(o){var u=o.expected,s=o.actual;o.previous,o.ruleName;var c=(0,e.hasTokenLabel)(u),h=c?"--> "+(0,e.tokenLabel)(u)+" <--":"token of type --> "+u.name+" <--",l="Expecting "+h+" but found --> '"+s.image+"' <--";return l},buildNotAllInputParsedMessage:function(o){var u=o.firstRedundant;return o.ruleName,"Redundant input, expecting EOF but found: "+u.image},buildNoViableAltMessage:function(o){var u=o.expectedPathsPerAlt,s=o.actual;o.previous;var c=o.customUserDescription;o.ruleName;var h="Expecting: ",l=(0,n.first)(s).image,p=`
but found: '`+l+"'";if(c)return h+c+p;var d=(0,n.reduce)(u,function(m,E){return m.concat(E)},[]),y=(0,n.map)(d,function(m){return"["+(0,n.map)(m,function(E){return(0,e.tokenLabel)(E)}).join(", ")+"]"}),f=(0,n.map)(y,function(m,E){return"  "+(E+1)+". "+m}),v=`one of these possible Token sequences:
`+f.join(`
`);return h+v+p},buildEarlyExitMessage:function(o){var u=o.expectedIterationPaths,s=o.actual,c=o.customUserDescription;o.ruleName;var h="Expecting: ",l=(0,n.first)(s).image,p=`
but found: '`+l+"'";if(c)return h+c+p;var d=(0,n.map)(u,function(f){return"["+(0,n.map)(f,function(v){return(0,e.tokenLabel)(v)}).join(",")+"]"}),y=`expecting at least one iteration which starts with one of these possible Token sequences::
  `+("<"+d.join(" ,")+">");return h+y+p}},Object.freeze(t.defaultParserErrorProvider),t.defaultGrammarResolverErrorProvider={buildRuleNotFoundError:function(o,u){var s="Invalid grammar, reference to a rule which is not defined: ->"+u.nonTerminalName+`<-
inside top level rule: ->`+o.name+"<-";return s}},t.defaultGrammarValidatorErrorProvider={buildDuplicateFoundError:function(o,u){function s(v){return v instanceof i.Terminal?v.terminalType.name:v instanceof i.NonTerminal?v.nonTerminalName:""}var c=o.name,h=(0,n.first)(u),l=h.idx,p=(0,a.getProductionDslName)(h),d=s(h),y=l>0,f="->"+p+(y?l:"")+"<- "+(d?"with argument: ->"+d+"<-":"")+`
                  appears more than once (`+u.length+" times) in the top level rule: ->"+c+`<-.                  
                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES 
                  `;return f=f.replace(/[ \t]+/g," "),f=f.replace(/\s\s+/g,`
`),f},buildNamespaceConflictError:function(o){var u=`Namespace conflict found in grammar.
`+("The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <"+o.name+`>.
`)+`To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`;return u},buildAlternationPrefixAmbiguityError:function(o){var u=(0,n.map)(o.prefixPath,function(h){return(0,e.tokenLabel)(h)}).join(", "),s=o.alternation.idx===0?"":o.alternation.idx,c="Ambiguous alternatives: <"+o.ambiguityIndices.join(" ,")+`> due to common lookahead prefix
`+("in <OR"+s+"> inside <"+o.topLevelRule.name+`> Rule,
`)+("<"+u+`> may appears as a prefix path in all these alternatives.
`)+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`;return c},buildAlternationAmbiguityError:function(o){var u=(0,n.map)(o.prefixPath,function(h){return(0,e.tokenLabel)(h)}).join(", "),s=o.alternation.idx===0?"":o.alternation.idx,c="Ambiguous Alternatives Detected: <"+o.ambiguityIndices.join(" ,")+"> in <OR"+s+">"+(" inside <"+o.topLevelRule.name+`> Rule,
`)+("<"+u+`> may appears as a prefix path in all these alternatives.
`);return c=c+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,c},buildEmptyRepetitionError:function(o){var u=(0,a.getProductionDslName)(o.repetition);o.repetition.idx!==0&&(u+=o.repetition.idx);var s="The repetition <"+u+"> within Rule <"+o.topLevelRule.name+`> can never consume any tokens.
This could lead to an infinite loop.`;return s},buildTokenNameError:function(o){return"deprecated"},buildEmptyAlternationError:function(o){var u="Ambiguous empty alternative: <"+(o.emptyChoiceIdx+1)+">"+(" in <OR"+o.alternation.idx+"> inside <"+o.topLevelRule.name+`> Rule.
`)+"Only the last alternative may be an empty alternative.";return u},buildTooManyAlternativesError:function(o){var u=`An Alternation cannot have more than 256 alternatives:
`+("<OR"+o.alternation.idx+"> inside <"+o.topLevelRule.name+`> Rule.
 has `+(o.alternation.definition.length+1)+" alternatives.");return u},buildLeftRecursionError:function(o){var u=o.topLevelRule.name,s=r.map(o.leftRecursionPath,function(l){return l.name}),c=u+" --> "+s.concat([u]).join(" --> "),h=`Left Recursion found in grammar.
`+("rule: <"+u+`> can be invoked from itself (directly or indirectly)
`)+(`without consuming any Tokens. The grammar path that causes this is: 
 `+c+`
`)+` To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_Factoring.`;return h},buildInvalidRuleNameError:function(o){return"deprecated"},buildDuplicateRuleNameError:function(o){var u;o.topLevelRule instanceof i.Rule?u=o.topLevelRule.name:u=o.topLevelRule;var s="Duplicate definition, rule: ->"+u+"<- is already defined in the grammar: ->"+o.grammarName+"<-";return s}}})(or);var ct={},lt={},ki;function mc(){if(ki)return lt;ki=1;var t=he&&he.__extends||function(){var o=function(u,s){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,h){c.__proto__=h}||function(c,h){for(var l in h)Object.prototype.hasOwnProperty.call(h,l)&&(c[l]=h[l])},o(u,s)};return function(u,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");o(u,s);function c(){this.constructor=u}u.prototype=s===null?Object.create(s):(c.prototype=s.prototype,new c)}}();Object.defineProperty(lt,"__esModule",{value:!0}),lt.GastRefResolverVisitor=lt.resolveGrammar=void 0;var e=Ie(),r=N,n=it;function i(o,u){var s=new a(o,u);return s.resolveRefs(),s.errors}lt.resolveGrammar=i;var a=function(o){t(u,o);function u(s,c){var h=o.call(this)||this;return h.nameToTopRule=s,h.errMsgProvider=c,h.errors=[],h}return u.prototype.resolveRefs=function(){var s=this;(0,r.forEach)((0,r.values)(this.nameToTopRule),function(c){s.currTopLevel=c,c.accept(s)})},u.prototype.visitNonTerminal=function(s){var c=this.nameToTopRule[s.nonTerminalName];if(c)s.referencedRule=c;else{var h=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,s);this.errors.push({message:h,type:e.ParserDefinitionErrorType.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:s.nonTerminalName})}},u}(n.GAstVisitor);return lt.GastRefResolverVisitor=a,lt}var oe={},sr={},ve={},vt=he&&he.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(ve,"__esModule",{value:!0});ve.nextPossibleTokensAfter=ve.possiblePathsFrom=ve.NextTerminalAfterAtLeastOneSepWalker=ve.NextTerminalAfterAtLeastOneWalker=ve.NextTerminalAfterManySepWalker=ve.NextTerminalAfterManyWalker=ve.AbstractNextTerminalAfterProductionWalker=ve.NextAfterTokenWalker=ve.AbstractNextPossibleTokensWalker=void 0;var So=Lt,te=N,yc=Ce,Z=X,ko=function(t){vt(e,t);function e(r,n){var i=t.call(this)||this;return i.topProd=r,i.path=n,i.possibleTokTypes=[],i.nextProductionName="",i.nextProductionOccurrence=0,i.found=!1,i.isAtEndOfPath=!1,i}return e.prototype.startWalking=function(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=(0,te.cloneArr)(this.path.ruleStack).reverse(),this.occurrenceStack=(0,te.cloneArr)(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes},e.prototype.walk=function(r,n){n===void 0&&(n=[]),this.found||t.prototype.walk.call(this,r,n)},e.prototype.walkProdRef=function(r,n,i){if(r.referencedRule.name===this.nextProductionName&&r.idx===this.nextProductionOccurrence){var a=n.concat(i);this.updateExpectedNext(),this.walk(r.referencedRule,a)}},e.prototype.updateExpectedNext=function(){(0,te.isEmpty)(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())},e}(So.RestWalker);ve.AbstractNextPossibleTokensWalker=ko;var gc=function(t){vt(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.path=n,i.nextTerminalName="",i.nextTerminalOccurrence=0,i.nextTerminalName=i.path.lastTok.name,i.nextTerminalOccurrence=i.path.lastTokOccurrence,i}return e.prototype.walkTerminal=function(r,n,i){if(this.isAtEndOfPath&&r.terminalType.name===this.nextTerminalName&&r.idx===this.nextTerminalOccurrence&&!this.found){var a=n.concat(i),o=new Z.Alternative({definition:a});this.possibleTokTypes=(0,yc.first)(o),this.found=!0}},e}(ko);ve.NextAfterTokenWalker=gc;var ur=function(t){vt(e,t);function e(r,n){var i=t.call(this)||this;return i.topRule=r,i.occurrence=n,i.result={token:void 0,occurrence:void 0,isEndOfRule:void 0},i}return e.prototype.startWalking=function(){return this.walk(this.topRule),this.result},e}(So.RestWalker);ve.AbstractNextTerminalAfterProductionWalker=ur;var Ec=function(t){vt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.walkMany=function(r,n,i){if(r.idx===this.occurrence){var a=(0,te.first)(n.concat(i));this.result.isEndOfRule=a===void 0,a instanceof Z.Terminal&&(this.result.token=a.terminalType,this.result.occurrence=a.idx)}else t.prototype.walkMany.call(this,r,n,i)},e}(ur);ve.NextTerminalAfterManyWalker=Ec;var _c=function(t){vt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.walkManySep=function(r,n,i){if(r.idx===this.occurrence){var a=(0,te.first)(n.concat(i));this.result.isEndOfRule=a===void 0,a instanceof Z.Terminal&&(this.result.token=a.terminalType,this.result.occurrence=a.idx)}else t.prototype.walkManySep.call(this,r,n,i)},e}(ur);ve.NextTerminalAfterManySepWalker=_c;var Tc=function(t){vt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.walkAtLeastOne=function(r,n,i){if(r.idx===this.occurrence){var a=(0,te.first)(n.concat(i));this.result.isEndOfRule=a===void 0,a instanceof Z.Terminal&&(this.result.token=a.terminalType,this.result.occurrence=a.idx)}else t.prototype.walkAtLeastOne.call(this,r,n,i)},e}(ur);ve.NextTerminalAfterAtLeastOneWalker=Tc;var Oc=function(t){vt(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.walkAtLeastOneSep=function(r,n,i){if(r.idx===this.occurrence){var a=(0,te.first)(n.concat(i));this.result.isEndOfRule=a===void 0,a instanceof Z.Terminal&&(this.result.token=a.terminalType,this.result.occurrence=a.idx)}else t.prototype.walkAtLeastOneSep.call(this,r,n,i)},e}(ur);ve.NextTerminalAfterAtLeastOneSepWalker=Oc;function No(t,e,r){r===void 0&&(r=[]),r=(0,te.cloneArr)(r);var n=[],i=0;function a(c){return c.concat((0,te.drop)(t,i+1))}function o(c){var h=No(a(c),e,r);return n.concat(h)}for(;r.length<e&&i<t.length;){var u=t[i];if(u instanceof Z.Alternative)return o(u.definition);if(u instanceof Z.NonTerminal)return o(u.definition);if(u instanceof Z.Option)n=o(u.definition);else if(u instanceof Z.RepetitionMandatory){var s=u.definition.concat([new Z.Repetition({definition:u.definition})]);return o(s)}else if(u instanceof Z.RepetitionMandatoryWithSeparator){var s=[new Z.Alternative({definition:u.definition}),new Z.Repetition({definition:[new Z.Terminal({terminalType:u.separator})].concat(u.definition)})];return o(s)}else if(u instanceof Z.RepetitionWithSeparator){var s=u.definition.concat([new Z.Repetition({definition:[new Z.Terminal({terminalType:u.separator})].concat(u.definition)})]);n=o(s)}else if(u instanceof Z.Repetition){var s=u.definition.concat([new Z.Repetition({definition:u.definition})]);n=o(s)}else{if(u instanceof Z.Alternation)return(0,te.forEach)(u.definition,function(c){(0,te.isEmpty)(c.definition)===!1&&(n=o(c.definition))}),n;if(u instanceof Z.Terminal)r.push(u.terminalType);else throw Error("non exhaustive match")}i++}return n.push({partialPath:r,suffixDef:(0,te.drop)(t,i)}),n}ve.possiblePathsFrom=No;function Ac(t,e,r,n){var i="EXIT_NONE_TERMINAL",a=[i],o="EXIT_ALTERNATIVE",u=!1,s=e.length,c=s-n-1,h=[],l=[];for(l.push({idx:-1,def:t,ruleStack:[],occurrenceStack:[]});!(0,te.isEmpty)(l);){var p=l.pop();if(p===o){u&&(0,te.last)(l).idx<=c&&l.pop();continue}var d=p.def,y=p.idx,f=p.ruleStack,v=p.occurrenceStack;if(!(0,te.isEmpty)(d)){var m=d[0];if(m===i){var E={idx:y,def:(0,te.drop)(d),ruleStack:(0,te.dropRight)(f),occurrenceStack:(0,te.dropRight)(v)};l.push(E)}else if(m instanceof Z.Terminal)if(y<s-1){var g=y+1,T=e[g];if(r(T,m.terminalType)){var E={idx:g,def:(0,te.drop)(d),ruleStack:f,occurrenceStack:v};l.push(E)}}else if(y===s-1)h.push({nextTokenType:m.terminalType,nextTokenOccurrence:m.idx,ruleStack:f,occurrenceStack:v}),u=!0;else throw Error("non exhaustive match");else if(m instanceof Z.NonTerminal){var L=(0,te.cloneArr)(f);L.push(m.nonTerminalName);var A=(0,te.cloneArr)(v);A.push(m.idx);var E={idx:y,def:m.definition.concat(a,(0,te.drop)(d)),ruleStack:L,occurrenceStack:A};l.push(E)}else if(m instanceof Z.Option){var b={idx:y,def:(0,te.drop)(d),ruleStack:f,occurrenceStack:v};l.push(b),l.push(o);var I={idx:y,def:m.definition.concat((0,te.drop)(d)),ruleStack:f,occurrenceStack:v};l.push(I)}else if(m instanceof Z.RepetitionMandatory){var R=new Z.Repetition({definition:m.definition,idx:m.idx}),k=m.definition.concat([R],(0,te.drop)(d)),E={idx:y,def:k,ruleStack:f,occurrenceStack:v};l.push(E)}else if(m instanceof Z.RepetitionMandatoryWithSeparator){var _=new Z.Terminal({terminalType:m.separator}),R=new Z.Repetition({definition:[_].concat(m.definition),idx:m.idx}),k=m.definition.concat([R],(0,te.drop)(d)),E={idx:y,def:k,ruleStack:f,occurrenceStack:v};l.push(E)}else if(m instanceof Z.RepetitionWithSeparator){var b={idx:y,def:(0,te.drop)(d),ruleStack:f,occurrenceStack:v};l.push(b),l.push(o);var _=new Z.Terminal({terminalType:m.separator}),S=new Z.Repetition({definition:[_].concat(m.definition),idx:m.idx}),k=m.definition.concat([S],(0,te.drop)(d)),I={idx:y,def:k,ruleStack:f,occurrenceStack:v};l.push(I)}else if(m instanceof Z.Repetition){var b={idx:y,def:(0,te.drop)(d),ruleStack:f,occurrenceStack:v};l.push(b),l.push(o);var S=new Z.Repetition({definition:m.definition,idx:m.idx}),k=m.definition.concat([S],(0,te.drop)(d)),I={idx:y,def:k,ruleStack:f,occurrenceStack:v};l.push(I)}else if(m instanceof Z.Alternation)for(var O=m.definition.length-1;O>=0;O--){var C=m.definition[O],U={idx:y,def:C.definition.concat((0,te.drop)(d)),ruleStack:f,occurrenceStack:v};l.push(U),l.push(o)}else if(m instanceof Z.Alternative)l.push({idx:y,def:m.definition.concat((0,te.drop)(d)),ruleStack:f,occurrenceStack:v});else if(m instanceof Z.Rule)l.push(bc(m,y,f,v));else throw Error("non exhaustive match")}}return h}ve.nextPossibleTokensAfter=Ac;function bc(t,e,r,n){var i=(0,te.cloneArr)(r);i.push(t.name);var a=(0,te.cloneArr)(n);return a.push(1),{idx:e,def:t.definition,ruleStack:i,occurrenceStack:a}}(function(t){var e=he&&he.__extends||function(){var R=function(k,_){return R=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,O){S.__proto__=O}||function(S,O){for(var C in O)Object.prototype.hasOwnProperty.call(O,C)&&(S[C]=O[C])},R(k,_)};return function(k,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");R(k,_);function S(){this.constructor=k}k.prototype=_===null?Object.create(_):(S.prototype=_.prototype,new S)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.areTokenCategoriesNotUsed=t.isStrictPrefixOfPath=t.containsPath=t.getLookaheadPathsForOptionalProd=t.getLookaheadPathsForOr=t.lookAheadSequenceFromAlternatives=t.buildSingleAlternativeLookaheadFunction=t.buildAlternativesLookAheadFunc=t.buildLookaheadFuncForOptionalProd=t.buildLookaheadFuncForOr=t.getProdType=t.PROD_TYPE=void 0;var r=N,n=ve,i=Lt,a=Ct,o=X,u=it,s;(function(R){R[R.OPTION=0]="OPTION",R[R.REPETITION=1]="REPETITION",R[R.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",R[R.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",R[R.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",R[R.ALTERNATION=5]="ALTERNATION"})(s=t.PROD_TYPE||(t.PROD_TYPE={}));function c(R){if(R instanceof o.Option)return s.OPTION;if(R instanceof o.Repetition)return s.REPETITION;if(R instanceof o.RepetitionMandatory)return s.REPETITION_MANDATORY;if(R instanceof o.RepetitionMandatoryWithSeparator)return s.REPETITION_MANDATORY_WITH_SEPARATOR;if(R instanceof o.RepetitionWithSeparator)return s.REPETITION_WITH_SEPARATOR;if(R instanceof o.Alternation)return s.ALTERNATION;throw Error("non exhaustive match")}t.getProdType=c;function h(R,k,_,S,O,C){var U=T(R,k,_),q=I(U)?a.tokenStructuredMatcherNoCategories:a.tokenStructuredMatcher;return C(U,S,q,O)}t.buildLookaheadFuncForOr=h;function l(R,k,_,S,O,C){var U=L(R,k,O,_),q=I(U)?a.tokenStructuredMatcherNoCategories:a.tokenStructuredMatcher;return C(U[0],q,S)}t.buildLookaheadFuncForOptionalProd=l;function p(R,k,_,S){var O=R.length,C=(0,r.every)(R,function(B){return(0,r.every)(B,function(x){return x.length===1})});if(k)return function(B){for(var x=(0,r.map)(B,function(D){return D.GATE}),W=0;W<O;W++){var G=R[W],K=G.length,H=x[W];if(H!==void 0&&H.call(this)===!1)continue;e:for(var $=0;$<K;$++){for(var Y=G[$],M=Y.length,w=0;w<M;w++){var F=this.LA(w+1);if(_(F,Y[w])===!1)continue e}return W}}};if(C&&!S){var U=(0,r.map)(R,function(B){return(0,r.flatten)(B)}),q=(0,r.reduce)(U,function(B,x,W){return(0,r.forEach)(x,function(G){(0,r.has)(B,G.tokenTypeIdx)||(B[G.tokenTypeIdx]=W),(0,r.forEach)(G.categoryMatches,function(K){(0,r.has)(B,K)||(B[K]=W)})}),B},[]);return function(){var B=this.LA(1);return q[B.tokenTypeIdx]}}else return function(){for(var B=0;B<O;B++){var x=R[B],W=x.length;e:for(var G=0;G<W;G++){for(var K=x[G],H=K.length,$=0;$<H;$++){var Y=this.LA($+1);if(_(Y,K[$])===!1)continue e}return B}}}}t.buildAlternativesLookAheadFunc=p;function d(R,k,_){var S=(0,r.every)(R,function(x){return x.length===1}),O=R.length;if(S&&!_){var C=(0,r.flatten)(R);if(C.length===1&&(0,r.isEmpty)(C[0].categoryMatches)){var U=C[0],q=U.tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===q}}else{var B=(0,r.reduce)(C,function(x,W,G){return x[W.tokenTypeIdx]=!0,(0,r.forEach)(W.categoryMatches,function(K){x[K]=!0}),x},[]);return function(){var x=this.LA(1);return B[x.tokenTypeIdx]===!0}}}else return function(){e:for(var x=0;x<O;x++){for(var W=R[x],G=W.length,K=0;K<G;K++){var H=this.LA(K+1);if(k(H,W[K])===!1)continue e}return!0}return!1}}t.buildSingleAlternativeLookaheadFunction=d;var y=function(R){e(k,R);function k(_,S,O){var C=R.call(this)||this;return C.topProd=_,C.targetOccurrence=S,C.targetProdType=O,C}return k.prototype.startWalking=function(){return this.walk(this.topProd),this.restDef},k.prototype.checkIsTarget=function(_,S,O,C){return _.idx===this.targetOccurrence&&this.targetProdType===S?(this.restDef=O.concat(C),!0):!1},k.prototype.walkOption=function(_,S,O){this.checkIsTarget(_,s.OPTION,S,O)||R.prototype.walkOption.call(this,_,S,O)},k.prototype.walkAtLeastOne=function(_,S,O){this.checkIsTarget(_,s.REPETITION_MANDATORY,S,O)||R.prototype.walkOption.call(this,_,S,O)},k.prototype.walkAtLeastOneSep=function(_,S,O){this.checkIsTarget(_,s.REPETITION_MANDATORY_WITH_SEPARATOR,S,O)||R.prototype.walkOption.call(this,_,S,O)},k.prototype.walkMany=function(_,S,O){this.checkIsTarget(_,s.REPETITION,S,O)||R.prototype.walkOption.call(this,_,S,O)},k.prototype.walkManySep=function(_,S,O){this.checkIsTarget(_,s.REPETITION_WITH_SEPARATOR,S,O)||R.prototype.walkOption.call(this,_,S,O)},k}(i.RestWalker),f=function(R){e(k,R);function k(_,S,O){var C=R.call(this)||this;return C.targetOccurrence=_,C.targetProdType=S,C.targetRef=O,C.result=[],C}return k.prototype.checkIsTarget=function(_,S){_.idx===this.targetOccurrence&&this.targetProdType===S&&(this.targetRef===void 0||_===this.targetRef)&&(this.result=_.definition)},k.prototype.visitOption=function(_){this.checkIsTarget(_,s.OPTION)},k.prototype.visitRepetition=function(_){this.checkIsTarget(_,s.REPETITION)},k.prototype.visitRepetitionMandatory=function(_){this.checkIsTarget(_,s.REPETITION_MANDATORY)},k.prototype.visitRepetitionMandatoryWithSeparator=function(_){this.checkIsTarget(_,s.REPETITION_MANDATORY_WITH_SEPARATOR)},k.prototype.visitRepetitionWithSeparator=function(_){this.checkIsTarget(_,s.REPETITION_WITH_SEPARATOR)},k.prototype.visitAlternation=function(_){this.checkIsTarget(_,s.ALTERNATION)},k}(u.GAstVisitor);function v(R){for(var k=new Array(R),_=0;_<R;_++)k[_]=[];return k}function m(R){for(var k=[""],_=0;_<R.length;_++){for(var S=R[_],O=[],C=0;C<k.length;C++){var U=k[C];O.push(U+"_"+S.tokenTypeIdx);for(var q=0;q<S.categoryMatches.length;q++){var B="_"+S.categoryMatches[q];O.push(U+B)}}k=O}return k}function E(R,k,_){for(var S=0;S<R.length;S++)if(S!==_)for(var O=R[S],C=0;C<k.length;C++){var U=k[C];if(O[U]===!0)return!1}return!0}function g(R,k){for(var _=(0,r.map)(R,function(W){return(0,n.possiblePathsFrom)([W],1)}),S=v(_.length),O=(0,r.map)(_,function(W){var G={};return(0,r.forEach)(W,function(K){var H=m(K.partialPath);(0,r.forEach)(H,function($){G[$]=!0})}),G}),C=_,U=1;U<=k;U++){var q=C;C=v(q.length);for(var B=function(W){for(var G=q[W],K=0;K<G.length;K++){var H=G[K].partialPath,$=G[K].suffixDef,Y=m(H),M=E(O,Y,W);if(M||(0,r.isEmpty)($)||H.length===k){var w=S[W];if(A(w,H)===!1){w.push(H);for(var F=0;F<Y.length;F++){var D=Y[F];O[W][D]=!0}}}else{var j=(0,n.possiblePathsFrom)($,U+1,H);C[W]=C[W].concat(j),(0,r.forEach)(j,function(Q){var J=m(Q.partialPath);(0,r.forEach)(J,function(ue){O[W][ue]=!0})})}}},x=0;x<q.length;x++)B(x)}return S}t.lookAheadSequenceFromAlternatives=g;function T(R,k,_,S){var O=new f(R,s.ALTERNATION,S);return k.accept(O),g(O.result,_)}t.getLookaheadPathsForOr=T;function L(R,k,_,S){var O=new f(R,_);k.accept(O);var C=O.result,U=new y(k,R,_),q=U.startWalking(),B=new o.Alternative({definition:C}),x=new o.Alternative({definition:q});return g([B,x],S)}t.getLookaheadPathsForOptionalProd=L;function A(R,k){e:for(var _=0;_<R.length;_++){var S=R[_];if(S.length===k.length){for(var O=0;O<S.length;O++){var C=k[O],U=S[O],q=C===U||U.categoryMatchesMap[C.tokenTypeIdx]!==void 0;if(q===!1)continue e}return!0}}return!1}t.containsPath=A;function b(R,k){return R.length<k.length&&(0,r.every)(R,function(_,S){var O=k[S];return _===O||O.categoryMatchesMap[_.tokenTypeIdx]})}t.isStrictPrefixOfPath=b;function I(R){return(0,r.every)(R,function(k){return(0,r.every)(k,function(_){return(0,r.every)(_,function(S){return(0,r.isEmpty)(S.categoryMatches)})})})}t.areTokenCategoriesNotUsed=I})(sr);var Ni;function Io(){if(Ni)return oe;Ni=1;var t=he&&he.__extends||function(){var _=function(S,O){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,U){C.__proto__=U}||function(C,U){for(var q in U)Object.prototype.hasOwnProperty.call(U,q)&&(C[q]=U[q])},_(S,O)};return function(S,O){if(typeof O!="function"&&O!==null)throw new TypeError("Class extends value "+String(O)+" is not a constructor or null");_(S,O);function C(){this.constructor=S}S.prototype=O===null?Object.create(O):(C.prototype=O.prototype,new C)}}();Object.defineProperty(oe,"__esModule",{value:!0}),oe.checkPrefixAlternativesAmbiguities=oe.validateSomeNonEmptyLookaheadPath=oe.validateTooManyAlts=oe.RepetionCollector=oe.validateAmbiguousAlternationAlternatives=oe.validateEmptyOrAlternative=oe.getFirstNoneTerminal=oe.validateNoLeftRecursion=oe.validateRuleIsOverridden=oe.validateRuleDoesNotAlreadyExist=oe.OccurrenceValidationCollector=oe.identifyProductionForDuplicates=oe.validateGrammar=void 0;var e=N,r=N,n=Ie(),i=be,a=sr,o=ve,u=X,s=it;function c(_,S,O,C,U){var q=e.map(_,function(Y){return h(Y,C)}),B=e.map(_,function(Y){return v(Y,Y,C)}),x=[],W=[],G=[];(0,r.every)(B,r.isEmpty)&&(x=(0,r.map)(_,function(Y){return g(Y,C)}),W=(0,r.map)(_,function(Y){return T(Y,S,C)}),G=b(_,S,C));var K=k(_,O,C),H=(0,r.map)(_,function(Y){return A(Y,C)}),$=(0,r.map)(_,function(Y){return y(Y,_,U,C)});return e.flatten(q.concat(G,B,x,W,K,H,$))}oe.validateGrammar=c;function h(_,S){var O=new d;_.accept(O);var C=O.allProductions,U=e.groupBy(C,l),q=e.pick(U,function(x){return x.length>1}),B=e.map(e.values(q),function(x){var W=e.first(x),G=S.buildDuplicateFoundError(_,x),K=(0,i.getProductionDslName)(W),H={message:G,type:n.ParserDefinitionErrorType.DUPLICATE_PRODUCTIONS,ruleName:_.name,dslName:K,occurrence:W.idx},$=p(W);return $&&(H.parameter=$),H});return B}function l(_){return(0,i.getProductionDslName)(_)+"_#_"+_.idx+"_#_"+p(_)}oe.identifyProductionForDuplicates=l;function p(_){return _ instanceof u.Terminal?_.terminalType.name:_ instanceof u.NonTerminal?_.nonTerminalName:""}var d=function(_){t(S,_);function S(){var O=_!==null&&_.apply(this,arguments)||this;return O.allProductions=[],O}return S.prototype.visitNonTerminal=function(O){this.allProductions.push(O)},S.prototype.visitOption=function(O){this.allProductions.push(O)},S.prototype.visitRepetitionWithSeparator=function(O){this.allProductions.push(O)},S.prototype.visitRepetitionMandatory=function(O){this.allProductions.push(O)},S.prototype.visitRepetitionMandatoryWithSeparator=function(O){this.allProductions.push(O)},S.prototype.visitRepetition=function(O){this.allProductions.push(O)},S.prototype.visitAlternation=function(O){this.allProductions.push(O)},S.prototype.visitTerminal=function(O){this.allProductions.push(O)},S}(s.GAstVisitor);oe.OccurrenceValidationCollector=d;function y(_,S,O,C){var U=[],q=(0,r.reduce)(S,function(x,W){return W.name===_.name?x+1:x},0);if(q>1){var B=C.buildDuplicateRuleNameError({topLevelRule:_,grammarName:O});U.push({message:B,type:n.ParserDefinitionErrorType.DUPLICATE_RULE_NAME,ruleName:_.name})}return U}oe.validateRuleDoesNotAlreadyExist=y;function f(_,S,O){var C=[],U;return e.contains(S,_)||(U="Invalid rule override, rule: ->"+_+"<- cannot be overridden in the grammar: ->"+O+"<-as it is not defined in any of the super grammars ",C.push({message:U,type:n.ParserDefinitionErrorType.INVALID_RULE_OVERRIDE,ruleName:_})),C}oe.validateRuleIsOverridden=f;function v(_,S,O,C){C===void 0&&(C=[]);var U=[],q=m(S.definition);if(e.isEmpty(q))return[];var B=_.name,x=e.contains(q,_);x&&U.push({message:O.buildLeftRecursionError({topLevelRule:_,leftRecursionPath:C}),type:n.ParserDefinitionErrorType.LEFT_RECURSION,ruleName:B});var W=e.difference(q,C.concat([_])),G=e.map(W,function(K){var H=e.cloneArr(C);return H.push(K),v(_,K,O,H)});return U.concat(e.flatten(G))}oe.validateNoLeftRecursion=v;function m(_){var S=[];if(e.isEmpty(_))return S;var O=e.first(_);if(O instanceof u.NonTerminal)S.push(O.referencedRule);else if(O instanceof u.Alternative||O instanceof u.Option||O instanceof u.RepetitionMandatory||O instanceof u.RepetitionMandatoryWithSeparator||O instanceof u.RepetitionWithSeparator||O instanceof u.Repetition)S=S.concat(m(O.definition));else if(O instanceof u.Alternation)S=e.flatten(e.map(O.definition,function(B){return m(B.definition)}));else if(!(O instanceof u.Terminal))throw Error("non exhaustive match");var C=(0,i.isOptionalProd)(O),U=_.length>1;if(C&&U){var q=e.drop(_);return S.concat(m(q))}else return S}oe.getFirstNoneTerminal=m;var E=function(_){t(S,_);function S(){var O=_!==null&&_.apply(this,arguments)||this;return O.alternations=[],O}return S.prototype.visitAlternation=function(O){this.alternations.push(O)},S}(s.GAstVisitor);function g(_,S){var O=new E;_.accept(O);var C=O.alternations,U=e.reduce(C,function(q,B){var x=e.dropRight(B.definition),W=e.map(x,function(G,K){var H=(0,o.nextPossibleTokensAfter)([G],[],null,1);return e.isEmpty(H)?{message:S.buildEmptyAlternationError({topLevelRule:_,alternation:B,emptyChoiceIdx:K}),type:n.ParserDefinitionErrorType.NONE_LAST_EMPTY_ALT,ruleName:_.name,occurrence:B.idx,alternative:K+1}:null});return q.concat(e.compact(W))},[]);return U}oe.validateEmptyOrAlternative=g;function T(_,S,O){var C=new E;_.accept(C);var U=C.alternations;U=(0,r.reject)(U,function(B){return B.ignoreAmbiguities===!0});var q=e.reduce(U,function(B,x){var W=x.idx,G=x.maxLookahead||S,K=(0,a.getLookaheadPathsForOr)(W,_,G,x),H=I(K,x,_,O),$=R(K,x,_,O);return B.concat(H,$)},[]);return q}oe.validateAmbiguousAlternationAlternatives=T;var L=function(_){t(S,_);function S(){var O=_!==null&&_.apply(this,arguments)||this;return O.allProductions=[],O}return S.prototype.visitRepetitionWithSeparator=function(O){this.allProductions.push(O)},S.prototype.visitRepetitionMandatory=function(O){this.allProductions.push(O)},S.prototype.visitRepetitionMandatoryWithSeparator=function(O){this.allProductions.push(O)},S.prototype.visitRepetition=function(O){this.allProductions.push(O)},S}(s.GAstVisitor);oe.RepetionCollector=L;function A(_,S){var O=new E;_.accept(O);var C=O.alternations,U=e.reduce(C,function(q,B){return B.definition.length>255&&q.push({message:S.buildTooManyAlternativesError({topLevelRule:_,alternation:B}),type:n.ParserDefinitionErrorType.TOO_MANY_ALTS,ruleName:_.name,occurrence:B.idx}),q},[]);return U}oe.validateTooManyAlts=A;function b(_,S,O){var C=[];return(0,r.forEach)(_,function(U){var q=new L;U.accept(q);var B=q.allProductions;(0,r.forEach)(B,function(x){var W=(0,a.getProdType)(x),G=x.maxLookahead||S,K=x.idx,H=(0,a.getLookaheadPathsForOptionalProd)(K,U,W,G),$=H[0];if((0,r.isEmpty)((0,r.flatten)($))){var Y=O.buildEmptyRepetitionError({topLevelRule:U,repetition:x});C.push({message:Y,type:n.ParserDefinitionErrorType.NO_NON_EMPTY_LOOKAHEAD,ruleName:U.name})}})}),C}oe.validateSomeNonEmptyLookaheadPath=b;function I(_,S,O,C){var U=[],q=(0,r.reduce)(_,function(x,W,G){return S.definition[G].ignoreAmbiguities===!0||(0,r.forEach)(W,function(K){var H=[G];(0,r.forEach)(_,function($,Y){G!==Y&&(0,a.containsPath)($,K)&&S.definition[Y].ignoreAmbiguities!==!0&&H.push(Y)}),H.length>1&&!(0,a.containsPath)(U,K)&&(U.push(K),x.push({alts:H,path:K}))}),x},[]),B=e.map(q,function(x){var W=(0,r.map)(x.alts,function(K){return K+1}),G=C.buildAlternationAmbiguityError({topLevelRule:O,alternation:S,ambiguityIndices:W,prefixPath:x.path});return{message:G,type:n.ParserDefinitionErrorType.AMBIGUOUS_ALTS,ruleName:O.name,occurrence:S.idx,alternatives:[x.alts]}});return B}function R(_,S,O,C){var U=[],q=(0,r.reduce)(_,function(B,x,W){var G=(0,r.map)(x,function(K){return{idx:W,path:K}});return B.concat(G)},[]);return(0,r.forEach)(q,function(B){var x=S.definition[B.idx];if(x.ignoreAmbiguities!==!0){var W=B.idx,G=B.path,K=(0,r.findAll)(q,function($){return S.definition[$.idx].ignoreAmbiguities!==!0&&$.idx<W&&(0,a.isStrictPrefixOfPath)($.path,G)}),H=(0,r.map)(K,function($){var Y=[$.idx+1,W+1],M=S.idx===0?"":S.idx,w=C.buildAlternationPrefixAmbiguityError({topLevelRule:O,alternation:S,ambiguityIndices:Y,prefixPath:$.path});return{message:w,type:n.ParserDefinitionErrorType.AMBIGUOUS_PREFIX_ALTS,ruleName:O.name,occurrence:M,alternatives:Y}});U=U.concat(H)}}),U}oe.checkPrefixAlternativesAmbiguities=R;function k(_,S,O){var C=[],U=(0,r.map)(S,function(q){return q.name});return(0,r.forEach)(_,function(q){var B=q.name;if((0,r.contains)(U,B)){var x=O.buildNamespaceConflictError(q);C.push({message:x,type:n.ParserDefinitionErrorType.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:B})}}),C}return oe}var Ii;function Rc(){if(Ii)return ct;Ii=1,Object.defineProperty(ct,"__esModule",{value:!0}),ct.validateGrammar=ct.resolveGrammar=void 0;var t=N,e=mc(),r=Io(),n=or;function i(o){o=(0,t.defaults)(o,{errMsgProvider:n.defaultGrammarResolverErrorProvider});var u={};return(0,t.forEach)(o.rules,function(s){u[s.name]=s}),(0,e.resolveGrammar)(u,o.errMsgProvider)}ct.resolveGrammar=i;function a(o){return o=(0,t.defaults)(o,{errMsgProvider:n.defaultGrammarValidatorErrorProvider}),(0,r.validateGrammar)(o.rules,o.maxLookahead,o.tokenTypes,o.errMsgProvider,o.grammarName)}return ct.validateGrammar=a,ct}var Jr={},Re={},cr=he&&he.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(Re,"__esModule",{value:!0});Re.EarlyExitException=Re.NotAllInputParsedException=Re.NoViableAltException=Re.MismatchedTokenException=Re.isRecognitionException=void 0;var Sc=N,Po="MismatchedTokenException",Lo="NoViableAltException",Co="EarlyExitException",wo="NotAllInputParsedException",Mo=[Po,Lo,Co,wo];Object.freeze(Mo);function kc(t){return(0,Sc.contains)(Mo,t.name)}Re.isRecognitionException=kc;var Cr=function(t){cr(e,t);function e(r,n){var i=this.constructor,a=t.call(this,r)||this;return a.token=n,a.resyncedTokens=[],Object.setPrototypeOf(a,i.prototype),Error.captureStackTrace&&Error.captureStackTrace(a,a.constructor),a}return e}(Error),Nc=function(t){cr(e,t);function e(r,n,i){var a=t.call(this,r,n)||this;return a.previousToken=i,a.name=Po,a}return e}(Cr);Re.MismatchedTokenException=Nc;var Ic=function(t){cr(e,t);function e(r,n,i){var a=t.call(this,r,n)||this;return a.previousToken=i,a.name=Lo,a}return e}(Cr);Re.NoViableAltException=Ic;var Pc=function(t){cr(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i.name=wo,i}return e}(Cr);Re.NotAllInputParsedException=Pc;var Lc=function(t){cr(e,t);function e(r,n,i){var a=t.call(this,r,n)||this;return a.previousToken=i,a.name=Co,a}return e}(Cr);Re.EarlyExitException=Lc;var Pi;function Fo(){return Pi||(Pi=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.attemptInRepetitionRecovery=t.Recoverable=t.InRuleRecoveryException=t.IN_RULE_RECOVERY_EXCEPTION=t.EOF_FOLLOW_KEY=void 0;var e=nt,r=N,n=Re,i=ar,a=Ie();t.EOF_FOLLOW_KEY={},t.IN_RULE_RECOVERY_EXCEPTION="InRuleRecoveryException";function o(c){this.name=t.IN_RULE_RECOVERY_EXCEPTION,this.message=c}t.InRuleRecoveryException=o,o.prototype=Error.prototype;var u=function(){function c(){}return c.prototype.initRecoverable=function(h){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=(0,r.has)(h,"recoveryEnabled")?h.recoveryEnabled:a.DEFAULT_PARSER_CONFIG.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=s)},c.prototype.getTokenToInsert=function(h){var l=(0,e.createTokenInstance)(h,"",NaN,NaN,NaN,NaN,NaN,NaN);return l.isInsertedInRecovery=!0,l},c.prototype.canTokenTypeBeInsertedInRecovery=function(h){return!0},c.prototype.tryInRepetitionRecovery=function(h,l,p,d){for(var y=this,f=this.findReSyncTokenType(),v=this.exportLexerState(),m=[],E=!1,g=this.LA(1),T=this.LA(1),L=function(){var A=y.LA(0),b=y.errorMessageProvider.buildMismatchTokenMessage({expected:d,actual:g,previous:A,ruleName:y.getCurrRuleFullName()}),I=new n.MismatchedTokenException(b,g,y.LA(0));I.resyncedTokens=(0,r.dropRight)(m),y.SAVE_ERROR(I)};!E;)if(this.tokenMatcher(T,d)){L();return}else if(p.call(this)){L(),h.apply(this,l);return}else this.tokenMatcher(T,f)?E=!0:(T=this.SKIP_TOKEN(),this.addToResyncTokens(T,m));this.importLexerState(v)},c.prototype.shouldInRepetitionRecoveryBeTried=function(h,l,p){return!(p===!1||h===void 0||l===void 0||this.tokenMatcher(this.LA(1),h)||this.isBackTracking()||this.canPerformInRuleRecovery(h,this.getFollowsForInRuleRecovery(h,l)))},c.prototype.getFollowsForInRuleRecovery=function(h,l){var p=this.getCurrentGrammarPath(h,l),d=this.getNextPossibleTokenTypes(p);return d},c.prototype.tryInRuleRecovery=function(h,l){if(this.canRecoverWithSingleTokenInsertion(h,l)){var p=this.getTokenToInsert(h);return p}if(this.canRecoverWithSingleTokenDeletion(h)){var d=this.SKIP_TOKEN();return this.consumeToken(),d}throw new o("sad sad panda")},c.prototype.canPerformInRuleRecovery=function(h,l){return this.canRecoverWithSingleTokenInsertion(h,l)||this.canRecoverWithSingleTokenDeletion(h)},c.prototype.canRecoverWithSingleTokenInsertion=function(h,l){var p=this;if(!this.canTokenTypeBeInsertedInRecovery(h)||(0,r.isEmpty)(l))return!1;var d=this.LA(1),y=(0,r.find)(l,function(f){return p.tokenMatcher(d,f)})!==void 0;return y},c.prototype.canRecoverWithSingleTokenDeletion=function(h){var l=this.tokenMatcher(this.LA(2),h);return l},c.prototype.isInCurrentRuleReSyncSet=function(h){var l=this.getCurrFollowKey(),p=this.getFollowSetFromFollowKey(l);return(0,r.contains)(p,h)},c.prototype.findReSyncTokenType=function(){for(var h=this.flattenFollowSet(),l=this.LA(1),p=2;;){var d=l.tokenType;if((0,r.contains)(h,d))return d;l=this.LA(p),p++}},c.prototype.getCurrFollowKey=function(){if(this.RULE_STACK.length===1)return t.EOF_FOLLOW_KEY;var h=this.getLastExplicitRuleShortName(),l=this.getLastExplicitRuleOccurrenceIndex(),p=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(h),idxInCallingRule:l,inRule:this.shortRuleNameToFullName(p)}},c.prototype.buildFullFollowKeyStack=function(){var h=this,l=this.RULE_STACK,p=this.RULE_OCCURRENCE_STACK;return(0,r.map)(l,function(d,y){return y===0?t.EOF_FOLLOW_KEY:{ruleName:h.shortRuleNameToFullName(d),idxInCallingRule:p[y],inRule:h.shortRuleNameToFullName(l[y-1])}})},c.prototype.flattenFollowSet=function(){var h=this,l=(0,r.map)(this.buildFullFollowKeyStack(),function(p){return h.getFollowSetFromFollowKey(p)});return(0,r.flatten)(l)},c.prototype.getFollowSetFromFollowKey=function(h){if(h===t.EOF_FOLLOW_KEY)return[e.EOF];var l=h.ruleName+h.idxInCallingRule+i.IN+h.inRule;return this.resyncFollows[l]},c.prototype.addToResyncTokens=function(h,l){return this.tokenMatcher(h,e.EOF)||l.push(h),l},c.prototype.reSyncTo=function(h){for(var l=[],p=this.LA(1);this.tokenMatcher(p,h)===!1;)p=this.SKIP_TOKEN(),this.addToResyncTokens(p,l);return(0,r.dropRight)(l)},c.prototype.attemptInRepetitionRecovery=function(h,l,p,d,y,f,v){},c.prototype.getCurrentGrammarPath=function(h,l){var p=this.getHumanReadableRuleStack(),d=(0,r.cloneArr)(this.RULE_OCCURRENCE_STACK),y={ruleStack:p,occurrenceStack:d,lastTok:h,lastTokOccurrence:l};return y},c.prototype.getHumanReadableRuleStack=function(){var h=this;return(0,r.map)(this.RULE_STACK,function(l){return h.shortRuleNameToFullName(l)})},c}();t.Recoverable=u;function s(c,h,l,p,d,y,f){var v=this.getKeyForAutomaticLookahead(p,d),m=this.firstAfterRepMap[v];if(m===void 0){var E=this.getCurrRuleFullName(),g=this.getGAstProductions()[E],T=new y(g,d);m=T.startWalking(),this.firstAfterRepMap[v]=m}var L=m.token,A=m.occurrence,b=m.isEndOfRule;this.RULE_STACK.length===1&&b&&L===void 0&&(L=e.EOF,A=1),this.shouldInRepetitionRecoveryBeTried(L,A,f)&&this.tryInRepetitionRecovery(c,h,l,L)}t.attemptInRepetitionRecovery=s}(Jr)),Jr}var wt={},wr={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.getKeyForAutomaticLookahead=t.AT_LEAST_ONE_SEP_IDX=t.MANY_SEP_IDX=t.AT_LEAST_ONE_IDX=t.MANY_IDX=t.OPTION_IDX=t.OR_IDX=t.BITS_FOR_ALT_IDX=t.BITS_FOR_RULE_IDX=t.BITS_FOR_OCCURRENCE_IDX=t.BITS_FOR_METHOD_TYPE=void 0,t.BITS_FOR_METHOD_TYPE=4,t.BITS_FOR_OCCURRENCE_IDX=8,t.BITS_FOR_RULE_IDX=12,t.BITS_FOR_ALT_IDX=8,t.OR_IDX=1<<t.BITS_FOR_OCCURRENCE_IDX,t.OPTION_IDX=2<<t.BITS_FOR_OCCURRENCE_IDX,t.MANY_IDX=3<<t.BITS_FOR_OCCURRENCE_IDX,t.AT_LEAST_ONE_IDX=4<<t.BITS_FOR_OCCURRENCE_IDX,t.MANY_SEP_IDX=5<<t.BITS_FOR_OCCURRENCE_IDX,t.AT_LEAST_ONE_SEP_IDX=6<<t.BITS_FOR_OCCURRENCE_IDX;function e(r,n,i){return i|n|r}t.getKeyForAutomaticLookahead=e,32-t.BITS_FOR_ALT_IDX})(wr);var Li;function Cc(){if(Li)return wt;Li=1,Object.defineProperty(wt,"__esModule",{value:!0}),wt.LooksAhead=void 0;var t=sr,e=N,r=Ie(),n=wr,i=be,a=function(){function o(){}return o.prototype.initLooksAhead=function(u){this.dynamicTokensEnabled=(0,e.has)(u,"dynamicTokensEnabled")?u.dynamicTokensEnabled:r.DEFAULT_PARSER_CONFIG.dynamicTokensEnabled,this.maxLookahead=(0,e.has)(u,"maxLookahead")?u.maxLookahead:r.DEFAULT_PARSER_CONFIG.maxLookahead,this.lookAheadFuncsCache=(0,e.isES2015MapSupported)()?new Map:[],(0,e.isES2015MapSupported)()?(this.getLaFuncFromCache=this.getLaFuncFromMap,this.setLaFuncCache=this.setLaFuncCacheUsingMap):(this.getLaFuncFromCache=this.getLaFuncFromObj,this.setLaFuncCache=this.setLaFuncUsingObj)},o.prototype.preComputeLookaheadFunctions=function(u){var s=this;(0,e.forEach)(u,function(c){s.TRACE_INIT(c.name+" Rule Lookahead",function(){var h=(0,i.collectMethods)(c),l=h.alternation,p=h.repetition,d=h.option,y=h.repetitionMandatory,f=h.repetitionMandatoryWithSeparator,v=h.repetitionWithSeparator;(0,e.forEach)(l,function(m){var E=m.idx===0?"":m.idx;s.TRACE_INIT(""+(0,i.getProductionDslName)(m)+E,function(){var g=(0,t.buildLookaheadFuncForOr)(m.idx,c,m.maxLookahead||s.maxLookahead,m.hasPredicates,s.dynamicTokensEnabled,s.lookAheadBuilderForAlternatives),T=(0,n.getKeyForAutomaticLookahead)(s.fullRuleNameToShort[c.name],n.OR_IDX,m.idx);s.setLaFuncCache(T,g)})}),(0,e.forEach)(p,function(m){s.computeLookaheadFunc(c,m.idx,n.MANY_IDX,t.PROD_TYPE.REPETITION,m.maxLookahead,(0,i.getProductionDslName)(m))}),(0,e.forEach)(d,function(m){s.computeLookaheadFunc(c,m.idx,n.OPTION_IDX,t.PROD_TYPE.OPTION,m.maxLookahead,(0,i.getProductionDslName)(m))}),(0,e.forEach)(y,function(m){s.computeLookaheadFunc(c,m.idx,n.AT_LEAST_ONE_IDX,t.PROD_TYPE.REPETITION_MANDATORY,m.maxLookahead,(0,i.getProductionDslName)(m))}),(0,e.forEach)(f,function(m){s.computeLookaheadFunc(c,m.idx,n.AT_LEAST_ONE_SEP_IDX,t.PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR,m.maxLookahead,(0,i.getProductionDslName)(m))}),(0,e.forEach)(v,function(m){s.computeLookaheadFunc(c,m.idx,n.MANY_SEP_IDX,t.PROD_TYPE.REPETITION_WITH_SEPARATOR,m.maxLookahead,(0,i.getProductionDslName)(m))})})})},o.prototype.computeLookaheadFunc=function(u,s,c,h,l,p){var d=this;this.TRACE_INIT(""+p+(s===0?"":s),function(){var y=(0,t.buildLookaheadFuncForOptionalProd)(s,u,l||d.maxLookahead,d.dynamicTokensEnabled,h,d.lookAheadBuilderForOptional),f=(0,n.getKeyForAutomaticLookahead)(d.fullRuleNameToShort[u.name],c,s);d.setLaFuncCache(f,y)})},o.prototype.lookAheadBuilderForOptional=function(u,s,c){return(0,t.buildSingleAlternativeLookaheadFunction)(u,s,c)},o.prototype.lookAheadBuilderForAlternatives=function(u,s,c,h){return(0,t.buildAlternativesLookAheadFunc)(u,s,c,h)},o.prototype.getKeyForAutomaticLookahead=function(u,s){var c=this.getLastExplicitRuleShortName();return(0,n.getKeyForAutomaticLookahead)(c,u,s)},o.prototype.getLaFuncFromCache=function(u){},o.prototype.getLaFuncFromMap=function(u){return this.lookAheadFuncsCache.get(u)},o.prototype.getLaFuncFromObj=function(u){return this.lookAheadFuncsCache[u]},o.prototype.setLaFuncCache=function(u,s){},o.prototype.setLaFuncCacheUsingMap=function(u,s){this.lookAheadFuncsCache.set(u,s)},o.prototype.setLaFuncUsingObj=function(u,s){this.lookAheadFuncsCache[u]=s},o}();return wt.LooksAhead=a,wt}var Mt={},xe={};Object.defineProperty(xe,"__esModule",{value:!0});xe.addNoneTerminalToCst=xe.addTerminalToCst=xe.setNodeLocationFull=xe.setNodeLocationOnlyOffset=void 0;function wc(t,e){isNaN(t.startOffset)===!0?(t.startOffset=e.startOffset,t.endOffset=e.endOffset):t.endOffset<e.endOffset&&(t.endOffset=e.endOffset)}xe.setNodeLocationOnlyOffset=wc;function Mc(t,e){isNaN(t.startOffset)===!0?(t.startOffset=e.startOffset,t.startColumn=e.startColumn,t.startLine=e.startLine,t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine):t.endOffset<e.endOffset&&(t.endOffset=e.endOffset,t.endColumn=e.endColumn,t.endLine=e.endLine)}xe.setNodeLocationFull=Mc;function Fc(t,e,r){t.children[r]===void 0?t.children[r]=[e]:t.children[r].push(e)}xe.addTerminalToCst=Fc;function Dc(t,e,r){t.children[e]===void 0?t.children[e]=[r]:t.children[e].push(r)}xe.addNoneTerminalToCst=Dc;var Do={},qe={};Object.defineProperty(qe,"__esModule",{value:!0});qe.defineNameProp=qe.functionName=qe.classNameFromInstance=void 0;var xc=N;function Uc(t){return xo(t.constructor)}qe.classNameFromInstance=Uc;var Ci="name";function xo(t){var e=t.name;return e||"anonymous"}qe.functionName=xo;function jc(t,e){var r=Object.getOwnPropertyDescriptor(t,Ci);return(0,xc.isUndefined)(r)||r.configurable?(Object.defineProperty(t,Ci,{enumerable:!1,configurable:!0,writable:!1,value:e}),!0):!1}qe.defineNameProp=jc;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.validateRedundantMethods=t.validateMissingCstMethods=t.validateVisitor=t.CstVisitorDefinitionError=t.createBaseVisitorConstructorWithDefaults=t.createBaseSemanticVisitorConstructor=t.defaultVisit=void 0;var e=N,r=qe;function n(l,p){for(var d=(0,e.keys)(l),y=d.length,f=0;f<y;f++)for(var v=d[f],m=l[v],E=m.length,g=0;g<E;g++){var T=m[g];T.tokenTypeIdx===void 0&&this[T.name](T.children,p)}}t.defaultVisit=n;function i(l,p){var d=function(){};(0,r.defineNameProp)(d,l+"BaseSemantics");var y={visit:function(f,v){if((0,e.isArray)(f)&&(f=f[0]),!(0,e.isUndefined)(f))return this[f.name](f.children,v)},validateVisitor:function(){var f=u(this,p);if(!(0,e.isEmpty)(f)){var v=(0,e.map)(f,function(m){return m.msg});throw Error("Errors Detected in CST Visitor <"+(0,r.functionName)(this.constructor)+`>:
	`+(""+v.join(`

`).replace(/\n/g,`
	`)))}}};return d.prototype=y,d.prototype.constructor=d,d._RULE_NAMES=p,d}t.createBaseSemanticVisitorConstructor=i;function a(l,p,d){var y=function(){};(0,r.defineNameProp)(y,l+"BaseSemanticsWithDefaults");var f=Object.create(d.prototype);return(0,e.forEach)(p,function(v){f[v]=n}),y.prototype=f,y.prototype.constructor=y,y}t.createBaseVisitorConstructorWithDefaults=a;var o;(function(l){l[l.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",l[l.MISSING_METHOD=1]="MISSING_METHOD"})(o=t.CstVisitorDefinitionError||(t.CstVisitorDefinitionError={}));function u(l,p){var d=s(l,p),y=h(l,p);return d.concat(y)}t.validateVisitor=u;function s(l,p){var d=(0,e.map)(p,function(y){if(!(0,e.isFunction)(l[y]))return{msg:"Missing visitor method: <"+y+"> on "+(0,r.functionName)(l.constructor)+" CST Visitor.",type:o.MISSING_METHOD,methodName:y}});return(0,e.compact)(d)}t.validateMissingCstMethods=s;var c=["constructor","visit","validateVisitor"];function h(l,p){var d=[];for(var y in l)(0,e.isFunction)(l[y])&&!(0,e.contains)(c,y)&&!(0,e.contains)(p,y)&&d.push({msg:"Redundant visitor method: <"+y+"> on "+(0,r.functionName)(l.constructor)+` CST Visitor
There is no Grammar Rule corresponding to this method's name.
`,type:o.REDUNDANT_METHOD,methodName:y});return d}t.validateRedundantMethods=h})(Do);var wi;function Bc(){if(wi)return Mt;wi=1,Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.TreeBuilder=void 0;var t=xe,e=N,r=Do,n=Ie(),i=function(){function a(){}return a.prototype.initTreeBuilder=function(o){if(this.CST_STACK=[],this.outputCst=o.outputCst,this.nodeLocationTracking=(0,e.has)(o,"nodeLocationTracking")?o.nodeLocationTracking:n.DEFAULT_PARSER_CONFIG.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=e.NOOP,this.cstFinallyStateUpdate=e.NOOP,this.cstPostTerminal=e.NOOP,this.cstPostNonTerminal=e.NOOP,this.cstPostRule=e.NOOP;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=t.setNodeLocationFull,this.setNodeLocationFromNode=t.setNodeLocationFull,this.cstPostRule=e.NOOP,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=e.NOOP,this.setNodeLocationFromNode=e.NOOP,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=t.setNodeLocationOnlyOffset,this.setNodeLocationFromNode=t.setNodeLocationOnlyOffset,this.cstPostRule=e.NOOP,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=e.NOOP,this.setNodeLocationFromNode=e.NOOP,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=e.NOOP,this.setNodeLocationFromNode=e.NOOP,this.cstPostRule=e.NOOP,this.setInitialNodeLocation=e.NOOP;else throw Error('Invalid <nodeLocationTracking> config option: "'+o.nodeLocationTracking+'"')},a.prototype.setInitialNodeLocationOnlyOffsetRecovery=function(o){o.location={startOffset:NaN,endOffset:NaN}},a.prototype.setInitialNodeLocationOnlyOffsetRegular=function(o){o.location={startOffset:this.LA(1).startOffset,endOffset:NaN}},a.prototype.setInitialNodeLocationFullRecovery=function(o){o.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}},a.prototype.setInitialNodeLocationFullRegular=function(o){var u=this.LA(1);o.location={startOffset:u.startOffset,startLine:u.startLine,startColumn:u.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}},a.prototype.cstInvocationStateUpdate=function(o,u){var s={name:o,children:{}};this.setInitialNodeLocation(s),this.CST_STACK.push(s)},a.prototype.cstFinallyStateUpdate=function(){this.CST_STACK.pop()},a.prototype.cstPostRuleFull=function(o){var u=this.LA(0),s=o.location;s.startOffset<=u.startOffset?(s.endOffset=u.endOffset,s.endLine=u.endLine,s.endColumn=u.endColumn):(s.startOffset=NaN,s.startLine=NaN,s.startColumn=NaN)},a.prototype.cstPostRuleOnlyOffset=function(o){var u=this.LA(0),s=o.location;s.startOffset<=u.startOffset?s.endOffset=u.endOffset:s.startOffset=NaN},a.prototype.cstPostTerminal=function(o,u){var s=this.CST_STACK[this.CST_STACK.length-1];(0,t.addTerminalToCst)(s,u,o),this.setNodeLocationFromToken(s.location,u)},a.prototype.cstPostNonTerminal=function(o,u){var s=this.CST_STACK[this.CST_STACK.length-1];(0,t.addNoneTerminalToCst)(s,u,o),this.setNodeLocationFromNode(s.location,o.location)},a.prototype.getBaseCstVisitorConstructor=function(){if((0,e.isUndefined)(this.baseCstVisitorConstructor)){var o=(0,r.createBaseSemanticVisitorConstructor)(this.className,(0,e.keys)(this.gastProductionsCache));return this.baseCstVisitorConstructor=o,o}return this.baseCstVisitorConstructor},a.prototype.getBaseCstVisitorConstructorWithDefaults=function(){if((0,e.isUndefined)(this.baseCstVisitorWithDefaultsConstructor)){var o=(0,r.createBaseVisitorConstructorWithDefaults)(this.className,(0,e.keys)(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=o,o}return this.baseCstVisitorWithDefaultsConstructor},a.prototype.getLastExplicitRuleShortName=function(){var o=this.RULE_STACK;return o[o.length-1]},a.prototype.getPreviousExplicitRuleShortName=function(){var o=this.RULE_STACK;return o[o.length-2]},a.prototype.getLastExplicitRuleOccurrenceIndex=function(){var o=this.RULE_OCCURRENCE_STACK;return o[o.length-1]},a}();return Mt.TreeBuilder=i,Mt}var Ft={},Mi;function Vc(){if(Mi)return Ft;Mi=1,Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.LexerAdapter=void 0;var t=Ie(),e=function(){function r(){}return r.prototype.initLexerAdapter=function(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1},Object.defineProperty(r.prototype,"input",{get:function(){return this.tokVector},set:function(n){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=n,this.tokVectorLength=n.length},enumerable:!1,configurable:!0}),r.prototype.SKIP_TOKEN=function(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):t.END_OF_FILE},r.prototype.LA=function(n){var i=this.currIdx+n;return i<0||this.tokVectorLength<=i?t.END_OF_FILE:this.tokVector[i]},r.prototype.consumeToken=function(){this.currIdx++},r.prototype.exportLexerState=function(){return this.currIdx},r.prototype.importLexerState=function(n){this.currIdx=n},r.prototype.resetLexerState=function(){this.currIdx=-1},r.prototype.moveToTerminatedState=function(){this.currIdx=this.tokVector.length-1},r.prototype.getLexerPosition=function(){return this.exportLexerState()},r}();return Ft.LexerAdapter=e,Ft}var Dt={},Fi;function qc(){if(Fi)return Dt;Fi=1,Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.RecognizerApi=void 0;var t=N,e=Re,r=Ie(),n=or,i=Io(),a=X,o=function(){function u(){}return u.prototype.ACTION=function(s){return s.call(this)},u.prototype.consume=function(s,c,h){return this.consumeInternal(c,s,h)},u.prototype.subrule=function(s,c,h){return this.subruleInternal(c,s,h)},u.prototype.option=function(s,c){return this.optionInternal(c,s)},u.prototype.or=function(s,c){return this.orInternal(c,s)},u.prototype.many=function(s,c){return this.manyInternal(s,c)},u.prototype.atLeastOne=function(s,c){return this.atLeastOneInternal(s,c)},u.prototype.CONSUME=function(s,c){return this.consumeInternal(s,0,c)},u.prototype.CONSUME1=function(s,c){return this.consumeInternal(s,1,c)},u.prototype.CONSUME2=function(s,c){return this.consumeInternal(s,2,c)},u.prototype.CONSUME3=function(s,c){return this.consumeInternal(s,3,c)},u.prototype.CONSUME4=function(s,c){return this.consumeInternal(s,4,c)},u.prototype.CONSUME5=function(s,c){return this.consumeInternal(s,5,c)},u.prototype.CONSUME6=function(s,c){return this.consumeInternal(s,6,c)},u.prototype.CONSUME7=function(s,c){return this.consumeInternal(s,7,c)},u.prototype.CONSUME8=function(s,c){return this.consumeInternal(s,8,c)},u.prototype.CONSUME9=function(s,c){return this.consumeInternal(s,9,c)},u.prototype.SUBRULE=function(s,c){return this.subruleInternal(s,0,c)},u.prototype.SUBRULE1=function(s,c){return this.subruleInternal(s,1,c)},u.prototype.SUBRULE2=function(s,c){return this.subruleInternal(s,2,c)},u.prototype.SUBRULE3=function(s,c){return this.subruleInternal(s,3,c)},u.prototype.SUBRULE4=function(s,c){return this.subruleInternal(s,4,c)},u.prototype.SUBRULE5=function(s,c){return this.subruleInternal(s,5,c)},u.prototype.SUBRULE6=function(s,c){return this.subruleInternal(s,6,c)},u.prototype.SUBRULE7=function(s,c){return this.subruleInternal(s,7,c)},u.prototype.SUBRULE8=function(s,c){return this.subruleInternal(s,8,c)},u.prototype.SUBRULE9=function(s,c){return this.subruleInternal(s,9,c)},u.prototype.OPTION=function(s){return this.optionInternal(s,0)},u.prototype.OPTION1=function(s){return this.optionInternal(s,1)},u.prototype.OPTION2=function(s){return this.optionInternal(s,2)},u.prototype.OPTION3=function(s){return this.optionInternal(s,3)},u.prototype.OPTION4=function(s){return this.optionInternal(s,4)},u.prototype.OPTION5=function(s){return this.optionInternal(s,5)},u.prototype.OPTION6=function(s){return this.optionInternal(s,6)},u.prototype.OPTION7=function(s){return this.optionInternal(s,7)},u.prototype.OPTION8=function(s){return this.optionInternal(s,8)},u.prototype.OPTION9=function(s){return this.optionInternal(s,9)},u.prototype.OR=function(s){return this.orInternal(s,0)},u.prototype.OR1=function(s){return this.orInternal(s,1)},u.prototype.OR2=function(s){return this.orInternal(s,2)},u.prototype.OR3=function(s){return this.orInternal(s,3)},u.prototype.OR4=function(s){return this.orInternal(s,4)},u.prototype.OR5=function(s){return this.orInternal(s,5)},u.prototype.OR6=function(s){return this.orInternal(s,6)},u.prototype.OR7=function(s){return this.orInternal(s,7)},u.prototype.OR8=function(s){return this.orInternal(s,8)},u.prototype.OR9=function(s){return this.orInternal(s,9)},u.prototype.MANY=function(s){this.manyInternal(0,s)},u.prototype.MANY1=function(s){this.manyInternal(1,s)},u.prototype.MANY2=function(s){this.manyInternal(2,s)},u.prototype.MANY3=function(s){this.manyInternal(3,s)},u.prototype.MANY4=function(s){this.manyInternal(4,s)},u.prototype.MANY5=function(s){this.manyInternal(5,s)},u.prototype.MANY6=function(s){this.manyInternal(6,s)},u.prototype.MANY7=function(s){this.manyInternal(7,s)},u.prototype.MANY8=function(s){this.manyInternal(8,s)},u.prototype.MANY9=function(s){this.manyInternal(9,s)},u.prototype.MANY_SEP=function(s){this.manySepFirstInternal(0,s)},u.prototype.MANY_SEP1=function(s){this.manySepFirstInternal(1,s)},u.prototype.MANY_SEP2=function(s){this.manySepFirstInternal(2,s)},u.prototype.MANY_SEP3=function(s){this.manySepFirstInternal(3,s)},u.prototype.MANY_SEP4=function(s){this.manySepFirstInternal(4,s)},u.prototype.MANY_SEP5=function(s){this.manySepFirstInternal(5,s)},u.prototype.MANY_SEP6=function(s){this.manySepFirstInternal(6,s)},u.prototype.MANY_SEP7=function(s){this.manySepFirstInternal(7,s)},u.prototype.MANY_SEP8=function(s){this.manySepFirstInternal(8,s)},u.prototype.MANY_SEP9=function(s){this.manySepFirstInternal(9,s)},u.prototype.AT_LEAST_ONE=function(s){this.atLeastOneInternal(0,s)},u.prototype.AT_LEAST_ONE1=function(s){return this.atLeastOneInternal(1,s)},u.prototype.AT_LEAST_ONE2=function(s){this.atLeastOneInternal(2,s)},u.prototype.AT_LEAST_ONE3=function(s){this.atLeastOneInternal(3,s)},u.prototype.AT_LEAST_ONE4=function(s){this.atLeastOneInternal(4,s)},u.prototype.AT_LEAST_ONE5=function(s){this.atLeastOneInternal(5,s)},u.prototype.AT_LEAST_ONE6=function(s){this.atLeastOneInternal(6,s)},u.prototype.AT_LEAST_ONE7=function(s){this.atLeastOneInternal(7,s)},u.prototype.AT_LEAST_ONE8=function(s){this.atLeastOneInternal(8,s)},u.prototype.AT_LEAST_ONE9=function(s){this.atLeastOneInternal(9,s)},u.prototype.AT_LEAST_ONE_SEP=function(s){this.atLeastOneSepFirstInternal(0,s)},u.prototype.AT_LEAST_ONE_SEP1=function(s){this.atLeastOneSepFirstInternal(1,s)},u.prototype.AT_LEAST_ONE_SEP2=function(s){this.atLeastOneSepFirstInternal(2,s)},u.prototype.AT_LEAST_ONE_SEP3=function(s){this.atLeastOneSepFirstInternal(3,s)},u.prototype.AT_LEAST_ONE_SEP4=function(s){this.atLeastOneSepFirstInternal(4,s)},u.prototype.AT_LEAST_ONE_SEP5=function(s){this.atLeastOneSepFirstInternal(5,s)},u.prototype.AT_LEAST_ONE_SEP6=function(s){this.atLeastOneSepFirstInternal(6,s)},u.prototype.AT_LEAST_ONE_SEP7=function(s){this.atLeastOneSepFirstInternal(7,s)},u.prototype.AT_LEAST_ONE_SEP8=function(s){this.atLeastOneSepFirstInternal(8,s)},u.prototype.AT_LEAST_ONE_SEP9=function(s){this.atLeastOneSepFirstInternal(9,s)},u.prototype.RULE=function(s,c,h){if(h===void 0&&(h=r.DEFAULT_RULE_CONFIG),(0,t.contains)(this.definedRulesNames,s)){var l=n.defaultGrammarValidatorErrorProvider.buildDuplicateRuleNameError({topLevelRule:s,grammarName:this.className}),p={message:l,type:r.ParserDefinitionErrorType.DUPLICATE_RULE_NAME,ruleName:s};this.definitionErrors.push(p)}this.definedRulesNames.push(s);var d=this.defineRule(s,c,h);return this[s]=d,d},u.prototype.OVERRIDE_RULE=function(s,c,h){h===void 0&&(h=r.DEFAULT_RULE_CONFIG);var l=[];l=l.concat((0,i.validateRuleIsOverridden)(s,this.definedRulesNames,this.className)),this.definitionErrors=this.definitionErrors.concat(l);var p=this.defineRule(s,c,h);return this[s]=p,p},u.prototype.BACKTRACK=function(s,c){return function(){this.isBackTrackingStack.push(1);var h=this.saveRecogState();try{return s.apply(this,c),!0}catch(l){if((0,e.isRecognitionException)(l))return!1;throw l}finally{this.reloadRecogState(h),this.isBackTrackingStack.pop()}}},u.prototype.getGAstProductions=function(){return this.gastProductionsCache},u.prototype.getSerializedGastProductions=function(){return(0,a.serializeGrammar)((0,t.values)(this.gastProductionsCache))},u}();return Dt.RecognizerApi=o,Dt}var xt={},Di;function Wc(){if(Di)return xt;Di=1,Object.defineProperty(xt,"__esModule",{value:!0}),xt.RecognizerEngine=void 0;var t=N,e=wr,r=Re,n=sr,i=ve,a=Ie(),o=Fo(),u=nt,s=Ct,c=qe,h=function(){function l(){}return l.prototype.initRecognizerEngine=function(p,d){if(this.className=(0,c.classNameFromInstance)(this),this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=s.tokenStructuredMatcherNoCategories,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},(0,t.has)(d,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if((0,t.isArray)(p)){if((0,t.isEmpty)(p))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof p[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if((0,t.isArray)(p))this.tokensMap=(0,t.reduce)(p,function(m,E){return m[E.name]=E,m},{});else if((0,t.has)(p,"modes")&&(0,t.every)((0,t.flatten)((0,t.values)(p.modes)),s.isTokenType)){var y=(0,t.flatten)((0,t.values)(p.modes)),f=(0,t.uniq)(y);this.tokensMap=(0,t.reduce)(f,function(m,E){return m[E.name]=E,m},{})}else if((0,t.isObject)(p))this.tokensMap=(0,t.cloneObj)(p);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=u.EOF;var v=(0,t.every)((0,t.values)(p),function(m){return(0,t.isEmpty)(m.categoryMatches)});this.tokenMatcher=v?s.tokenStructuredMatcherNoCategories:s.tokenStructuredMatcher,(0,s.augmentTokenTypes)((0,t.values)(this.tokensMap))},l.prototype.defineRule=function(p,d,y){if(this.selfAnalysisDone)throw Error("Grammar rule <"+p+`> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);var f=(0,t.has)(y,"resyncEnabled")?y.resyncEnabled:a.DEFAULT_RULE_CONFIG.resyncEnabled,v=(0,t.has)(y,"recoveryValueFunc")?y.recoveryValueFunc:a.DEFAULT_RULE_CONFIG.recoveryValueFunc,m=this.ruleShortNameIdx<<e.BITS_FOR_METHOD_TYPE+e.BITS_FOR_OCCURRENCE_IDX;this.ruleShortNameIdx++,this.shortRuleNameToFull[m]=p,this.fullRuleNameToShort[p]=m;function E(L){try{if(this.outputCst===!0){d.apply(this,L);var A=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(A),A}else return d.apply(this,L)}catch(b){return this.invokeRuleCatch(b,f,v)}finally{this.ruleFinallyStateUpdate()}}var g=function(L,A){return L===void 0&&(L=0),this.ruleInvocationStateUpdate(m,p,L),E.call(this,A)},T="ruleName";return g[T]=p,g.originalGrammarAction=d,g},l.prototype.invokeRuleCatch=function(p,d,y){var f=this.RULE_STACK.length===1,v=d&&!this.isBackTracking()&&this.recoveryEnabled;if((0,r.isRecognitionException)(p)){var m=p;if(v){var E=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(E))if(m.resyncedTokens=this.reSyncTo(E),this.outputCst){var g=this.CST_STACK[this.CST_STACK.length-1];return g.recoveredNode=!0,g}else return y();else{if(this.outputCst){var g=this.CST_STACK[this.CST_STACK.length-1];g.recoveredNode=!0,m.partialCstResult=g}throw m}}else{if(f)return this.moveToTerminatedState(),y();throw m}}else throw p},l.prototype.optionInternal=function(p,d){var y=this.getKeyForAutomaticLookahead(e.OPTION_IDX,d);return this.optionInternalLogic(p,d,y)},l.prototype.optionInternalLogic=function(p,d,y){var f=this,v=this.getLaFuncFromCache(y),m,E;if(p.DEF!==void 0){if(m=p.DEF,E=p.GATE,E!==void 0){var g=v;v=function(){return E.call(f)&&g.call(f)}}}else m=p;if(v.call(this)===!0)return m.call(this)},l.prototype.atLeastOneInternal=function(p,d){var y=this.getKeyForAutomaticLookahead(e.AT_LEAST_ONE_IDX,p);return this.atLeastOneInternalLogic(p,d,y)},l.prototype.atLeastOneInternalLogic=function(p,d,y){var f=this,v=this.getLaFuncFromCache(y),m,E;if(d.DEF!==void 0){if(m=d.DEF,E=d.GATE,E!==void 0){var g=v;v=function(){return E.call(f)&&g.call(f)}}}else m=d;if(v.call(this)===!0)for(var T=this.doSingleRepetition(m);v.call(this)===!0&&T===!0;)T=this.doSingleRepetition(m);else throw this.raiseEarlyExitException(p,n.PROD_TYPE.REPETITION_MANDATORY,d.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[p,d],v,e.AT_LEAST_ONE_IDX,p,i.NextTerminalAfterAtLeastOneWalker)},l.prototype.atLeastOneSepFirstInternal=function(p,d){var y=this.getKeyForAutomaticLookahead(e.AT_LEAST_ONE_SEP_IDX,p);this.atLeastOneSepFirstInternalLogic(p,d,y)},l.prototype.atLeastOneSepFirstInternalLogic=function(p,d,y){var f=this,v=d.DEF,m=d.SEP,E=this.getLaFuncFromCache(y);if(E.call(this)===!0){v.call(this);for(var g=function(){return f.tokenMatcher(f.LA(1),m)};this.tokenMatcher(this.LA(1),m)===!0;)this.CONSUME(m),v.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[p,m,g,v,i.NextTerminalAfterAtLeastOneSepWalker],g,e.AT_LEAST_ONE_SEP_IDX,p,i.NextTerminalAfterAtLeastOneSepWalker)}else throw this.raiseEarlyExitException(p,n.PROD_TYPE.REPETITION_MANDATORY_WITH_SEPARATOR,d.ERR_MSG)},l.prototype.manyInternal=function(p,d){var y=this.getKeyForAutomaticLookahead(e.MANY_IDX,p);return this.manyInternalLogic(p,d,y)},l.prototype.manyInternalLogic=function(p,d,y){var f=this,v=this.getLaFuncFromCache(y),m,E;if(d.DEF!==void 0){if(m=d.DEF,E=d.GATE,E!==void 0){var g=v;v=function(){return E.call(f)&&g.call(f)}}}else m=d;for(var T=!0;v.call(this)===!0&&T===!0;)T=this.doSingleRepetition(m);this.attemptInRepetitionRecovery(this.manyInternal,[p,d],v,e.MANY_IDX,p,i.NextTerminalAfterManyWalker,T)},l.prototype.manySepFirstInternal=function(p,d){var y=this.getKeyForAutomaticLookahead(e.MANY_SEP_IDX,p);this.manySepFirstInternalLogic(p,d,y)},l.prototype.manySepFirstInternalLogic=function(p,d,y){var f=this,v=d.DEF,m=d.SEP,E=this.getLaFuncFromCache(y);if(E.call(this)===!0){v.call(this);for(var g=function(){return f.tokenMatcher(f.LA(1),m)};this.tokenMatcher(this.LA(1),m)===!0;)this.CONSUME(m),v.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[p,m,g,v,i.NextTerminalAfterManySepWalker],g,e.MANY_SEP_IDX,p,i.NextTerminalAfterManySepWalker)}},l.prototype.repetitionSepSecondInternal=function(p,d,y,f,v){for(;y();)this.CONSUME(d),f.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[p,d,y,f,v],y,e.AT_LEAST_ONE_SEP_IDX,p,v)},l.prototype.doSingleRepetition=function(p){var d=this.getLexerPosition();p.call(this);var y=this.getLexerPosition();return y>d},l.prototype.orInternal=function(p,d){var y=this.getKeyForAutomaticLookahead(e.OR_IDX,d),f=(0,t.isArray)(p)?p:p.DEF,v=this.getLaFuncFromCache(y),m=v.call(this,f);if(m!==void 0){var E=f[m];return E.ALT.call(this)}this.raiseNoAltException(d,p.ERR_MSG)},l.prototype.ruleFinallyStateUpdate=function(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){var p=this.LA(1),d=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:p,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new r.NotAllInputParsedException(d,p))}},l.prototype.subruleInternal=function(p,d,y){var f;try{var v=y!==void 0?y.ARGS:void 0;return f=p.call(this,d,v),this.cstPostNonTerminal(f,y!==void 0&&y.LABEL!==void 0?y.LABEL:p.ruleName),f}catch(m){this.subruleInternalError(m,y,p.ruleName)}},l.prototype.subruleInternalError=function(p,d,y){throw(0,r.isRecognitionException)(p)&&p.partialCstResult!==void 0&&(this.cstPostNonTerminal(p.partialCstResult,d!==void 0&&d.LABEL!==void 0?d.LABEL:y),delete p.partialCstResult),p},l.prototype.consumeInternal=function(p,d,y){var f;try{var v=this.LA(1);this.tokenMatcher(v,p)===!0?(this.consumeToken(),f=v):this.consumeInternalError(p,v,y)}catch(m){f=this.consumeInternalRecovery(p,d,m)}return this.cstPostTerminal(y!==void 0&&y.LABEL!==void 0?y.LABEL:p.name,f),f},l.prototype.consumeInternalError=function(p,d,y){var f,v=this.LA(0);throw y!==void 0&&y.ERR_MSG?f=y.ERR_MSG:f=this.errorMessageProvider.buildMismatchTokenMessage({expected:p,actual:d,previous:v,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new r.MismatchedTokenException(f,d,v))},l.prototype.consumeInternalRecovery=function(p,d,y){if(this.recoveryEnabled&&y.name==="MismatchedTokenException"&&!this.isBackTracking()){var f=this.getFollowsForInRuleRecovery(p,d);try{return this.tryInRuleRecovery(p,f)}catch(v){throw v.name===o.IN_RULE_RECOVERY_EXCEPTION?y:v}}else throw y},l.prototype.saveRecogState=function(){var p=this.errors,d=(0,t.cloneArr)(this.RULE_STACK);return{errors:p,lexerState:this.exportLexerState(),RULE_STACK:d,CST_STACK:this.CST_STACK}},l.prototype.reloadRecogState=function(p){this.errors=p.errors,this.importLexerState(p.lexerState),this.RULE_STACK=p.RULE_STACK},l.prototype.ruleInvocationStateUpdate=function(p,d,y){this.RULE_OCCURRENCE_STACK.push(y),this.RULE_STACK.push(p),this.cstInvocationStateUpdate(d,p)},l.prototype.isBackTracking=function(){return this.isBackTrackingStack.length!==0},l.prototype.getCurrRuleFullName=function(){var p=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[p]},l.prototype.shortRuleNameToFullName=function(p){return this.shortRuleNameToFull[p]},l.prototype.isAtEndOfInput=function(){return this.tokenMatcher(this.LA(1),u.EOF)},l.prototype.reset=function(){this.resetLexerState(),this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]},l}();return xt.RecognizerEngine=h,xt}var Ut={},xi;function Gc(){if(xi)return Ut;xi=1,Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.ErrorHandler=void 0;var t=Re,e=N,r=sr,n=Ie(),i=function(){function a(){}return a.prototype.initErrorHandler=function(o){this._errors=[],this.errorMessageProvider=(0,e.has)(o,"errorMessageProvider")?o.errorMessageProvider:n.DEFAULT_PARSER_CONFIG.errorMessageProvider},a.prototype.SAVE_ERROR=function(o){if((0,t.isRecognitionException)(o))return o.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:(0,e.cloneArr)(this.RULE_OCCURRENCE_STACK)},this._errors.push(o),o;throw Error("Trying to save an Error which is not a RecognitionException")},Object.defineProperty(a.prototype,"errors",{get:function(){return(0,e.cloneArr)(this._errors)},set:function(o){this._errors=o},enumerable:!1,configurable:!0}),a.prototype.raiseEarlyExitException=function(o,u,s){for(var c=this.getCurrRuleFullName(),h=this.getGAstProductions()[c],l=(0,r.getLookaheadPathsForOptionalProd)(o,h,u,this.maxLookahead),p=l[0],d=[],y=1;y<=this.maxLookahead;y++)d.push(this.LA(y));var f=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:p,actual:d,previous:this.LA(0),customUserDescription:s,ruleName:c});throw this.SAVE_ERROR(new t.EarlyExitException(f,this.LA(1),this.LA(0)))},a.prototype.raiseNoAltException=function(o,u){for(var s=this.getCurrRuleFullName(),c=this.getGAstProductions()[s],h=(0,r.getLookaheadPathsForOr)(o,c,this.maxLookahead),l=[],p=1;p<=this.maxLookahead;p++)l.push(this.LA(p));var d=this.LA(0),y=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:h,actual:l,previous:d,customUserDescription:u,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new t.NoViableAltException(y,this.LA(1),d))},a}();return Ut.ErrorHandler=i,Ut}var Mr={};Object.defineProperty(Mr,"__esModule",{value:!0});Mr.ContentAssist=void 0;var Ui=ve,ji=N,Qc=function(){function t(){}return t.prototype.initContentAssist=function(){},t.prototype.computeContentAssist=function(e,r){var n=this.gastProductionsCache[e];if((0,ji.isUndefined)(n))throw Error("Rule ->"+e+"<- does not exist in this grammar.");return(0,Ui.nextPossibleTokensAfter)([n],r,this.tokenMatcher,this.maxLookahead)},t.prototype.getNextPossibleTokenTypes=function(e){var r=(0,ji.first)(e.ruleStack),n=this.getGAstProductions(),i=n[r],a=new Ui.NextAfterTokenWalker(i,e).startWalking();return a},t}();Mr.ContentAssist=Qc;var jt={},Bi;function zc(){if(Bi)return jt;Bi=1,Object.defineProperty(jt,"__esModule",{value:!0}),jt.GastRecorder=void 0;var t=N,e=X,r=Pr(),n=Ct,i=nt,a=Ie(),o=wr,u={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(u);var s=!0,c=Math.pow(2,o.BITS_FOR_OCCURRENCE_IDX)-1,h=(0,i.createToken)({name:"RECORDING_PHASE_TOKEN",pattern:r.Lexer.NA});(0,n.augmentTokenTypes)([h]);var l=(0,i.createTokenInstance)(h,`This IToken indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1);Object.freeze(l);var p={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,children:{}},d=function(){function E(){}return E.prototype.initGastRecorder=function(g){this.recordingProdStack=[],this.RECORDING_PHASE=!1},E.prototype.enableRecording=function(){var g=this;this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",function(){for(var T=function(A){var b=A>0?A:"";g["CONSUME"+b]=function(I,R){return this.consumeInternalRecord(I,A,R)},g["SUBRULE"+b]=function(I,R){return this.subruleInternalRecord(I,A,R)},g["OPTION"+b]=function(I){return this.optionInternalRecord(I,A)},g["OR"+b]=function(I){return this.orInternalRecord(I,A)},g["MANY"+b]=function(I){this.manyInternalRecord(A,I)},g["MANY_SEP"+b]=function(I){this.manySepFirstInternalRecord(A,I)},g["AT_LEAST_ONE"+b]=function(I){this.atLeastOneInternalRecord(A,I)},g["AT_LEAST_ONE_SEP"+b]=function(I){this.atLeastOneSepFirstInternalRecord(A,I)}},L=0;L<10;L++)T(L);g.consume=function(A,b,I){return this.consumeInternalRecord(b,A,I)},g.subrule=function(A,b,I){return this.subruleInternalRecord(b,A,I)},g.option=function(A,b){return this.optionInternalRecord(b,A)},g.or=function(A,b){return this.orInternalRecord(b,A)},g.many=function(A,b){this.manyInternalRecord(A,b)},g.atLeastOne=function(A,b){this.atLeastOneInternalRecord(A,b)},g.ACTION=g.ACTION_RECORD,g.BACKTRACK=g.BACKTRACK_RECORD,g.LA=g.LA_RECORD})},E.prototype.disableRecording=function(){var g=this;this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",function(){for(var T=0;T<10;T++){var L=T>0?T:"";delete g["CONSUME"+L],delete g["SUBRULE"+L],delete g["OPTION"+L],delete g["OR"+L],delete g["MANY"+L],delete g["MANY_SEP"+L],delete g["AT_LEAST_ONE"+L],delete g["AT_LEAST_ONE_SEP"+L]}delete g.consume,delete g.subrule,delete g.option,delete g.or,delete g.many,delete g.atLeastOne,delete g.ACTION,delete g.BACKTRACK,delete g.LA})},E.prototype.ACTION_RECORD=function(g){},E.prototype.BACKTRACK_RECORD=function(g,T){return function(){return!0}},E.prototype.LA_RECORD=function(g){return a.END_OF_FILE},E.prototype.topLevelRuleRecord=function(g,T){try{var L=new e.Rule({definition:[],name:g});return L.name=g,this.recordingProdStack.push(L),T.call(this),this.recordingProdStack.pop(),L}catch(A){if(A.KNOWN_RECORDER_ERROR!==!0)try{A.message=A.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https://chevrotain.io/docs/guide/internals.html#grammar-recording`}catch{throw A}throw A}},E.prototype.optionInternalRecord=function(g,T){return y.call(this,e.Option,g,T)},E.prototype.atLeastOneInternalRecord=function(g,T){y.call(this,e.RepetitionMandatory,T,g)},E.prototype.atLeastOneSepFirstInternalRecord=function(g,T){y.call(this,e.RepetitionMandatoryWithSeparator,T,g,s)},E.prototype.manyInternalRecord=function(g,T){y.call(this,e.Repetition,T,g)},E.prototype.manySepFirstInternalRecord=function(g,T){y.call(this,e.RepetitionWithSeparator,T,g,s)},E.prototype.orInternalRecord=function(g,T){return f.call(this,g,T)},E.prototype.subruleInternalRecord=function(g,T,L){if(m(T),!g||(0,t.has)(g,"ruleName")===!1){var A=new Error("<SUBRULE"+v(T)+"> argument is invalid"+(" expecting a Parser method reference but got: <"+JSON.stringify(g)+">")+(`
 inside top level rule: <`+this.recordingProdStack[0].name+">"));throw A.KNOWN_RECORDER_ERROR=!0,A}var b=(0,t.peek)(this.recordingProdStack),I=g.ruleName,R=new e.NonTerminal({idx:T,nonTerminalName:I,label:L==null?void 0:L.LABEL,referencedRule:void 0});return b.definition.push(R),this.outputCst?p:u},E.prototype.consumeInternalRecord=function(g,T,L){if(m(T),!(0,n.hasShortKeyProperty)(g)){var A=new Error("<CONSUME"+v(T)+"> argument is invalid"+(" expecting a TokenType reference but got: <"+JSON.stringify(g)+">")+(`
 inside top level rule: <`+this.recordingProdStack[0].name+">"));throw A.KNOWN_RECORDER_ERROR=!0,A}var b=(0,t.peek)(this.recordingProdStack),I=new e.Terminal({idx:T,terminalType:g,label:L==null?void 0:L.LABEL});return b.definition.push(I),l},E}();jt.GastRecorder=d;function y(E,g,T,L){L===void 0&&(L=!1),m(T);var A=(0,t.peek)(this.recordingProdStack),b=(0,t.isFunction)(g)?g:g.DEF,I=new E({definition:[],idx:T});return L&&(I.separator=g.SEP),(0,t.has)(g,"MAX_LOOKAHEAD")&&(I.maxLookahead=g.MAX_LOOKAHEAD),this.recordingProdStack.push(I),b.call(this),A.definition.push(I),this.recordingProdStack.pop(),u}function f(E,g){var T=this;m(g);var L=(0,t.peek)(this.recordingProdStack),A=(0,t.isArray)(E)===!1,b=A===!1?E:E.DEF,I=new e.Alternation({definition:[],idx:g,ignoreAmbiguities:A&&E.IGNORE_AMBIGUITIES===!0});(0,t.has)(E,"MAX_LOOKAHEAD")&&(I.maxLookahead=E.MAX_LOOKAHEAD);var R=(0,t.some)(b,function(k){return(0,t.isFunction)(k.GATE)});return I.hasPredicates=R,L.definition.push(I),(0,t.forEach)(b,function(k){var _=new e.Alternative({definition:[]});I.definition.push(_),(0,t.has)(k,"IGNORE_AMBIGUITIES")?_.ignoreAmbiguities=k.IGNORE_AMBIGUITIES:(0,t.has)(k,"GATE")&&(_.ignoreAmbiguities=!0),T.recordingProdStack.push(_),k.ALT.call(T),T.recordingProdStack.pop()}),u}function v(E){return E===0?"":""+E}function m(E){if(E<0||E>c){var g=new Error("Invalid DSL Method idx value: <"+E+`>
	`+("Idx value must be a none negative value smaller than "+(c+1)));throw g.KNOWN_RECORDER_ERROR=!0,g}}return jt}var Bt={},Vi;function Kc(){if(Vi)return Bt;Vi=1,Object.defineProperty(Bt,"__esModule",{value:!0}),Bt.PerformanceTracer=void 0;var t=N,e=Ie(),r=function(){function n(){}return n.prototype.initPerformanceTracer=function(i){if((0,t.has)(i,"traceInitPerf")){var a=i.traceInitPerf,o=typeof a=="number";this.traceInitMaxIdent=o?a:1/0,this.traceInitPerf=o?a>0:a}else this.traceInitMaxIdent=0,this.traceInitPerf=e.DEFAULT_PARSER_CONFIG.traceInitPerf;this.traceInitIndent=-1},n.prototype.TRACE_INIT=function(i,a){if(this.traceInitPerf===!0){this.traceInitIndent++;var o=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(o+"--> <"+i+">");var u=(0,t.timer)(a),s=u.time,c=u.value,h=s>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&h(o+"<-- <"+i+"> time: "+s+"ms"),this.traceInitIndent--,c}else return a()},n}();return Bt.PerformanceTracer=r,Bt}var Fr={};Object.defineProperty(Fr,"__esModule",{value:!0});Fr.applyMixins=void 0;function Hc(t,e){e.forEach(function(r){var n=r.prototype;Object.getOwnPropertyNames(n).forEach(function(i){if(i!=="constructor"){var a=Object.getOwnPropertyDescriptor(n,i);a&&(a.get||a.set)?Object.defineProperty(t.prototype,i,a):t.prototype[i]=r.prototype[i]}})})}Fr.applyMixins=Hc;var qi;function Ie(){return qi||(qi=1,function(t){var e=he&&he.__extends||function(){var A=function(b,I){return A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,k){R.__proto__=k}||function(R,k){for(var _ in k)Object.prototype.hasOwnProperty.call(k,_)&&(R[_]=k[_])},A(b,I)};return function(b,I){if(typeof I!="function"&&I!==null)throw new TypeError("Class extends value "+String(I)+" is not a constructor or null");A(b,I);function R(){this.constructor=b}b.prototype=I===null?Object.create(I):(R.prototype=I.prototype,new R)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.EmbeddedActionsParser=t.CstParser=t.Parser=t.EMPTY_ALT=t.ParserDefinitionErrorType=t.DEFAULT_RULE_CONFIG=t.DEFAULT_PARSER_CONFIG=t.END_OF_FILE=void 0;var r=N,n=De,i=nt,a=or,o=Rc(),u=Fo(),s=Cc(),c=Bc(),h=Vc(),l=qc(),p=Wc(),d=Gc(),y=Mr,f=zc(),v=Kc(),m=Fr;t.END_OF_FILE=(0,i.createTokenInstance)(i.EOF,"",NaN,NaN,NaN,NaN,NaN,NaN),Object.freeze(t.END_OF_FILE),t.DEFAULT_PARSER_CONFIG=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:a.defaultParserErrorProvider,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),t.DEFAULT_RULE_CONFIG=Object.freeze({recoveryValueFunc:function(){},resyncEnabled:!0}),function(A){A[A.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",A[A.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",A[A.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",A[A.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",A[A.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",A[A.LEFT_RECURSION=5]="LEFT_RECURSION",A[A.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",A[A.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",A[A.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",A[A.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",A[A.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",A[A.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",A[A.TOO_MANY_ALTS=12]="TOO_MANY_ALTS"}(t.ParserDefinitionErrorType||(t.ParserDefinitionErrorType={}));function E(A){return A===void 0&&(A=void 0),function(){return A}}t.EMPTY_ALT=E;var g=function(){function A(b,I){this.definitionErrors=[],this.selfAnalysisDone=!1;var R=this;if(R.initErrorHandler(I),R.initLexerAdapter(),R.initLooksAhead(I),R.initRecognizerEngine(b,I),R.initRecoverable(I),R.initTreeBuilder(I),R.initContentAssist(),R.initGastRecorder(I),R.initPerformanceTracer(I),(0,r.has)(I,"ignoredIssues"))throw new Error(`The <ignoredIssues> IParserConfig property has been deprecated.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.
	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES
	For further details.`);this.skipValidations=(0,r.has)(I,"skipValidations")?I.skipValidations:t.DEFAULT_PARSER_CONFIG.skipValidations}return A.performSelfAnalysis=function(b){throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.")},A.prototype.performSelfAnalysis=function(){var b=this;this.TRACE_INIT("performSelfAnalysis",function(){var I;b.selfAnalysisDone=!0;var R=b.className;b.TRACE_INIT("toFastProps",function(){(0,r.toFastProperties)(b)}),b.TRACE_INIT("Grammar Recording",function(){try{b.enableRecording(),(0,r.forEach)(b.definedRulesNames,function(_){var S=b[_],O=S.originalGrammarAction,C=void 0;b.TRACE_INIT(_+" Rule",function(){C=b.topLevelRuleRecord(_,O)}),b.gastProductionsCache[_]=C})}finally{b.disableRecording()}});var k=[];if(b.TRACE_INIT("Grammar Resolving",function(){k=(0,o.resolveGrammar)({rules:(0,r.values)(b.gastProductionsCache)}),b.definitionErrors=b.definitionErrors.concat(k)}),b.TRACE_INIT("Grammar Validations",function(){if((0,r.isEmpty)(k)&&b.skipValidations===!1){var _=(0,o.validateGrammar)({rules:(0,r.values)(b.gastProductionsCache),maxLookahead:b.maxLookahead,tokenTypes:(0,r.values)(b.tokensMap),errMsgProvider:a.defaultGrammarValidatorErrorProvider,grammarName:R});b.definitionErrors=b.definitionErrors.concat(_)}}),(0,r.isEmpty)(b.definitionErrors)&&(b.recoveryEnabled&&b.TRACE_INIT("computeAllProdsFollows",function(){var _=(0,n.computeAllProdsFollows)((0,r.values)(b.gastProductionsCache));b.resyncFollows=_}),b.TRACE_INIT("ComputeLookaheadFunctions",function(){b.preComputeLookaheadFunctions((0,r.values)(b.gastProductionsCache))})),!A.DEFER_DEFINITION_ERRORS_HANDLING&&!(0,r.isEmpty)(b.definitionErrors))throw I=(0,r.map)(b.definitionErrors,function(_){return _.message}),new Error(`Parser Definition Errors detected:
 `+I.join(`
-------------------------------
`))})},A.DEFER_DEFINITION_ERRORS_HANDLING=!1,A}();t.Parser=g,(0,m.applyMixins)(g,[u.Recoverable,s.LooksAhead,c.TreeBuilder,h.LexerAdapter,p.RecognizerEngine,l.RecognizerApi,d.ErrorHandler,y.ContentAssist,f.GastRecorder,v.PerformanceTracer]);var T=function(A){e(b,A);function b(I,R){R===void 0&&(R=t.DEFAULT_PARSER_CONFIG);var k=this,_=(0,r.cloneObj)(R);return _.outputCst=!0,k=A.call(this,I,_)||this,k}return b}(g);t.CstParser=T;var L=function(A){e(b,A);function b(I,R){R===void 0&&(R=t.DEFAULT_PARSER_CONFIG);var k=this,_=(0,r.cloneObj)(R);return _.outputCst=!1,k=A.call(this,I,_)||this,k}return b}(g);t.EmbeddedActionsParser=L}(Kr)),Kr}var Dr={};Object.defineProperty(Dr,"__esModule",{value:!0});Dr.createSyntaxDiagramsCode=void 0;var Wi=nr;function Yc(t,e){var r=e===void 0?{}:e,n=r.resourceBase,i=n===void 0?"https://unpkg.com/chevrotain@"+Wi.VERSION+"/diagrams/":n,a=r.css,o=a===void 0?"https://unpkg.com/chevrotain@"+Wi.VERSION+"/diagrams/diagrams.css":a,u=`
<!-- This is a generated file -->
<!DOCTYPE html>
<meta charset="utf-8">
<style>
  body {
    background-color: hsl(30, 20%, 95%)
  }
</style>

`,s=`
<link rel='stylesheet' href='`+o+`'>
`,c=`
<script src='`+i+`vendor/railroad-diagrams.js'><\/script>
<script src='`+i+`src/diagrams_builder.js'><\/script>
<script src='`+i+`src/diagrams_behavior.js'><\/script>
<script src='`+i+`src/main.js'><\/script>
`,h=`
<div id="diagrams" align="center"></div>    
`,l=`
<script>
    window.serializedGrammar = `+JSON.stringify(t,null,"  ")+`;
<\/script>
`,p=`
<script>
    var diagramsDiv = document.getElementById("diagrams");
    main.drawDiagramsFromSerializedGrammar(serializedGrammar, diagramsDiv);
<\/script>
`;return u+s+c+h+l+p}Dr.createSyntaxDiagramsCode=Yc;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Parser=t.createSyntaxDiagramsCode=t.clearCache=t.GAstVisitor=t.serializeProduction=t.serializeGrammar=t.Terminal=t.Rule=t.RepetitionWithSeparator=t.RepetitionMandatoryWithSeparator=t.RepetitionMandatory=t.Repetition=t.Option=t.NonTerminal=t.Alternative=t.Alternation=t.defaultLexerErrorProvider=t.NoViableAltException=t.NotAllInputParsedException=t.MismatchedTokenException=t.isRecognitionException=t.EarlyExitException=t.defaultParserErrorProvider=t.tokenName=t.tokenMatcher=t.tokenLabel=t.EOF=t.createTokenInstance=t.createToken=t.LexerDefinitionErrorType=t.Lexer=t.EMPTY_ALT=t.ParserDefinitionErrorType=t.EmbeddedActionsParser=t.CstParser=t.VERSION=void 0;var e=nr;Object.defineProperty(t,"VERSION",{enumerable:!0,get:function(){return e.VERSION}});var r=Ie();Object.defineProperty(t,"CstParser",{enumerable:!0,get:function(){return r.CstParser}}),Object.defineProperty(t,"EmbeddedActionsParser",{enumerable:!0,get:function(){return r.EmbeddedActionsParser}}),Object.defineProperty(t,"ParserDefinitionErrorType",{enumerable:!0,get:function(){return r.ParserDefinitionErrorType}}),Object.defineProperty(t,"EMPTY_ALT",{enumerable:!0,get:function(){return r.EMPTY_ALT}});var n=Pr();Object.defineProperty(t,"Lexer",{enumerable:!0,get:function(){return n.Lexer}}),Object.defineProperty(t,"LexerDefinitionErrorType",{enumerable:!0,get:function(){return n.LexerDefinitionErrorType}});var i=nt;Object.defineProperty(t,"createToken",{enumerable:!0,get:function(){return i.createToken}}),Object.defineProperty(t,"createTokenInstance",{enumerable:!0,get:function(){return i.createTokenInstance}}),Object.defineProperty(t,"EOF",{enumerable:!0,get:function(){return i.EOF}}),Object.defineProperty(t,"tokenLabel",{enumerable:!0,get:function(){return i.tokenLabel}}),Object.defineProperty(t,"tokenMatcher",{enumerable:!0,get:function(){return i.tokenMatcher}}),Object.defineProperty(t,"tokenName",{enumerable:!0,get:function(){return i.tokenName}});var a=or;Object.defineProperty(t,"defaultParserErrorProvider",{enumerable:!0,get:function(){return a.defaultParserErrorProvider}});var o=Re;Object.defineProperty(t,"EarlyExitException",{enumerable:!0,get:function(){return o.EarlyExitException}}),Object.defineProperty(t,"isRecognitionException",{enumerable:!0,get:function(){return o.isRecognitionException}}),Object.defineProperty(t,"MismatchedTokenException",{enumerable:!0,get:function(){return o.MismatchedTokenException}}),Object.defineProperty(t,"NotAllInputParsedException",{enumerable:!0,get:function(){return o.NotAllInputParsedException}}),Object.defineProperty(t,"NoViableAltException",{enumerable:!0,get:function(){return o.NoViableAltException}});var u=ir;Object.defineProperty(t,"defaultLexerErrorProvider",{enumerable:!0,get:function(){return u.defaultLexerErrorProvider}});var s=X;Object.defineProperty(t,"Alternation",{enumerable:!0,get:function(){return s.Alternation}}),Object.defineProperty(t,"Alternative",{enumerable:!0,get:function(){return s.Alternative}}),Object.defineProperty(t,"NonTerminal",{enumerable:!0,get:function(){return s.NonTerminal}}),Object.defineProperty(t,"Option",{enumerable:!0,get:function(){return s.Option}}),Object.defineProperty(t,"Repetition",{enumerable:!0,get:function(){return s.Repetition}}),Object.defineProperty(t,"RepetitionMandatory",{enumerable:!0,get:function(){return s.RepetitionMandatory}}),Object.defineProperty(t,"RepetitionMandatoryWithSeparator",{enumerable:!0,get:function(){return s.RepetitionMandatoryWithSeparator}}),Object.defineProperty(t,"RepetitionWithSeparator",{enumerable:!0,get:function(){return s.RepetitionWithSeparator}}),Object.defineProperty(t,"Rule",{enumerable:!0,get:function(){return s.Rule}}),Object.defineProperty(t,"Terminal",{enumerable:!0,get:function(){return s.Terminal}});var c=X;Object.defineProperty(t,"serializeGrammar",{enumerable:!0,get:function(){return c.serializeGrammar}}),Object.defineProperty(t,"serializeProduction",{enumerable:!0,get:function(){return c.serializeProduction}});var h=it;Object.defineProperty(t,"GAstVisitor",{enumerable:!0,get:function(){return h.GAstVisitor}});function l(){console.warn(`The clearCache function was 'soft' removed from the Chevrotain API.
	 It performs no action other than printing this message.
	 Please avoid using it as it will be completely removed in the future`)}t.clearCache=l;var p=Dr;Object.defineProperty(t,"createSyntaxDiagramsCode",{enumerable:!0,get:function(){return p.createSyntaxDiagramsCode}});var d=function(){function y(){throw new Error(`The Parser class has been deprecated, use CstParser or EmbeddedActionsParser instead.	
See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_7-0-0`)}return y}();t.Parser=d})($a);const ee=Zs($a);ee.Alternation;ee.Alternative;const $c=ee.CstParser;ee.EMPTY_ALT;ee.EOF;ee.EarlyExitException;ee.EmbeddedActionsParser;ee.GAstVisitor;const xr=ee.Lexer;ee.LexerDefinitionErrorType;ee.MismatchedTokenException;ee.NoViableAltException;ee.NonTerminal;ee.NotAllInputParsedException;ee.Option;ee.Parser;ee.ParserDefinitionErrorType;ee.Repetition;ee.RepetitionMandatory;ee.RepetitionMandatoryWithSeparator;ee.RepetitionWithSeparator;ee.Rule;ee.Terminal;ee.VERSION;ee.clearCache;ee.createSyntaxDiagramsCode;const ae=ee.createToken;ee.createTokenInstance;ee.defaultLexerErrorProvider;ee.defaultParserErrorProvider;ee.isRecognitionException;ee.serializeGrammar;ee.serializeProduction;ee.tokenLabel;ee.tokenMatcher;ee.tokenName;var ke=`
`,Ae=ae({name:"Identifier",pattern:/[a-zA-Z]\w*/}),Uo=ae({name:"Datasource",pattern:/datasource/,push_mode:"block"}),jo=ae({name:"Generator",pattern:/generator/,push_mode:"block"}),Bo=ae({name:"Model",pattern:/model/,push_mode:"block"}),Vo=ae({name:"Enum",pattern:/enum/,push_mode:"block"}),qo=ae({name:"True",pattern:/true/,longer_alt:Ae}),Wo=ae({name:"False",pattern:/false/,longer_alt:Ae}),Go=ae({name:"Null",pattern:/null/,longer_alt:Ae}),At=ae({name:"Comment",pattern:xr.NA}),Xc=ae({name:"DocComment",pattern:/\/\/\/\s*(.+)/,categories:[At]}),Jc=ae({name:"LineComment",pattern:/\/\/\s*(.+)/,categories:[At]}),Kn=ae({name:"Attribute",pattern:xr.NA}),Qo=ae({name:"ModelAttribute",pattern:/@@/,label:"'@@'",categories:[Kn]}),zo=ae({name:"FieldAttribute",pattern:/@/,label:"'@'",categories:[Kn]}),yn=ae({name:"Dot",pattern:/\./,label:"'.'"}),Ko=ae({name:"QuestionMark",pattern:/\?/,label:"'?'"}),Ho=ae({name:"Array",pattern:/\[\]/,label:"'[]'"}),Yo=ae({name:"LCurly",pattern:/{/,label:"'{'"}),$o=ae({name:"RCurly",pattern:/}/,label:"'}'",pop_mode:!0}),gn=ae({name:"LRound",pattern:/\(/,label:"'('"}),En=ae({name:"RRound",pattern:/\)/,label:"')'"}),Xo=ae({name:"LSquare",pattern:/\[/,label:"'['"}),Jo=ae({name:"RSquare",pattern:/\]/,label:"']'"}),_r=ae({name:"Comma",pattern:/,/,label:"','"}),Zo=ae({name:"Colon",pattern:/:/,label:"':'"}),_n=ae({name:"Equals",pattern:/=/,label:"'='"}),es=ae({name:"StringLiteral",pattern:/"(:?[^\\"\n\r]+|\\(:?[bfnrtv"\\/]|u[0-9a-fA-F]{4}))*"/}),ts=ae({name:"NumberLiteral",pattern:/-?(0|[1-9]\d*)(\.\d+)?([eE][+-]?\d+)?/}),Zc=ae({name:"WhiteSpace",pattern:/\s+/,group:xr.SKIPPED}),Et=ae({name:"LineBreak",pattern:/\n|\r\n/,line_breaks:!0,label:"LineBreak"}),Gi=[At,Xc,Jc,Et,Zc],rs={modes:{global:[].concat(Gi,[Uo,jo,Bo,Vo]),block:[].concat(Gi,[Kn,Qo,zo,yn,Ko,Ho,Yo,$o,Xo,Jo,gn,En,_r,Zo,_n,qo,Wo,Go,es,ts,Ae])},defaultMode:"global"},el=new xr(rs);function ns(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Tn(t,e)}function Tn(t,e){return Tn=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Tn(t,e)}var tl=function(t){ns(e,t);function e(){var r;return r=t.call(this,rs)||this,r.break=r.RULE("break",function(){r.CONSUME1(Et),r.CONSUME2(Et)}),r.keyedArg=r.RULE("keyedArg",function(){r.CONSUME(Ae,{LABEL:"keyName"}),r.CONSUME(Zo),r.SUBRULE(r.value)}),r.array=r.RULE("array",function(){r.CONSUME(Xo),r.MANY_SEP({SEP:_r,DEF:function(){r.SUBRULE(r.value)}}),r.CONSUME(Jo)}),r.func=r.RULE("func",function(){r.CONSUME(Ae,{LABEL:"funcName"}),r.CONSUME(gn),r.MANY_SEP({SEP:_r,DEF:function(){r.SUBRULE(r.value)}}),r.CONSUME(En)}),r.value=r.RULE("value",function(){r.OR([{ALT:function(){return r.CONSUME(es,{LABEL:"value"})}},{ALT:function(){return r.CONSUME(ts,{LABEL:"value"})}},{ALT:function(){return r.SUBRULE(r.array,{LABEL:"value"})}},{ALT:function(){return r.SUBRULE(r.func,{LABEL:"value"})}},{ALT:function(){return r.CONSUME(qo,{LABEL:"value"})}},{ALT:function(){return r.CONSUME(Wo,{LABEL:"value"})}},{ALT:function(){return r.CONSUME(Go,{LABEL:"value"})}},{ALT:function(){return r.CONSUME(Ae,{LABEL:"value"})}}])}),r.property=r.RULE("property",function(){r.CONSUME(Ae,{LABEL:"propertyName"}),r.CONSUME(_n),r.SUBRULE(r.value,{LABEL:"propertyValue"})}),r.assignment=r.RULE("assignment",function(){r.CONSUME(Ae,{LABEL:"assignmentName"}),r.CONSUME(_n),r.SUBRULE(r.value,{LABEL:"assignmentValue"})}),r.field=r.RULE("field",function(){r.CONSUME(Ae,{LABEL:"fieldName"}),r.SUBRULE(r.value,{LABEL:"fieldType"}),r.OPTION1(function(){r.OR([{ALT:function(){return r.CONSUME(Ho,{LABEL:"array"})}},{ALT:function(){return r.CONSUME(Ko,{LABEL:"optional"})}}])}),r.MANY(function(){r.SUBRULE(r.attribute,{LABEL:"attributeList"})}),r.OPTION2(function(){r.CONSUME(At,{LABEL:"comment"})})}),r.block=r.RULE("block",function(n){var i=n===void 0?{}:n,a=i.componentType,o=a==="enum",u=a==="model";r.CONSUME(Yo),r.CONSUME1(Et),r.MANY(function(){r.OR([{ALT:function(){return r.SUBRULE(r.comment,{LABEL:"list"})}},{GATE:function(){return u},ALT:function(){return r.SUBRULE(r.property,{LABEL:"list"})}},{ALT:function(){return r.SUBRULE(r.attribute,{LABEL:"list"})}},{GATE:function(){return u},ALT:function(){return r.SUBRULE(r.field,{LABEL:"list"})}},{GATE:function(){return o},ALT:function(){return r.SUBRULE(r.enum,{LABEL:"list"})}},{GATE:function(){return!u},ALT:function(){return r.SUBRULE(r.assignment,{LABEL:"list"})}},{ALT:function(){return r.SUBRULE(r.break,{LABEL:"list"})}},{ALT:function(){return r.CONSUME2(Et)}}])}),r.CONSUME($o)}),r.enum=r.RULE("enum",function(){r.CONSUME(Ae,{LABEL:"enumName"}),r.OPTION(function(){r.CONSUME(At,{LABEL:"comment"})})}),r.attribute=r.RULE("attribute",function(){r.OR1([{ALT:function(){return r.CONSUME(Qo,{LABEL:"modelAttribute"})}},{ALT:function(){return r.CONSUME(zo,{LABEL:"fieldAttribute"})}}]),r.OR2([{ALT:function(){r.CONSUME1(Ae,{LABEL:"groupName"}),r.CONSUME(yn),r.CONSUME2(Ae,{LABEL:"attributeName"})}},{ALT:function(){return r.CONSUME(Ae,{LABEL:"attributeName"})}}]),r.OPTION(function(){r.CONSUME(gn),r.MANY_SEP({SEP:_r,DEF:function(){r.SUBRULE(r.attributeArg)}}),r.CONSUME(En)})}),r.attributeArg=r.RULE("attributeArg",function(){r.OR([{ALT:function(){return r.SUBRULE(r.keyedArg,{LABEL:"value"})}},{ALT:function(){return r.SUBRULE(r.value,{LABEL:"value"})}}])}),r.component=r.RULE("component",function(){var n=r.OR1([{ALT:function(){return r.CONSUME(Uo,{LABEL:"type"})}},{ALT:function(){return r.CONSUME(jo,{LABEL:"type"})}},{ALT:function(){return r.CONSUME(Bo,{LABEL:"type"})}},{ALT:function(){return r.CONSUME(Vo,{LABEL:"type"})}}]);r.OR2([{ALT:function(){r.CONSUME1(Ae,{LABEL:"groupName"}),r.CONSUME(yn),r.CONSUME2(Ae,{LABEL:"componentName"})}},{ALT:function(){return r.CONSUME(Ae,{LABEL:"componentName"})}}]),r.SUBRULE(r.block,{ARGS:[{componentType:n.image}]})}),r.comment=r.RULE("comment",function(){r.CONSUME(At,{LABEL:"text"})}),r.schema=r.RULE("schema",function(){r.MANY(function(){r.OR([{ALT:function(){return r.SUBRULE(r.comment,{LABEL:"list"})}},{ALT:function(){return r.SUBRULE(r.component,{LABEL:"list"})}},{ALT:function(){return r.SUBRULE(r.break,{LABEL:"list"})}},{ALT:function(){return r.CONSUME(Et)}}])})}),r.performSelfAnalysis(),r}return e}($c),Qt=new tl,rl=Qt.getBaseCstVisitorConstructorWithDefaults(),nl=function(t){ns(e,t);function e(){var n;return n=t.call(this)||this,n.validateVisitor(),n}var r=e.prototype;return r.schema=function(i){var a,o=this,u=(a=i.list)==null?void 0:a.map(function(s){return o.visit([s])});return{type:"schema",list:u}},r.component=function(i){var a=i.type,o=a[0].image,u=i.componentName,s=u[0].image,c=this.visit(i.block);switch(o){case"datasource":return{type:"datasource",name:s,assignments:c};case"generator":return{type:"generator",name:s,assignments:c};case"model":return{type:"model",name:s,properties:c};case"enum":return{type:"enum",name:s,enumerators:c};default:throw new Error("Unexpected block type: "+o)}},r.break=function(){return{type:"break"}},r.comment=function(i){var a=i.text,o=a[0].image;return{type:"comment",text:o}},r.block=function(i){var a,o=this;return(a=i.list)==null?void 0:a.map(function(u){return o.visit([u])})},r.assignment=function(i){var a=this.visit(i.assignmentValue),o=i.assignmentName,u=o[0].image;return{type:"assignment",key:u,value:a}},r.field=function(i){var a=this,o,u,s=this.visit(i.fieldType),c=i.fieldName,h=c[0].image,l=i.attributeList&&i.attributeList.map(function(d){return a.visit([d])}),p=(o=i.comment)==null||(u=o[0])==null?void 0:u.image;return{type:"field",name:h,fieldType:s,array:i.array!=null,optional:i.optional!=null,attributes:l,comment:p}},r.attribute=function(i){var a=this,o=i.attributeName,u=o[0].image,s=i.groupName||[{}],c=s[0].image,h=i.attributeArg&&i.attributeArg.map(function(p){return a.visit(p)}),l=i.modelAttribute!=null?"model":"field";return{type:"attribute",name:u,kind:l,group:c,args:h}},r.attributeArg=function(i){var a=this.visit(i.value);return{type:"attributeArgument",value:a}},r.func=function(i){var a=this,o=i.funcName,u=o[0].image,s=i.value&&i.value.map(function(c){return a.visit([c])});return{type:"function",name:u,params:s}},r.array=function(i){var a=this,o=i.value&&i.value.map(function(u){return a.visit([u])});return{type:"array",args:o}},r.keyedArg=function(i){var a=i.keyName,o=a[0].image,u=this.visit(i.value);return{type:"keyValue",key:o,value:u}},r.value=function(i){if(il(i.value)){var a=i.value,o=a[0].image;return o}return this.visit(i.value)},r.enum=function(i){var a,o,u=i.enumName,s=u[0].image,c=(a=i.comment)==null||(o=a[0])==null?void 0:o.image;return{type:"enumerator",name:s,comment:c}},e}(rl);function il(t){return"image"in t[0]}function al(t){var e=el.tokenize(t);Qt.input=e.tokens;var r=Qt.schema();if(Qt.errors.length>0)throw Qt.errors[0];var n=new nl;return n.visit(r)}function ol(t){return t.list.map(sl).filter(Boolean).join(ke).replace(/(\r?\n\s*){3,}/g,ke+ke)+ke}function sl(t){switch(t.type){case"comment":return Ur(t);case"datasource":return ul(t);case"enum":return cl(t);case"generator":return fl(t);case"model":return hl(t);case"break":return jr();default:throw new Error("Unrecognized block type")}}function Ur(t){return t.text}function jr(){return ke}function ul(t){var e=as(t.assignments);return`
datasource `+t.name+` {
  `+e+`
}`}function cl(t){var e=t.enumerators.map(ll).filter(Boolean).join(ke+"  ").replace(/(\r?\n\s*){3,}/g,ke+ke+"  ");return`
enum `+t.name+` {
  `+e+`
}`}function ll(t){switch(t.type){case"enumerator":return[t.name,t.comment].filter(Boolean).join(" ");case"attribute":return Hn(t);case"comment":return Ur(t);case"break":return jr();default:throw new Error("Unexpected enumerator type")}}function fl(t){var e=as(t.assignments);return`
generator `+t.name+` {
  `+e+`
}`}function hl(t){var e=yl(t.properties);return`
model `+t.name+` {
  `+e+`
}`}function pl(t,e){switch(e===void 0&&(e=0),t.type){case"comment":return Ur(t);case"break":return jr();case"assignment":return t.key.padEnd(e)+" = "+Zt(t.value);default:throw new Error("Unexpected assignment type")}}function dl(t,e,r){switch(e===void 0&&(e=0),r===void 0&&(r=0),t.type){case"attribute":return Hn(t);case"field":return ml(t,e,r);case"comment":return Ur(t);case"break":return jr();default:throw new Error("Unrecognized property type")}}function Hn(t){var e=t.args&&t.args.length>0?"("+t.args.map(vl).filter(Boolean).join(", ")+")":"",r=[t.name];return t.group&&r.unshift(t.group),(t.kind==="field"?"@":"@@")+r.join(".")+e}function vl(t){return Zt(t.value)}function ml(t,e,r){e===void 0&&(e=0),r===void 0&&(r=0);var n=t.name.padEnd(e),i=is(t).padEnd(r),a=t.attributes?t.attributes.map(Hn):[],o=t.comment;return[n,i].concat(a).filter(Boolean).join(" ").trim()+(o?" "+o:"")}function is(t){var e=t.array?"[]":t.optional?"?":"";if(typeof t.fieldType=="object")switch(t.fieldType.type){case"function":{var r=t.fieldType.params.map(Zt);return t.fieldType.name+"("+r+")"+e}default:throw new Error("Unexpected field type")}return""+t.fieldType+e}function Zt(t){switch(typeof t){case"object":{if("type"in t)switch(t.type){case"keyValue":return t.key+": "+Zt(t.value);case"function":return t.name+"("+(t.params?t.params.map(Zt):"")+")";case"array":return"["+t.args.join(", ")+"]";default:throw new Error("Unexpected value type")}throw new Error("Unexpected object value")}default:return String(t)}}function as(t){var e=0,r=t.reduce(function(i,a,o,u){return a.type==="break"||(o>0&&u[o-1].type==="break"&&(i[++e]=[]),i[e].push(a)),i},[[]]),n=r.map(function(i){return i.reduce(function(a,o){return Math.max(a,o.type==="assignment"?o.key.length:0)},0)});return t.map(function(i,a,o){return a>0&&i.type!=="break"&&o[a-1].type==="break"&&n.shift(),pl(i,n[0])}).filter(Boolean).join(ke+"  ").replace(/(\r?\n\s*){3,}/g,ke+ke+"  ")}function yl(t){var e=0,r=t.reduce(function(a,o,u,s){return o.type==="break"||(u>0&&s[u-1].type==="break"&&(a[++e]=[]),a[e].push(o)),a},[[]]),n=r.map(function(a){return a.reduce(function(o,u){return Math.max(o,u.type==="field"?u.name.length:0)},0)}),i=r.map(function(a){return a.reduce(function(o,u){return Math.max(o,u.type==="field"?is(u).length:0)},0)});return t.map(function(a,o,u){return o>0&&a.type!=="break"&&u[o-1].type==="break"&&(n.shift(),i.shift()),dl(a,n[0],i[0])}).filter(Boolean).join(ke+"  ").replace(/(\r?\n\s*){3,}/g,ke+ke+"  ")}const os="/api/v1",gl="/dataSource",El="/prisma/migrate/:id",_l="/prisma/dmf/:id",Tl="/model/graphql/",Ap="Untitled *",bp="^[A-Za-z][A-Za-z0-9_]*$",Rp="/",ss="fb_delete",Ol={id:0,name:ss,type:"model",properties:[{type:"field",name:"id",fieldType:"Int",attributes:[{type:"attribute",kind:"field",name:"id"}]}]},Yn=eu.create({baseURL:os,timeout:1e4});Yn.interceptors.response.use(t=>{if(t.status>=200&&t.status<300)return t.data.result;console.warn(t.data.message)},t=>{var r;const e=(r=t.response)==null?void 0:r.data;return Promise.reject(e||t.message)});const us=(t,e)=>Yn.get(t,{params:e}).then(r=>r),Sp=()=>us(`${gl}?datasourceType=1`),Al=(t,e)=>{t.find(i=>["enum","model"].includes(i.type))||t.push(Ol);const r=El.replace(":id",String(e)),n=ol({type:"schema",list:t});return Yn.post(r,{schema:n})},cs=t=>us(_l.replace(":id",t)),bl={state:{currentEntityId:0,blocks:[],currentDBSource:{id:0,name:"",sourceType:1,config:{dbType:"MySQL",apiNamespace:""}},previewFilters:[],schema:{models:[],enums:[]}},dispatch:()=>{}},Br=Pt.exports.createContext(bl),ls=t=>(al(t).list||[]).filter(e=>!(e.type==="model"&&e.name===ss)).map((e,r)=>({...e,id:r+1})),Rl=(t,e,r)=>cs(t).then(({enums:n,models:i,schemaContent:a})=>{e(au(ls(a),r,{models:i,enums:n}))}),Sl=(t,e)=>cs(t).then(({enums:r,models:n,schemaContent:i})=>{e(ou(ls(i),{models:n,enums:r}))}),kp=(t,e,r)=>{const n=r.find(i=>i.id===t);!n||Rl(String(t),e,n).then(()=>e(cu(t))).catch(i=>ja.error(`\u83B7\u53D6prisma dmf & schema \u5931\u8D25\uFF01Error: ${i.message}`))};var Zr="Invariant Violation",Qi=Object.setPrototypeOf,kl=Qi===void 0?function(t,e){return t.__proto__=e,t}:Qi,ne=function(t){we(e,t);function e(r){r===void 0&&(r=Zr);var n=t.call(this,typeof r=="number"?Zr+": "+r+" (see https://github.com/apollographql/invariant-packages)":r)||this;return n.framesToPop=1,n.name=Zr,kl(n,e.prototype),n}return e}(Error);function V(t,e){if(!t)throw new ne(e)}var fs=["debug","log","warn","error","silent"],Nl=fs.indexOf("log");function vr(t){return function(){if(fs.indexOf(t)>=Nl){var e=console[t]||console.log;return e.apply(console,arguments)}}}(function(t){t.debug=vr("debug"),t.log=vr("log"),t.warn=vr("warn"),t.error=vr("error")})(V||(V={}));function Ne(t){try{return t()}catch{}}const zi=Ne(function(){return globalThis})||Ne(function(){return window})||Ne(function(){return self})||Ne(function(){return global})||Ne(function(){return Ne.constructor("return this")()});var Ki="__",Hi=[Ki,Ki].join("DEV");function Il(){try{return Boolean(__DEV__)}catch{return Object.defineProperty(zi,Hi,{value:Ne(function(){return"production"})!=="production",enumerable:!1,configurable:!0,writable:!0}),zi[Hi]}}const en=Il();function Ze(t){try{return t()}catch{}}var On=Ze(function(){return globalThis})||Ze(function(){return window})||Ze(function(){return self})||Ze(function(){return global})||Ze(function(){return Ze.constructor("return this")()}),An=!1;function Pl(){On&&!Ze(function(){return"production"})&&!Ze(function(){return process})&&(Object.defineProperty(On,"process",{value:{env:{NODE_ENV:"production"}},configurable:!0,enumerable:!1,writable:!0}),An=!0)}Pl();function Yi(){An&&(delete On.process,An=!1)}function Ll(){return Yi()}function Cl(){__DEV__?V(typeof en=="boolean",en):V(typeof en=="boolean",38)}Ll();Cl();function Vr(t,e){var r=t.directives;return!r||!r.length?!0:Fl(r).every(function(n){var i=n.directive,a=n.ifArgument,o=!1;return a.value.kind==="Variable"?(o=e&&e[a.value.name.value],__DEV__?V(o!==void 0,"Invalid variable referenced in @".concat(i.name.value," directive.")):V(o!==void 0,39)):o=a.value.value,i.name.value==="skip"?!o:o})}function $n(t,e,r){var n=new Set(t),i=n.size;return Ge(e,{Directive:function(a){if(n.delete(a.name.value)&&(!r||!n.size))return Va}}),r?!n.size:n.size<i}function wl(t){return t&&$n(["client","export"],t,!0)}function Ml(t){var e=t.name.value;return e==="skip"||e==="include"}function Fl(t){var e=[];return t&&t.length&&t.forEach(function(r){if(!!Ml(r)){var n=r.arguments,i=r.name.value;__DEV__?V(n&&n.length===1,"Incorrect number of arguments for the @".concat(i," directive.")):V(n&&n.length===1,40);var a=n[0];__DEV__?V(a.name&&a.name.value==="if","Invalid argument for the @".concat(i," directive.")):V(a.name&&a.name.value==="if",41);var o=a.value;__DEV__?V(o&&(o.kind==="Variable"||o.kind==="BooleanValue"),"Argument for the @".concat(i," directive must be a variable or a boolean value.")):V(o&&(o.kind==="Variable"||o.kind==="BooleanValue"),42),e.push({directive:r,ifArgument:a})}}),e}function Dl(t,e){var r=e,n=[];t.definitions.forEach(function(a){if(a.kind==="OperationDefinition")throw __DEV__?new ne("Found a ".concat(a.operation," operation").concat(a.name?" named '".concat(a.name.value,"'"):"",". ")+"No operations are allowed when using a fragment as a query. Only fragments are allowed."):new ne(43);a.kind==="FragmentDefinition"&&n.push(a)}),typeof r>"u"&&(__DEV__?V(n.length===1,"Found ".concat(n.length," fragments. `fragmentName` must be provided when there is not exactly 1 fragment.")):V(n.length===1,44),r=n[0].name.value);var i=P(P({},t),{definitions:br([{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:r}}]}}],t.definitions,!0)});return i}function Xn(t){t===void 0&&(t=[]);var e={};return t.forEach(function(r){e[r.name.value]=r}),e}function Jn(t,e){switch(t.kind){case"InlineFragment":return t;case"FragmentSpread":{var r=t.name.value;if(typeof e=="function")return e(r);var n=e&&e[r];return __DEV__?V(n,"No fragment named ".concat(r)):V(n,45),n||null}default:return null}}function me(t){return t!==null&&typeof t=="object"}function bt(t){return{__ref:String(t)}}function se(t){return Boolean(t&&typeof t=="object"&&typeof t.__ref=="string")}function xl(t){return me(t)&&t.kind==="Document"&&Array.isArray(t.definitions)}function Ul(t){return t.kind==="StringValue"}function jl(t){return t.kind==="BooleanValue"}function Bl(t){return t.kind==="IntValue"}function Vl(t){return t.kind==="FloatValue"}function ql(t){return t.kind==="Variable"}function Wl(t){return t.kind==="ObjectValue"}function Gl(t){return t.kind==="ListValue"}function Ql(t){return t.kind==="EnumValue"}function zl(t){return t.kind==="NullValue"}function kt(t,e,r,n){if(Bl(r)||Vl(r))t[e.value]=Number(r.value);else if(jl(r)||Ul(r))t[e.value]=r.value;else if(Wl(r)){var i={};r.fields.map(function(o){return kt(i,o.name,o.value,n)}),t[e.value]=i}else if(ql(r)){var a=(n||{})[r.name.value];t[e.value]=a}else if(Gl(r))t[e.value]=r.values.map(function(o){var u={};return kt(u,e,o,n),u[e.value]});else if(Ql(r))t[e.value]=r.value;else if(zl(r))t[e.value]=null;else throw __DEV__?new ne('The inline argument "'.concat(e.value,'" of kind "').concat(r.kind,'"')+"is not supported. Use variables instead of inline arguments to overcome this limitation."):new ne(54)}function Kl(t,e){var r=null;t.directives&&(r={},t.directives.forEach(function(i){r[i.name.value]={},i.arguments&&i.arguments.forEach(function(a){var o=a.name,u=a.value;return kt(r[i.name.value],o,u,e)})}));var n=null;return t.arguments&&t.arguments.length&&(n={},t.arguments.forEach(function(i){var a=i.name,o=i.value;return kt(n,a,o,e)})),Zn(t.name.value,n,r)}var Hl=["connection","include","skip","client","rest","export"],Zn=Object.assign(function(t,e,r){if(e&&r&&r.connection&&r.connection.key)if(r.connection.filter&&r.connection.filter.length>0){var n=r.connection.filter?r.connection.filter:[];n.sort();var i={};return n.forEach(function(u){i[u]=e[u]}),"".concat(r.connection.key,"(").concat(Vt(i),")")}else return r.connection.key;var a=t;if(e){var o=Vt(e);a+="(".concat(o,")")}return r&&Object.keys(r).forEach(function(u){Hl.indexOf(u)===-1&&(r[u]&&Object.keys(r[u]).length?a+="@".concat(u,"(").concat(Vt(r[u]),")"):a+="@".concat(u))}),a},{setStringify:function(t){var e=Vt;return Vt=t,e}}),Vt=function(e){return JSON.stringify(e,Yl)};function Yl(t,e){return me(e)&&!Array.isArray(e)&&(e=Object.keys(e).sort().reduce(function(r,n){return r[n]=e[n],r},{})),e}function qr(t,e){if(t.arguments&&t.arguments.length){var r={};return t.arguments.forEach(function(n){var i=n.name,a=n.value;return kt(r,i,a,e)}),r}return null}function ht(t){return t.alias?t.alias.value:t.name.value}function bn(t,e,r){if(typeof t.__typename=="string")return t.__typename;for(var n=0,i=e.selections;n<i.length;n++){var a=i[n];if(We(a)){if(a.name.value==="__typename")return t[ht(a)]}else{var o=bn(t,Jn(a,r).selectionSet,r);if(typeof o=="string")return o}}}function We(t){return t.kind==="Field"}function hs(t){return t.kind==="InlineFragment"}function Wr(t){__DEV__?V(t&&t.kind==="Document",'Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql'):V(t&&t.kind==="Document",46);var e=t.definitions.filter(function(r){return r.kind!=="FragmentDefinition"}).map(function(r){if(r.kind!=="OperationDefinition")throw __DEV__?new ne('Schema type definitions not allowed in queries. Found: "'.concat(r.kind,'"')):new ne(47);return r});return __DEV__?V(e.length<=1,"Ambiguous GraphQL document: contains ".concat(e.length," operations")):V(e.length<=1,48),t}function lr(t){return Wr(t),t.definitions.filter(function(e){return e.kind==="OperationDefinition"})[0]}function Rn(t){return t.definitions.filter(function(e){return e.kind==="OperationDefinition"&&e.name}).map(function(e){return e.name.value})[0]||null}function ei(t){return t.definitions.filter(function(e){return e.kind==="FragmentDefinition"})}function ps(t){var e=lr(t);return __DEV__?V(e&&e.operation==="query","Must contain a query definition."):V(e&&e.operation==="query",49),e}function $l(t){__DEV__?V(t.kind==="Document",'Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql'):V(t.kind==="Document",50),__DEV__?V(t.definitions.length<=1,"Fragment must have exactly one definition."):V(t.definitions.length<=1,51);var e=t.definitions[0];return __DEV__?V(e.kind==="FragmentDefinition","Must be a fragment definition."):V(e.kind==="FragmentDefinition",52),e}function ti(t){Wr(t);for(var e,r=0,n=t.definitions;r<n.length;r++){var i=n[r];if(i.kind==="OperationDefinition"){var a=i.operation;if(a==="query"||a==="mutation"||a==="subscription")return i}i.kind==="FragmentDefinition"&&!e&&(e=i)}if(e)return e;throw __DEV__?new ne("Expected a parsed GraphQL query with a query, mutation, subscription, or a fragment."):new ne(53)}function ri(t){var e=Object.create(null),r=t&&t.variableDefinitions;return r&&r.length&&r.forEach(function(n){n.defaultValue&&kt(e,n.variable.name,n.defaultValue)}),e}function $i(t,e,r){var n=0;return t.forEach(function(i,a){e.call(this,i,a,t)&&(t[n++]=i)},r),t.length=n,t}var Xi={kind:"Field",name:{kind:"Name",value:"__typename"}};function ds(t,e){return!t||t.selectionSet.selections.every(function(r){return r.kind==="FragmentSpread"&&ds(e[r.name.value],e)})}function ni(t){return ds(lr(t)||$l(t),Xn(ei(t)))?null:t}function Ji(t){return function(r){return t.some(function(n){return n.name&&n.name===r.name.value||n.test&&n.test(r)})}}function vs(t,e){var r=Object.create(null),n=[],i=Object.create(null),a=[],o=ni(Ge(e,{Variable:{enter:function(u,s,c){c.kind!=="VariableDefinition"&&(r[u.name.value]=!0)}},Field:{enter:function(u){if(t&&u.directives){var s=t.some(function(c){return c.remove});if(s&&u.directives&&u.directives.some(Ji(t)))return u.arguments&&u.arguments.forEach(function(c){c.value.kind==="Variable"&&n.push({name:c.value.name.value})}),u.selectionSet&&ms(u.selectionSet).forEach(function(c){a.push({name:c.name.value})}),null}}},FragmentSpread:{enter:function(u){i[u.name.value]=!0}},Directive:{enter:function(u){if(Ji(t)(u))return null}}}));return o&&$i(n,function(u){return!!u.name&&!r[u.name]}).length&&(o=ef(n,o)),o&&$i(a,function(u){return!!u.name&&!i[u.name]}).length&&(o=tf(a,o)),o}var ii=Object.assign(function(t){return Ge(t,{SelectionSet:{enter:function(e,r,n){if(!(n&&n.kind==="OperationDefinition")){var i=e.selections;if(!!i){var a=i.some(function(u){return We(u)&&(u.name.value==="__typename"||u.name.value.lastIndexOf("__",0)===0)});if(!a){var o=n;if(!(We(o)&&o.directives&&o.directives.some(function(u){return u.name.value==="export"})))return P(P({},e),{selections:br(br([],i,!0),[Xi],!1)})}}}}}})},{added:function(t){return t===Xi}}),Xl={test:function(t){var e=t.name.value==="connection";return e&&(!t.arguments||!t.arguments.some(function(r){return r.name.value==="key"}))&&__DEV__&&V.warn("Removing an @connection directive even though it does not have a key. You may want to use the key parameter to specify a store key."),e}};function Jl(t){return vs([Xl],Wr(t))}function Zl(t){return function(r){return t.some(function(n){return r.value&&r.value.kind==="Variable"&&r.value.name&&(n.name===r.value.name.value||n.test&&n.test(r))})}}function ef(t,e){var r=Zl(t);return ni(Ge(e,{OperationDefinition:{enter:function(n){return P(P({},n),{variableDefinitions:n.variableDefinitions?n.variableDefinitions.filter(function(i){return!t.some(function(a){return a.name===i.variable.name.value})}):[]})}},Field:{enter:function(n){var i=t.some(function(o){return o.remove});if(i){var a=0;if(n.arguments&&n.arguments.forEach(function(o){r(o)&&(a+=1)}),a===1)return null}}},Argument:{enter:function(n){if(r(n))return null}}}))}function tf(t,e){function r(n){if(t.some(function(i){return i.name===n.name.value}))return null}return ni(Ge(e,{FragmentSpread:{enter:r},FragmentDefinition:{enter:r}}))}function ms(t){var e=[];return t.selections.forEach(function(r){(We(r)||hs(r))&&r.selectionSet?ms(r.selectionSet).forEach(function(n){return e.push(n)}):r.kind==="FragmentSpread"&&e.push(r)}),e}function rf(t){var e=ti(t),r=e.operation;if(r==="query")return t;var n=Ge(t,{OperationDefinition:{enter:function(i){return P(P({},i),{operation:"query"})}}});return n}function nf(t){Wr(t);var e=vs([{test:function(r){return r.name.value==="client"},remove:!0}],t);return e&&(e=Ge(e,{FragmentDefinition:{enter:function(r){if(r.selectionSet){var n=r.selectionSet.selections.every(function(i){return We(i)&&i.name.value==="__typename"});if(n)return null}}}})),e}var af=Object.prototype.hasOwnProperty;function Zi(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return ai(t)}function ai(t){var e=t[0]||{},r=t.length;if(r>1)for(var n=new pt,i=1;i<r;++i)e=n.merge(e,t[i]);return e}var of=function(t,e,r){return this.merge(t[r],e[r])},pt=function(){function t(e){e===void 0&&(e=of),this.reconciler=e,this.isObject=me,this.pastCopies=new Set}return t.prototype.merge=function(e,r){for(var n=this,i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];return me(r)&&me(e)?(Object.keys(r).forEach(function(o){if(af.call(e,o)){var u=e[o];if(r[o]!==u){var s=n.reconciler.apply(n,br([e,r,o],i,!1));s!==u&&(e=n.shallowCopyForMerge(e),e[o]=s)}}else e=n.shallowCopyForMerge(e),e[o]=r[o]}),e):r},t.prototype.shallowCopyForMerge=function(e){return me(e)&&(this.pastCopies.has(e)||(Array.isArray(e)?e=e.slice(0):e=P({__proto__:Object.getPrototypeOf(e)},e),this.pastCopies.add(e))),e},t}();function sf(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=uf(t))||e&&t&&typeof t.length=="number"){r&&(t=r);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uf(t,e){if(!!t){if(typeof t=="string")return ea(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ea(t,e)}}function ea(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ta(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function oi(t,e,r){return e&&ta(t.prototype,e),r&&ta(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var si=function(){return typeof Symbol=="function"},ui=function(t){return si()&&Boolean(Symbol[t])},ci=function(t){return ui(t)?Symbol[t]:"@@"+t};si()&&!ui("observable")&&(Symbol.observable=Symbol("observable"));var cf=ci("iterator"),Sn=ci("observable"),ys=ci("species");function Rr(t,e){var r=t[e];if(r!=null){if(typeof r!="function")throw new TypeError(r+" is not a function");return r}}function qt(t){var e=t.constructor;return e!==void 0&&(e=e[ys],e===null&&(e=void 0)),e!==void 0?e:fe}function lf(t){return t instanceof fe}function Nt(t){Nt.log?Nt.log(t):setTimeout(function(){throw t})}function Tr(t){Promise.resolve().then(function(){try{t()}catch(e){Nt(e)}})}function gs(t){var e=t._cleanup;if(e!==void 0&&(t._cleanup=void 0,!!e))try{if(typeof e=="function")e();else{var r=Rr(e,"unsubscribe");r&&r.call(e)}}catch(n){Nt(n)}}function kn(t){t._observer=void 0,t._queue=void 0,t._state="closed"}function ff(t){var e=t._queue;if(!!e){t._queue=void 0,t._state="ready";for(var r=0;r<e.length&&(Es(t,e[r].type,e[r].value),t._state!=="closed");++r);}}function Es(t,e,r){t._state="running";var n=t._observer;try{var i=Rr(n,e);switch(e){case"next":i&&i.call(n,r);break;case"error":if(kn(t),i)i.call(n,r);else throw r;break;case"complete":kn(t),i&&i.call(n);break}}catch(a){Nt(a)}t._state==="closed"?gs(t):t._state==="running"&&(t._state="ready")}function tn(t,e,r){if(t._state!=="closed"){if(t._state==="buffering"){t._queue.push({type:e,value:r});return}if(t._state!=="ready"){t._state="buffering",t._queue=[{type:e,value:r}],Tr(function(){return ff(t)});return}Es(t,e,r)}}var hf=function(){function t(r,n){this._cleanup=void 0,this._observer=r,this._queue=void 0,this._state="initializing";var i=new pf(this);try{this._cleanup=n.call(void 0,i)}catch(a){i.error(a)}this._state==="initializing"&&(this._state="ready")}var e=t.prototype;return e.unsubscribe=function(){this._state!=="closed"&&(kn(this),gs(this))},oi(t,[{key:"closed",get:function(){return this._state==="closed"}}]),t}(),pf=function(){function t(r){this._subscription=r}var e=t.prototype;return e.next=function(n){tn(this._subscription,"next",n)},e.error=function(n){tn(this._subscription,"error",n)},e.complete=function(){tn(this._subscription,"complete")},oi(t,[{key:"closed",get:function(){return this._subscription._state==="closed"}}]),t}(),fe=function(){function t(r){if(!(this instanceof t))throw new TypeError("Observable cannot be called as a function");if(typeof r!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=r}var e=t.prototype;return e.subscribe=function(n){return(typeof n!="object"||n===null)&&(n={next:n,error:arguments[1],complete:arguments[2]}),new hf(n,this._subscriber)},e.forEach=function(n){var i=this;return new Promise(function(a,o){if(typeof n!="function"){o(new TypeError(n+" is not a function"));return}function u(){s.unsubscribe(),a()}var s=i.subscribe({next:function(c){try{n(c,u)}catch(h){o(h),s.unsubscribe()}},error:o,complete:a})})},e.map=function(n){var i=this;if(typeof n!="function")throw new TypeError(n+" is not a function");var a=qt(this);return new a(function(o){return i.subscribe({next:function(u){try{u=n(u)}catch(s){return o.error(s)}o.next(u)},error:function(u){o.error(u)},complete:function(){o.complete()}})})},e.filter=function(n){var i=this;if(typeof n!="function")throw new TypeError(n+" is not a function");var a=qt(this);return new a(function(o){return i.subscribe({next:function(u){try{if(!n(u))return}catch(s){return o.error(s)}o.next(u)},error:function(u){o.error(u)},complete:function(){o.complete()}})})},e.reduce=function(n){var i=this;if(typeof n!="function")throw new TypeError(n+" is not a function");var a=qt(this),o=arguments.length>1,u=!1,s=arguments[1],c=s;return new a(function(h){return i.subscribe({next:function(l){var p=!u;if(u=!0,!p||o)try{c=n(c,l)}catch(d){return h.error(d)}else c=l},error:function(l){h.error(l)},complete:function(){if(!u&&!o)return h.error(new TypeError("Cannot reduce an empty sequence"));h.next(c),h.complete()}})})},e.concat=function(){for(var n=this,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];var u=qt(this);return new u(function(s){var c,h=0;function l(p){c=p.subscribe({next:function(d){s.next(d)},error:function(d){s.error(d)},complete:function(){h===a.length?(c=void 0,s.complete()):l(u.from(a[h++]))}})}return l(n),function(){c&&(c.unsubscribe(),c=void 0)}})},e.flatMap=function(n){var i=this;if(typeof n!="function")throw new TypeError(n+" is not a function");var a=qt(this);return new a(function(o){var u=[],s=i.subscribe({next:function(h){if(n)try{h=n(h)}catch(p){return o.error(p)}var l=a.from(h).subscribe({next:function(p){o.next(p)},error:function(p){o.error(p)},complete:function(){var p=u.indexOf(l);p>=0&&u.splice(p,1),c()}});u.push(l)},error:function(h){o.error(h)},complete:function(){c()}});function c(){s.closed&&u.length===0&&o.complete()}return function(){u.forEach(function(h){return h.unsubscribe()}),s.unsubscribe()}})},e[Sn]=function(){return this},t.from=function(n){var i=typeof this=="function"?this:t;if(n==null)throw new TypeError(n+" is not an object");var a=Rr(n,Sn);if(a){var o=a.call(n);if(Object(o)!==o)throw new TypeError(o+" is not an object");return lf(o)&&o.constructor===i?o:new i(function(u){return o.subscribe(u)})}if(ui("iterator")&&(a=Rr(n,cf),a))return new i(function(u){Tr(function(){if(!u.closed){for(var s=sf(a.call(n)),c;!(c=s()).done;){var h=c.value;if(u.next(h),u.closed)return}u.complete()}})});if(Array.isArray(n))return new i(function(u){Tr(function(){if(!u.closed){for(var s=0;s<n.length;++s)if(u.next(n[s]),u.closed)return;u.complete()}})});throw new TypeError(n+" is not observable")},t.of=function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];var o=typeof this=="function"?this:t;return new o(function(u){Tr(function(){if(!u.closed){for(var s=0;s<i.length;++s)if(u.next(i[s]),u.closed)return;u.complete()}})})},oi(t,null,[{key:ys,get:function(){return this}}]),t}();si()&&Object.defineProperty(fe,Symbol("extensions"),{value:{symbol:Sn,hostReportError:Nt},configurable:!0});function df(t){var e,r=t.Symbol;if(typeof r=="function")if(r.observable)e=r.observable;else{typeof r.for=="function"?e=r.for("https://github.com/benlesh/symbol-observable"):e=r("https://github.com/benlesh/symbol-observable");try{r.observable=e}catch{}}else e="@@observable";return e}var _t;typeof self<"u"?_t=self:typeof window<"u"?_t=window:typeof global<"u"?_t=global:typeof module<"u"?_t=module:_t=Function("return this")();df(_t);var ra=fe.prototype,na="@@observable";ra[na]||(ra[na]=function(){return this});var vf=Object.prototype.toString;function li(t){return Nn(t)}function Nn(t,e){switch(vf.call(t)){case"[object Array]":{if(e=e||new Map,e.has(t))return e.get(t);var r=t.slice(0);return e.set(t,r),r.forEach(function(i,a){r[a]=Nn(i,e)}),r}case"[object Object]":{if(e=e||new Map,e.has(t))return e.get(t);var n=Object.create(Object.getPrototypeOf(t));return e.set(t,n),Object.keys(t).forEach(function(i){n[i]=Nn(t[i],e)}),n}default:return t}}function mf(t){var e=new Set([t]);return e.forEach(function(r){me(r)&&yf(r)===r&&Object.getOwnPropertyNames(r).forEach(function(n){me(r[n])&&e.add(r[n])})}),t}function yf(t){if(__DEV__&&!Object.isFrozen(t))try{Object.freeze(t)}catch(e){if(e instanceof TypeError)return null;throw e}return t}function In(t){return __DEV__&&mf(t),t}function Yt(t,e,r){var n=[];t.forEach(function(i){return i[e]&&n.push(i)}),n.forEach(function(i){return i[e](r)})}function rn(t,e,r){return new fe(function(n){var i=n.next,a=n.error,o=n.complete,u=0,s=!1,c={then:function(d){return new Promise(function(y){return y(d())})}};function h(d,y){return d?function(f){++u;var v=function(){return d(f)};c=c.then(v,v).then(function(m){--u,i&&i.call(n,m),s&&l.complete()},function(m){throw--u,m}).catch(function(m){a&&a.call(n,m)})}:function(f){return y&&y.call(n,f)}}var l={next:h(e,i),error:h(r,a),complete:function(){s=!0,u||o&&o.call(n)}},p=t.subscribe(l);return function(){return p.unsubscribe()}})}var mt=typeof WeakMap=="function"&&Ne(function(){return navigator.product})!=="ReactNative",gf=typeof WeakSet=="function",_s=typeof Symbol=="function"&&typeof Symbol.for=="function",Gr=_s&&Symbol.asyncIterator,Ef=typeof Ne(function(){return window.document.createElement})=="function",_f=Ne(function(){return navigator.userAgent.indexOf("jsdom")>=0})||!1,Np=Ef&&!_f;function Ts(t){function e(r){Object.defineProperty(t,r,{value:fe})}return _s&&Symbol.species&&e(Symbol.species),e("@@species"),t}function ia(t){return t&&typeof t.then=="function"}var zt=function(t){we(e,t);function e(r){var n=t.call(this,function(i){return n.addObserver(i),function(){return n.removeObserver(i)}})||this;return n.observers=new Set,n.promise=new Promise(function(i,a){n.resolve=i,n.reject=a}),n.handlers={next:function(i){n.sub!==null&&(n.latest=["next",i],n.notify("next",i),Yt(n.observers,"next",i))},error:function(i){var a=n.sub;a!==null&&(a&&setTimeout(function(){return a.unsubscribe()}),n.sub=null,n.latest=["error",i],n.reject(i),n.notify("error",i),Yt(n.observers,"error",i))},complete:function(){var i=n.sub;if(i!==null){var a=n.sources.shift();a?ia(a)?a.then(function(o){return n.sub=o.subscribe(n.handlers)}):n.sub=a.subscribe(n.handlers):(i&&setTimeout(function(){return i.unsubscribe()}),n.sub=null,n.latest&&n.latest[0]==="next"?n.resolve(n.latest[1]):n.resolve(),n.notify("complete"),Yt(n.observers,"complete"))}}},n.nextResultListeners=new Set,n.cancel=function(i){n.reject(i),n.sources=[],n.handlers.complete()},n.promise.catch(function(i){}),typeof r=="function"&&(r=[new fe(r)]),ia(r)?r.then(function(i){return n.start(i)},n.handlers.error):n.start(r),n}return e.prototype.start=function(r){this.sub===void 0&&(this.sources=Array.from(r),this.handlers.complete())},e.prototype.deliverLastMessage=function(r){if(this.latest){var n=this.latest[0],i=r[n];i&&i.call(r,this.latest[1]),this.sub===null&&n==="next"&&r.complete&&r.complete()}},e.prototype.addObserver=function(r){this.observers.has(r)||(this.deliverLastMessage(r),this.observers.add(r))},e.prototype.removeObserver=function(r){this.observers.delete(r)&&this.observers.size<1&&this.handlers.complete()},e.prototype.notify=function(r,n){var i=this.nextResultListeners;i.size&&(this.nextResultListeners=new Set,i.forEach(function(a){return a(r,n)}))},e.prototype.beforeNext=function(r){var n=!1;this.nextResultListeners.add(function(i,a){n||(n=!0,r(i,a))})},e}(fe);Ts(zt);function Ue(t){return Array.isArray(t)&&t.length>0}function Or(t){return t.errors&&t.errors.length>0||!1}function Qr(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object.create(null);return t.forEach(function(n){!n||Object.keys(n).forEach(function(i){var a=n[i];a!==void 0&&(r[i]=a)})}),r}var aa=new Map;function Pn(t){var e=aa.get(t)||1;return aa.set(t,e+1),"".concat(t,":").concat(e,":").concat(Math.random().toString(36).slice(2))}function Tf(t){var e=Pn("stringifyForDisplay");return JSON.stringify(t,function(r,n){return n===void 0?e:n}).split(JSON.stringify(e)).join("<undefined>")}function nn(t,e){return Qr(t,e,e.variables&&{variables:P(P({},t&&t.variables),e.variables)})}function oa(t){return new fe(function(e){e.error(t)})}var Ln=function(t,e,r){var n=new Error(r);throw n.name="ServerError",n.response=t,n.statusCode=t.status,n.result=e,n};function Of(t){for(var e=["query","operationName","variables","extensions","context"],r=0,n=Object.keys(t);r<n.length;r++){var i=n[r];if(e.indexOf(i)<0)throw __DEV__?new ne("illegal argument: ".concat(i)):new ne(26)}return t}function Af(t,e){var r=P({},t),n=function(a){typeof a=="function"?r=P(P({},r),a(r)):r=P(P({},r),a)},i=function(){return P({},r)};return Object.defineProperty(e,"setContext",{enumerable:!1,value:n}),Object.defineProperty(e,"getContext",{enumerable:!1,value:i}),e}function bf(t){var e={variables:t.variables||{},extensions:t.extensions||{},operationName:t.operationName,query:t.query};return e.operationName||(e.operationName=typeof e.query!="string"?Rn(e.query)||void 0:""),e}function sa(t,e){return e?e(t):fe.of()}function Wt(t){return typeof t=="function"?new fr(t):t}function mr(t){return t.request.length<=1}var Rf=function(t){we(e,t);function e(r,n){var i=t.call(this,r)||this;return i.link=n,i}return e}(Error),fr=function(){function t(e){e&&(this.request=e)}return t.empty=function(){return new t(function(){return fe.of()})},t.from=function(e){return e.length===0?t.empty():e.map(Wt).reduce(function(r,n){return r.concat(n)})},t.split=function(e,r,n){var i=Wt(r),a=Wt(n||new t(sa));return mr(i)&&mr(a)?new t(function(o){return e(o)?i.request(o)||fe.of():a.request(o)||fe.of()}):new t(function(o,u){return e(o)?i.request(o,u)||fe.of():a.request(o,u)||fe.of()})},t.execute=function(e,r){return e.request(Af(r.context,bf(Of(r))))||fe.of()},t.concat=function(e,r){var n=Wt(e);if(mr(n))return __DEV__&&V.warn(new Rf("You are calling concat on a terminating link, which will have no effect",n)),n;var i=Wt(r);return mr(i)?new t(function(a){return n.request(a,function(o){return i.request(o)||fe.of()})||fe.of()}):new t(function(a,o){return n.request(a,function(u){return i.request(u,o)||fe.of()})||fe.of()})},t.prototype.split=function(e,r,n){return this.concat(t.split(e,r,n||new t(sa)))},t.prototype.concat=function(e){return t.concat(this,e)},t.prototype.request=function(e,r){throw __DEV__?new ne("request is not implemented"):new ne(21)},t.prototype.onError=function(e,r){if(r&&r.error)return r.error(e),!1;throw e},t.prototype.setOnError=function(e){return this.onError=e,this},t}(),Cn=fr.execute,Sf="3.7.0";function kf(t){return!!t.body}function Nf(t){return!!t.getReader}function If(t){return!!(Gr&&t[Symbol.asyncIterator])}function Pf(t){return!!t.stream}function Lf(t){return!!t.arrayBuffer}function Cf(t){return!!t.pipe}function wf(t){var e,r=t[Symbol.asyncIterator]();return e={next:function(){return r.next()}},e[Symbol.asyncIterator]=function(){return this},e}function Mf(t){var e=null,r=null,n=!1,i=[],a=[];function o(l){if(!r){if(a.length){var p=a.shift();if(Array.isArray(p)&&p[0])return p[0]({value:l,done:!1})}i.push(l)}}function u(l){r=l;var p=a.slice();p.forEach(function(d){d[1](l)}),!e||e()}function s(){n=!0;var l=a.slice();l.forEach(function(p){p[0]({value:void 0,done:!0})}),!e||e()}e=function(){e=null,t.removeListener("data",o),t.removeListener("error",u),t.removeListener("end",s),t.removeListener("finish",s),t.removeListener("close",s)},t.on("data",o),t.on("error",u),t.on("end",s),t.on("finish",s),t.on("close",s);function c(){return new Promise(function(l,p){if(r)return p(r);if(i.length)return l({value:i.shift(),done:!1});if(n)return l({value:void 0,done:!0});a.push([l,p])})}var h={next:function(){return c()}};return Gr&&(h[Symbol.asyncIterator]=function(){return this}),h}function Ff(t){var e=!1,r={next:function(){return e?Promise.resolve({value:void 0,done:!0}):(e=!0,new Promise(function(n,i){t.then(function(a){n({value:a,done:!1})}).catch(i)}))}};return Gr&&(r[Symbol.asyncIterator]=function(){return this}),r}function ua(t){var e={next:function(){return t.read()}};return Gr&&(e[Symbol.asyncIterator]=function(){return this}),e}function Df(t){var e=t;if(kf(t)&&(e=t.body),If(e))return wf(e);if(Nf(e))return ua(e.getReader());if(Pf(e))return ua(e.stream().getReader());if(Lf(e))return Ff(e.arrayBuffer());if(Cf(e))return Mf(e);throw new Error("Unknown body type for responseIterator. Please pass a streamable response.")}var ca=Object.prototype.hasOwnProperty;function xf(t,e){var r,n,i;return Xe(this,void 0,void 0,function(){var a,o,u,s,c,h,l,p,d,y,f,v,m,E,g,T,L,A,b,I;return Je(this,function(R){switch(R.label){case 0:if(TextDecoder===void 0)throw new Error("TextDecoder must be defined in the environment: please import a polyfill.");a=new TextDecoder("utf-8"),o=(r=t.headers)===null||r===void 0?void 0:r.get("content-type"),u="boundary=",s=o!=null&&o.includes(u)?o==null?void 0:o.substring((o==null?void 0:o.indexOf(u))+u.length).replace(/['"]/g,"").replace(/\;(.*)/gm,"").trim():"-",c="--".concat(s),h="",l=Df(t),p=!0,R.label=1;case 1:return p?[4,l.next()]:[3,3];case 2:for(d=R.sent(),y=d.value,f=d.done,v=typeof y=="string"?y:a.decode(y),p=!f,h+=v,m=h.indexOf(c);m>-1;){if(E=void 0,I=[h.slice(0,m),h.slice(m+c.length)],E=I[0],h=I[1],E.trim()){if(g=E.indexOf(`\r
\r
`),T=Uf(E.slice(0,g)),L=T["content-type"],L&&L.toLowerCase().indexOf("application/json")===-1)throw new Error("Unsupported patch content type: application/json is required.");A=E.slice(g);try{b=Os(t,A.replace(`\r
`,"")),(Object.keys(b).length>1||"data"in b||"incremental"in b||"errors"in b)&&((n=e.next)===null||n===void 0||n.call(e,b))}catch(k){fi(k,e)}}m=h.indexOf(c)}return[3,1];case 3:return(i=e.complete)===null||i===void 0||i.call(e),[2]}})})}function Uf(t){var e={};return t.split(`
`).forEach(function(r){var n=r.indexOf(":");if(n>-1){var i=r.slice(0,n).trim().toLowerCase(),a=r.slice(n+1).trim();e[i]=a}}),e}function Os(t,e){if(t.status>=300){var r=function(){try{return JSON.parse(e)}catch{return e}};Ln(t,r(),"Response not successful: Received status code ".concat(t.status))}try{return JSON.parse(e)}catch(i){var n=i;throw n.name="ServerParseError",n.response=t,n.statusCode=t.status,n.bodyText=e,n}}function fi(t,e){var r,n;t.name!=="AbortError"&&(t.result&&t.result.errors&&t.result.data&&((r=e.next)===null||r===void 0||r.call(e,t.result)),(n=e.error)===null||n===void 0||n.call(e,t))}function jf(t,e,r){Bf(e)(t).then(function(n){var i,a;(i=r.next)===null||i===void 0||i.call(r,n),(a=r.complete)===null||a===void 0||a.call(r)}).catch(function(n){return fi(n,r)})}function Bf(t){return function(e){return e.text().then(function(r){return Os(e,r)}).then(function(r){return e.status>=300&&Ln(e,r,"Response not successful: Received status code ".concat(e.status)),!Array.isArray(r)&&!ca.call(r,"data")&&!ca.call(r,"errors")&&Ln(e,r,"Server response was missing for query '".concat(Array.isArray(t)?t.map(function(n){return n.operationName}):t.operationName,"'.")),r})}}var wn=function(t,e){var r;try{r=JSON.stringify(t)}catch(i){var n=__DEV__?new ne("Network request failed. ".concat(e," is not serializable: ").concat(i.message)):new ne(23);throw n.parseError=i,n}return r},Vf={includeQuery:!0,includeExtensions:!1,preserveHeaderCase:!1},qf={accept:"*/*","content-type":"application/json"},Wf={method:"POST"},Gf={http:Vf,headers:qf,options:Wf},Qf=function(t,e){return e(t)};function zf(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i={},a={};r.forEach(function(l){i=P(P(P({},i),l.options),{headers:P(P({},i.headers),l.headers)}),l.credentials&&(i.credentials=l.credentials),a=P(P({},a),l.http)}),i.headers=Kf(i.headers,a.preserveHeaderCase);var o=t.operationName,u=t.extensions,s=t.variables,c=t.query,h={operationName:o,variables:s};return a.includeExtensions&&(h.extensions=u),a.includeQuery&&(h.query=e(c,ru)),{options:i,body:h}}function Kf(t,e){if(!e){var r=Object.create(null);return Object.keys(Object(t)).forEach(function(a){r[a.toLowerCase()]=t[a]}),r}var n=Object.create(null);Object.keys(Object(t)).forEach(function(a){n[a.toLowerCase()]={originalName:a,value:t[a]}});var i=Object.create(null);return Object.keys(n).forEach(function(a){i[n[a].originalName]=n[a].value}),i}var Hf=function(t){if(!t&&typeof fetch>"u")throw __DEV__?new ne(`
"fetch" has not been found globally and no fetcher has been configured. To fix this, install a fetch package (like https://www.npmjs.com/package/cross-fetch), instantiate the fetcher, and pass it into your HttpLink constructor. For example:

import fetch from 'cross-fetch';
import { ApolloClient, HttpLink } from '@apollo/client';
const client = new ApolloClient({
  link: new HttpLink({ uri: '/graphql', fetch })
});
    `):new ne(22)},Yf=function(){if(typeof AbortController>"u")return{controller:!1,signal:!1};var t=new AbortController,e=t.signal;return{controller:t,signal:e}},$f=function(t,e){var r=t.getContext(),n=r.uri;return n||(typeof e=="function"?e(t):e||"/graphql")};function Xf(t,e){var r=[],n=function(l,p){r.push("".concat(l,"=").concat(encodeURIComponent(p)))};if("query"in e&&n("query",e.query),e.operationName&&n("operationName",e.operationName),e.variables){var i=void 0;try{i=wn(e.variables,"Variables map")}catch(l){return{parseError:l}}n("variables",i)}if(e.extensions){var a=void 0;try{a=wn(e.extensions,"Extensions map")}catch(l){return{parseError:l}}n("extensions",a)}var o="",u=t,s=t.indexOf("#");s!==-1&&(o=t.substr(s),u=t.substr(0,s));var c=u.indexOf("?")===-1?"?":"&",h=u+c+r.join("&")+o;return{newURI:h}}var la=Ne(function(){return fetch}),Jf=function(t){t===void 0&&(t={});var e=t.uri,r=e===void 0?"/graphql":e,n=t.fetch,i=t.print,a=i===void 0?Qf:i,o=t.includeExtensions,u=t.preserveHeaderCase,s=t.useGETForQueries,c=t.includeUnusedVariables,h=c===void 0?!1:c,l=St(t,["uri","fetch","print","includeExtensions","preserveHeaderCase","useGETForQueries","includeUnusedVariables"]);__DEV__&&Hf(n||la);var p={http:{includeExtensions:o,preserveHeaderCase:u},options:l.fetchOptions,credentials:l.credentials,headers:l.headers};return new fr(function(d){var y=$f(d,r),f=d.getContext(),v={};if(f.clientAwareness){var m=f.clientAwareness,E=m.name,g=m.version;E&&(v["apollographql-client-name"]=E),g&&(v["apollographql-client-version"]=g)}var T=P(P({},v),f.headers),L={http:f.http,options:f.fetchOptions,credentials:f.credentials,headers:T},A=zf(d,a,Gf,p,L),b=A.options,I=A.body;if(I.variables&&!h){var R=new Set(Object.keys(I.variables));Ge(d.query,{Variable:function(x,W,G){G&&G.kind!=="VariableDefinition"&&R.delete(x.name.value)}}),R.size&&(I.variables=P({},I.variables),R.forEach(function(x){delete I.variables[x]}))}var k;if(!b.signal){var _=Yf(),S=_.controller,O=_.signal;k=S,k&&(b.signal=O)}var C=function(x){return x.kind==="OperationDefinition"&&x.operation==="mutation"};if(s&&!d.query.definitions.some(C)&&(b.method="GET"),$n(["defer"],d.query)&&(b.headers.accept="multipart/mixed; deferSpec=20220824, application/json"),b.method==="GET"){var U=Xf(y,I),q=U.newURI,B=U.parseError;if(B)return oa(B);y=q}else try{b.body=wn(I,"Payload")}catch(x){return oa(x)}return new fe(function(x){var W=n||Ne(function(){return fetch})||la;return W(y,b).then(function(G){var K;d.setContext({response:G});var H=(K=G.headers)===null||K===void 0?void 0:K.get("content-type");return H!==null&&/^multipart\/mixed/i.test(H)?xf(G,x):jf(G,d,x)}).catch(function(G){return fi(G,x)}),function(){k&&k.abort()}})})},Zf=function(t){we(e,t);function e(r){r===void 0&&(r={});var n=t.call(this,Jf(r).request)||this;return n.options=r,n}return e}(fr),As=Object.prototype,fa=As.toString,eh=As.hasOwnProperty,ha=Function.prototype.toString,Mn=new Map;function _e(t,e){try{return Fn(t,e)}finally{Mn.clear()}}function Fn(t,e){if(t===e)return!0;var r=fa.call(t),n=fa.call(e);if(r!==n)return!1;switch(r){case"[object Array]":if(t.length!==e.length)return!1;case"[object Object]":{if(da(t,e))return!0;var i=pa(t),a=pa(e),o=i.length;if(o!==a.length)return!1;for(var u=0;u<o;++u)if(!eh.call(e,i[u]))return!1;for(var u=0;u<o;++u){var s=i[u];if(!Fn(t[s],e[s]))return!1}return!0}case"[object Error]":return t.name===e.name&&t.message===e.message;case"[object Number]":if(t!==t)return e!==e;case"[object Boolean]":case"[object Date]":return+t==+e;case"[object RegExp]":case"[object String]":return t=="".concat(e);case"[object Map]":case"[object Set]":{if(t.size!==e.size)return!1;if(da(t,e))return!0;for(var c=t.entries(),h=r==="[object Map]";;){var l=c.next();if(l.done)break;var p=l.value,d=p[0],y=p[1];if(!e.has(d)||h&&!Fn(y,e.get(d)))return!1}return!0}case"[object Uint16Array]":case"[object Uint8Array]":case"[object Uint32Array]":case"[object Int32Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object ArrayBuffer]":t=new Uint8Array(t),e=new Uint8Array(e);case"[object DataView]":{var f=t.byteLength;if(f===e.byteLength)for(;f--&&t[f]===e[f];);return f===-1}case"[object AsyncFunction]":case"[object GeneratorFunction]":case"[object AsyncGeneratorFunction]":case"[object Function]":{var v=ha.call(t);return v!==ha.call(e)?!1:!nh(v,rh)}}return!1}function pa(t){return Object.keys(t).filter(th,t)}function th(t){return this[t]!==void 0}var rh="{ [native code] }";function nh(t,e){var r=t.length-e.length;return r>=0&&t.indexOf(e,r)===r}function da(t,e){var r=Mn.get(t);if(r){if(r.has(e))return!0}else Mn.set(t,r=new Set);return r.add(e),!1}function ih(t){return!!t.incremental}var ah=function(){return Object.create(null)},bs=Array.prototype,oh=bs.forEach,sh=bs.slice,hr=function(){function t(e,r){e===void 0&&(e=!0),r===void 0&&(r=ah),this.weakness=e,this.makeData=r}return t.prototype.lookup=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this.lookupArray(e)},t.prototype.lookupArray=function(e){var r=this;return oh.call(e,function(n){return r=r.getChildTrie(n)}),r.data||(r.data=this.makeData(sh.call(e)))},t.prototype.getChildTrie=function(e){var r=this.weakness&&uh(e)?this.weak||(this.weak=new WeakMap):this.strong||(this.strong=new Map),n=r.get(e);return n||r.set(e,n=new t(this.weakness,this.makeData)),n},t}();function uh(t){switch(typeof t){case"object":if(t===null)break;case"function":return!0}return!1}var Te=null,va={},ch=1,lh=function(){return function(){function t(){this.id=["slot",ch++,Date.now(),Math.random().toString(36).slice(2)].join(":")}return t.prototype.hasValue=function(){for(var e=Te;e;e=e.parent)if(this.id in e.slots){var r=e.slots[this.id];if(r===va)break;return e!==Te&&(Te.slots[this.id]=r),!0}return Te&&(Te.slots[this.id]=va),!1},t.prototype.getValue=function(){if(this.hasValue())return Te.slots[this.id]},t.prototype.withValue=function(e,r,n,i){var a,o=(a={__proto__:null},a[this.id]=e,a),u=Te;Te={parent:u,slots:o};try{return r.apply(i,n)}finally{Te=u}},t.bind=function(e){var r=Te;return function(){var n=Te;try{return Te=r,e.apply(this,arguments)}finally{Te=n}}},t.noContext=function(e,r,n){if(Te){var i=Te;try{return Te=null,e.apply(n,r)}finally{Te=i}}else return e.apply(n,r)},t}()},an="@wry/context:Slot",on=Array,hi=on[an]||function(){var t=lh();try{Object.defineProperty(on,an,{value:on[an]=t,enumerable:!1,writable:!1,configurable:!1})}finally{return t}}();hi.bind;hi.noContext;function fh(){}var hh=function(){function t(e,r){e===void 0&&(e=1/0),r===void 0&&(r=fh),this.max=e,this.dispose=r,this.map=new Map,this.newest=null,this.oldest=null}return t.prototype.has=function(e){return this.map.has(e)},t.prototype.get=function(e){var r=this.getNode(e);return r&&r.value},t.prototype.getNode=function(e){var r=this.map.get(e);if(r&&r!==this.newest){var n=r.older,i=r.newer;i&&(i.older=n),n&&(n.newer=i),r.older=this.newest,r.older.newer=r,r.newer=null,this.newest=r,r===this.oldest&&(this.oldest=i)}return r},t.prototype.set=function(e,r){var n=this.getNode(e);return n?n.value=r:(n={key:e,value:r,newer:null,older:this.newest},this.newest&&(this.newest.newer=n),this.newest=n,this.oldest=this.oldest||n,this.map.set(e,n),n.value)},t.prototype.clean=function(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)},t.prototype.delete=function(e){var r=this.map.get(e);return r?(r===this.newest&&(this.newest=r.older),r===this.oldest&&(this.oldest=r.newer),r.newer&&(r.newer.older=r.older),r.older&&(r.older.newer=r.newer),this.map.delete(e),this.dispose(r.value,e),!0):!1},t}(),zr=new hi,sn,ph=Object.prototype.hasOwnProperty,pi=(sn=Array.from,sn===void 0?function(t){var e=[];return t.forEach(function(r){return e.push(r)}),e}:sn);function Sr(t){var e=t.unsubscribe;typeof e=="function"&&(t.unsubscribe=void 0,e())}var er=[],dh=100;function It(t,e){if(!t)throw new Error(e||"assertion failure")}function vh(t,e){var r=t.length;return r>0&&r===e.length&&t[r-1]===e[r-1]}function Rs(t){switch(t.length){case 0:throw new Error("unknown value");case 1:return t[0];case 2:throw t[1]}}function mh(t){return t.slice(0)}var yh=function(){function t(e){this.fn=e,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],this.deps=null,++t.count}return t.prototype.peek=function(){if(this.value.length===1&&!tt(this))return ma(this),this.value[0]},t.prototype.recompute=function(e){return It(!this.recomputing,"already recomputing"),ma(this),tt(this)?gh(this,e):Rs(this.value)},t.prototype.setDirty=function(){this.dirty||(this.dirty=!0,this.value.length=0,Ss(this),Sr(this))},t.prototype.dispose=function(){var e=this;this.setDirty(),Ls(this),di(this,function(r,n){r.setDirty(),Cs(r,e)})},t.prototype.forget=function(){this.dispose()},t.prototype.dependOn=function(e){e.add(this),this.deps||(this.deps=er.pop()||new Set),this.deps.add(e)},t.prototype.forgetDeps=function(){var e=this;this.deps&&(pi(this.deps).forEach(function(r){return r.delete(e)}),this.deps.clear(),er.push(this.deps),this.deps=null)},t.count=0,t}();function ma(t){var e=zr.getValue();if(e)return t.parents.add(e),e.childValues.has(t)||e.childValues.set(t,[]),tt(t)?Ns(e,t):Is(e,t),e}function gh(t,e){return Ls(t),zr.withValue(t,Eh,[t,e]),Th(t,e)&&_h(t),Rs(t.value)}function Eh(t,e){t.recomputing=!0,t.value.length=0;try{t.value[0]=t.fn.apply(null,e)}catch(r){t.value[1]=r}t.recomputing=!1}function tt(t){return t.dirty||!!(t.dirtyChildren&&t.dirtyChildren.size)}function _h(t){t.dirty=!1,!tt(t)&&ks(t)}function Ss(t){di(t,Ns)}function ks(t){di(t,Is)}function di(t,e){var r=t.parents.size;if(r)for(var n=pi(t.parents),i=0;i<r;++i)e(n[i],t)}function Ns(t,e){It(t.childValues.has(e)),It(tt(e));var r=!tt(t);if(!t.dirtyChildren)t.dirtyChildren=er.pop()||new Set;else if(t.dirtyChildren.has(e))return;t.dirtyChildren.add(e),r&&Ss(t)}function Is(t,e){It(t.childValues.has(e)),It(!tt(e));var r=t.childValues.get(e);r.length===0?t.childValues.set(e,mh(e.value)):vh(r,e.value)||t.setDirty(),Ps(t,e),!tt(t)&&ks(t)}function Ps(t,e){var r=t.dirtyChildren;r&&(r.delete(e),r.size===0&&(er.length<dh&&er.push(r),t.dirtyChildren=null))}function Ls(t){t.childValues.size>0&&t.childValues.forEach(function(e,r){Cs(t,r)}),t.forgetDeps(),It(t.dirtyChildren===null)}function Cs(t,e){e.parents.delete(t),t.childValues.delete(e),Ps(t,e)}function Th(t,e){if(typeof t.subscribe=="function")try{Sr(t),t.unsubscribe=t.subscribe.apply(null,e)}catch{return t.setDirty(),!1}return!0}var Oh={setDirty:!0,dispose:!0,forget:!0};function ws(t){var e=new Map,r=t&&t.subscribe;function n(i){var a=zr.getValue();if(a){var o=e.get(i);o||e.set(i,o=new Set),a.dependOn(o),typeof r=="function"&&(Sr(o),o.unsubscribe=r(i))}}return n.dirty=function(a,o){var u=e.get(a);if(u){var s=o&&ph.call(Oh,o)?o:"setDirty";pi(u).forEach(function(c){return c[s]()}),e.delete(a),Sr(u)}},n}function Ms(){var t=new hr(typeof WeakMap=="function");return function(){return t.lookupArray(arguments)}}Ms();var un=new Set;function kr(t,e){e===void 0&&(e=Object.create(null));var r=new hh(e.max||Math.pow(2,16),function(c){return c.dispose()}),n=e.keyArgs,i=e.makeCacheKey||Ms(),a=function(){var c=i.apply(null,n?n.apply(null,arguments):arguments);if(c===void 0)return t.apply(null,arguments);var h=r.get(c);h||(r.set(c,h=new yh(t)),h.subscribe=e.subscribe,h.forget=function(){return r.delete(c)});var l=h.recompute(Array.prototype.slice.call(arguments));return r.set(c,h),un.add(r),zr.hasValue()||(un.forEach(function(p){return p.clean()}),un.clear()),l};Object.defineProperty(a,"size",{get:function(){return r.map.size},configurable:!1,enumerable:!1});function o(c){var h=r.get(c);h&&h.setDirty()}a.dirtyKey=o,a.dirty=function(){o(i.apply(null,arguments))};function u(c){var h=r.get(c);if(h)return h.peek()}a.peekKey=u,a.peek=function(){return u(i.apply(null,arguments))};function s(c){return r.delete(c)}return a.forgetKey=s,a.forget=function(){return s(i.apply(null,arguments))},a.makeCacheKey=i,a.getKey=n?function(){return i.apply(null,n.apply(null,arguments))}:i,Object.freeze(a)}var Ah=function(){function t(){this.getFragmentDoc=kr(Dl)}return t.prototype.batch=function(e){var r=this,n=typeof e.optimistic=="string"?e.optimistic:e.optimistic===!1?null:void 0,i;return this.performTransaction(function(){return i=e.update(r)},n),i},t.prototype.recordOptimisticTransaction=function(e,r){this.performTransaction(e,r)},t.prototype.transformDocument=function(e){return e},t.prototype.transformForLink=function(e){return e},t.prototype.identify=function(e){},t.prototype.gc=function(){return[]},t.prototype.modify=function(e){return!1},t.prototype.readQuery=function(e,r){return r===void 0&&(r=!!e.optimistic),this.read(P(P({},e),{rootId:e.id||"ROOT_QUERY",optimistic:r}))},t.prototype.readFragment=function(e,r){return r===void 0&&(r=!!e.optimistic),this.read(P(P({},e),{query:this.getFragmentDoc(e.fragment,e.fragmentName),rootId:e.id,optimistic:r}))},t.prototype.writeQuery=function(e){var r=e.id,n=e.data,i=St(e,["id","data"]);return this.write(Object.assign(i,{dataId:r||"ROOT_QUERY",result:n}))},t.prototype.writeFragment=function(e){var r=e.id,n=e.data,i=e.fragment,a=e.fragmentName,o=St(e,["id","data","fragment","fragmentName"]);return this.write(Object.assign(o,{query:this.getFragmentDoc(i,a),dataId:r,result:n}))},t.prototype.updateQuery=function(e,r){return this.batch({update:function(n){var i=n.readQuery(e),a=r(i);return a==null?i:(n.writeQuery(P(P({},e),{data:a})),a)}})},t.prototype.updateFragment=function(e,r){return this.batch({update:function(n){var i=n.readFragment(e),a=r(i);return a==null?i:(n.writeFragment(P(P({},e),{data:a})),a)}})},t}(),Fs=function(t){we(e,t);function e(r,n,i,a){var o,u=t.call(this,r)||this;if(u.message=r,u.path=n,u.query=i,u.variables=a,Array.isArray(u.path)){u.missing=u.message;for(var s=u.path.length-1;s>=0;--s)u.missing=(o={},o[u.path[s]]=u.missing,o)}else u.missing=u.path;return u.__proto__=e.prototype,u}return e}(Error),Ee=Object.prototype.hasOwnProperty;function Gt(t){return t==null}var ge=Array.isArray;function Ds(t,e){var r=t.__typename,n=t.id,i=t._id;if(typeof r=="string"&&(e&&(e.keyObject=Gt(n)?Gt(i)?void 0:{_id:i}:{id:n}),Gt(n)&&!Gt(i)&&(n=i),!Gt(n)))return"".concat(r,":").concat(typeof n=="number"||typeof n=="string"?n:JSON.stringify(n))}var xs={dataIdFromObject:Ds,addTypename:!0,resultCaching:!0,canonizeResults:!1};function bh(t){return Qr(xs,t)}function Us(t){var e=t.canonizeResults;return e===void 0?xs.canonizeResults:e}function Rh(t,e){return se(e)?t.get(e.__ref,"__typename"):e&&e.__typename}var js=/^[_a-z][_0-9a-z]*/i;function rt(t){var e=t.match(js);return e?e[0]:t}function Dn(t,e,r){return me(e)?ge(e)?e.every(function(n){return Dn(t,n,r)}):t.selections.every(function(n){if(We(n)&&Vr(n,r)){var i=ht(n);return Ee.call(e,i)&&(!n.selectionSet||Dn(n.selectionSet,e[i],r))}return!0}):!1}function Tt(t){return me(t)&&!se(t)&&!ge(t)}function Sh(){return new pt}function Bs(t,e){var r=Xn(ei(t));return{fragmentMap:r,lookupFragment:function(n){var i=r[n];return!i&&e&&(i=e.lookup(n)),i||null}}}var Ar=Object.create(null),cn=function(){return Ar},ya=Object.create(null),tr=function(){function t(e,r){var n=this;this.policies=e,this.group=r,this.data=Object.create(null),this.rootIds=Object.create(null),this.refs=Object.create(null),this.getFieldValue=function(i,a){return In(se(i)?n.get(i.__ref,a):i&&i[a])},this.canRead=function(i){return se(i)?n.has(i.__ref):typeof i=="object"},this.toReference=function(i,a){if(typeof i=="string")return bt(i);if(se(i))return i;var o=n.policies.identify(i)[0];if(o){var u=bt(o);return a&&n.merge(o,i),u}}}return t.prototype.toObject=function(){return P({},this.data)},t.prototype.has=function(e){return this.lookup(e,!0)!==void 0},t.prototype.get=function(e,r){if(this.group.depend(e,r),Ee.call(this.data,e)){var n=this.data[e];if(n&&Ee.call(n,r))return n[r]}if(r==="__typename"&&Ee.call(this.policies.rootTypenamesById,e))return this.policies.rootTypenamesById[e];if(this instanceof $e)return this.parent.get(e,r)},t.prototype.lookup=function(e,r){if(r&&this.group.depend(e,"__exists"),Ee.call(this.data,e))return this.data[e];if(this instanceof $e)return this.parent.lookup(e,r);if(this.policies.rootTypenamesById[e])return Object.create(null)},t.prototype.merge=function(e,r){var n=this,i;se(e)&&(e=e.__ref),se(r)&&(r=r.__ref);var a=typeof e=="string"?this.lookup(i=e):e,o=typeof r=="string"?this.lookup(i=r):r;if(!!o){__DEV__?V(typeof i=="string","store.merge expects a string ID"):V(typeof i=="string",1);var u=new pt(Nh).merge(a,o);if(this.data[i]=u,u!==a&&(delete this.refs[i],this.group.caching)){var s=Object.create(null);a||(s.__exists=1),Object.keys(o).forEach(function(c){if(!a||a[c]!==u[c]){s[c]=1;var h=rt(c);h!==c&&!n.policies.hasKeyArgs(u.__typename,h)&&(s[h]=1),u[c]===void 0&&!(n instanceof $e)&&delete u[c]}}),s.__typename&&!(a&&a.__typename)&&this.policies.rootTypenamesById[i]===u.__typename&&delete s.__typename,Object.keys(s).forEach(function(c){return n.group.dirty(i,c)})}}},t.prototype.modify=function(e,r){var n=this,i=this.lookup(e);if(i){var a=Object.create(null),o=!1,u=!0,s={DELETE:Ar,INVALIDATE:ya,isReference:se,toReference:this.toReference,canRead:this.canRead,readField:function(c,h){return n.policies.readField(typeof c=="string"?{fieldName:c,from:h||bt(e)}:c,{store:n})}};if(Object.keys(i).forEach(function(c){var h=rt(c),l=i[c];if(l!==void 0){var p=typeof r=="function"?r:r[c]||r[h];if(p){var d=p===cn?Ar:p(In(l),P(P({},s),{fieldName:h,storeFieldName:c,storage:n.getStorage(e,c)}));d===ya?n.group.dirty(e,c):(d===Ar&&(d=void 0),d!==l&&(a[c]=d,o=!0,l=d))}l!==void 0&&(u=!1)}}),o)return this.merge(e,a),u&&(this instanceof $e?this.data[e]=void 0:delete this.data[e],this.group.dirty(e,"__exists")),!0}return!1},t.prototype.delete=function(e,r,n){var i,a=this.lookup(e);if(a){var o=this.getFieldValue(a,"__typename"),u=r&&n?this.policies.getStoreFieldName({typename:o,fieldName:r,args:n}):r;return this.modify(e,u?(i={},i[u]=cn,i):cn)}return!1},t.prototype.evict=function(e,r){var n=!1;return e.id&&(Ee.call(this.data,e.id)&&(n=this.delete(e.id,e.fieldName,e.args)),this instanceof $e&&this!==r&&(n=this.parent.evict(e,r)||n),(e.fieldName||n)&&this.group.dirty(e.id,e.fieldName||"__exists")),n},t.prototype.clear=function(){this.replace(null)},t.prototype.extract=function(){var e=this,r=this.toObject(),n=[];return this.getRootIdSet().forEach(function(i){Ee.call(e.policies.rootTypenamesById,i)||n.push(i)}),n.length&&(r.__META={extraRootIds:n.sort()}),r},t.prototype.replace=function(e){var r=this;if(Object.keys(this.data).forEach(function(a){e&&Ee.call(e,a)||r.delete(a)}),e){var n=e.__META,i=St(e,["__META"]);Object.keys(i).forEach(function(a){r.merge(a,i[a])}),n&&n.extraRootIds.forEach(this.retain,this)}},t.prototype.retain=function(e){return this.rootIds[e]=(this.rootIds[e]||0)+1},t.prototype.release=function(e){if(this.rootIds[e]>0){var r=--this.rootIds[e];return r||delete this.rootIds[e],r}return 0},t.prototype.getRootIdSet=function(e){return e===void 0&&(e=new Set),Object.keys(this.rootIds).forEach(e.add,e),this instanceof $e?this.parent.getRootIdSet(e):Object.keys(this.policies.rootTypenamesById).forEach(e.add,e),e},t.prototype.gc=function(){var e=this,r=this.getRootIdSet(),n=this.toObject();r.forEach(function(o){Ee.call(n,o)&&(Object.keys(e.findChildRefIds(o)).forEach(r.add,r),delete n[o])});var i=Object.keys(n);if(i.length){for(var a=this;a instanceof $e;)a=a.parent;i.forEach(function(o){return a.delete(o)})}return i},t.prototype.findChildRefIds=function(e){if(!Ee.call(this.refs,e)){var r=this.refs[e]=Object.create(null),n=this.data[e];if(!n)return r;var i=new Set([n]);i.forEach(function(a){se(a)&&(r[a.__ref]=!0),me(a)&&Object.keys(a).forEach(function(o){var u=a[o];me(u)&&i.add(u)})})}return this.refs[e]},t.prototype.makeCacheKey=function(){return this.group.keyMaker.lookupArray(arguments)},t}(),Vs=function(){function t(e,r){r===void 0&&(r=null),this.caching=e,this.parent=r,this.d=null,this.resetCaching()}return t.prototype.resetCaching=function(){this.d=this.caching?ws():null,this.keyMaker=new hr(mt)},t.prototype.depend=function(e,r){if(this.d){this.d(ln(e,r));var n=rt(r);n!==r&&this.d(ln(e,n)),this.parent&&this.parent.depend(e,r)}},t.prototype.dirty=function(e,r){this.d&&this.d.dirty(ln(e,r),r==="__exists"?"forget":"setDirty")},t}();function ln(t,e){return e+"#"+t}function ga(t,e){$t(t)&&t.group.depend(e,"__exists")}(function(t){var e=function(r){we(n,r);function n(i){var a=i.policies,o=i.resultCaching,u=o===void 0?!0:o,s=i.seed,c=r.call(this,a,new Vs(u))||this;return c.stump=new kh(c),c.storageTrie=new hr(mt),s&&c.replace(s),c}return n.prototype.addLayer=function(i,a){return this.stump.addLayer(i,a)},n.prototype.removeLayer=function(){return this},n.prototype.getStorage=function(){return this.storageTrie.lookupArray(arguments)},n}(t);t.Root=e})(tr||(tr={}));var $e=function(t){we(e,t);function e(r,n,i,a){var o=t.call(this,n.policies,a)||this;return o.id=r,o.parent=n,o.replay=i,o.group=a,i(o),o}return e.prototype.addLayer=function(r,n){return new e(r,this,n,this.group)},e.prototype.removeLayer=function(r){var n=this,i=this.parent.removeLayer(r);return r===this.id?(this.group.caching&&Object.keys(this.data).forEach(function(a){var o=n.data[a],u=i.lookup(a);u?o?o!==u&&Object.keys(o).forEach(function(s){_e(o[s],u[s])||n.group.dirty(a,s)}):(n.group.dirty(a,"__exists"),Object.keys(u).forEach(function(s){n.group.dirty(a,s)})):n.delete(a)}),i):i===this.parent?this:i.addLayer(this.id,this.replay)},e.prototype.toObject=function(){return P(P({},this.parent.toObject()),this.data)},e.prototype.findChildRefIds=function(r){var n=this.parent.findChildRefIds(r);return Ee.call(this.data,r)?P(P({},n),t.prototype.findChildRefIds.call(this,r)):n},e.prototype.getStorage=function(){for(var r=this.parent;r.parent;)r=r.parent;return r.getStorage.apply(r,arguments)},e}(tr),kh=function(t){we(e,t);function e(r){return t.call(this,"EntityStore.Stump",r,function(){},new Vs(r.group.caching,r.group))||this}return e.prototype.removeLayer=function(){return this},e.prototype.merge=function(){return this.parent.merge.apply(this.parent,arguments)},e}($e);function Nh(t,e,r){var n=t[r],i=e[r];return _e(n,i)?n:i}function $t(t){return!!(t instanceof tr&&t.group.caching)}function Ih(t){return me(t)?ge(t)?t.slice(0):P({__proto__:Object.getPrototypeOf(t)},t):t}var xn=function(){function t(){this.known=new(gf?WeakSet:Set),this.pool=new hr(mt),this.passes=new WeakMap,this.keysByJSON=new Map,this.empty=this.admit({})}return t.prototype.isKnown=function(e){return me(e)&&this.known.has(e)},t.prototype.pass=function(e){if(me(e)){var r=Ih(e);return this.passes.set(r,e),r}return e},t.prototype.admit=function(e){var r=this;if(me(e)){var n=this.passes.get(e);if(n)return n;var i=Object.getPrototypeOf(e);switch(i){case Array.prototype:{if(this.known.has(e))return e;var a=e.map(this.admit,this),o=this.pool.lookupArray(a);return o.array||(this.known.add(o.array=a),__DEV__&&Object.freeze(a)),o.array}case null:case Object.prototype:{if(this.known.has(e))return e;var u=Object.getPrototypeOf(e),s=[u],c=this.sortedKeys(e);s.push(c.json);var h=s.length;c.sorted.forEach(function(d){s.push(r.admit(e[d]))});var o=this.pool.lookupArray(s);if(!o.object){var l=o.object=Object.create(u);this.known.add(l),c.sorted.forEach(function(d,y){l[d]=s[h+y]}),__DEV__&&Object.freeze(l)}return o.object}}}return e},t.prototype.sortedKeys=function(e){var r=Object.keys(e),n=this.pool.lookupArray(r);if(!n.keys){r.sort();var i=JSON.stringify(r);(n.keys=this.keysByJSON.get(i))||this.keysByJSON.set(i,n.keys={sorted:r,json:i})}return n.keys},t}(),ft=Object.assign(function(t){if(me(t)){Un===void 0&&Ea();var e=Un.admit(t),r=jn.get(e);return r===void 0&&jn.set(e,r=JSON.stringify(e)),r}return JSON.stringify(t)},{reset:Ea}),Un,jn;function Ea(){Un=new xn,jn=new(mt?WeakMap:Map)}function _a(t){return[t.selectionSet,t.objectOrReference,t.context,t.context.canonizeResults]}var Ph=function(){function t(e){var r=this;this.knownResults=new(mt?WeakMap:Map),this.config=Qr(e,{addTypename:e.addTypename!==!1,canonizeResults:Us(e)}),this.canon=e.canon||new xn,this.executeSelectionSet=kr(function(n){var i,a=n.context.canonizeResults,o=_a(n);o[3]=!a;var u=(i=r.executeSelectionSet).peek.apply(i,o);return u?a?P(P({},u),{result:r.canon.admit(u.result)}):u:(ga(n.context.store,n.enclosingRef.__ref),r.execSelectionSetImpl(n))},{max:this.config.resultCacheMaxSize,keyArgs:_a,makeCacheKey:function(n,i,a,o){if($t(a.store))return a.store.makeCacheKey(n,se(i)?i.__ref:i,a.varString,o)}}),this.executeSubSelectedArray=kr(function(n){return ga(n.context.store,n.enclosingRef.__ref),r.execSubSelectedArrayImpl(n)},{max:this.config.resultCacheMaxSize,makeCacheKey:function(n){var i=n.field,a=n.array,o=n.context;if($t(o.store))return o.store.makeCacheKey(i,a,o.varString)}})}return t.prototype.resetCanon=function(){this.canon=new xn},t.prototype.diffQueryAgainstStore=function(e){var r=e.store,n=e.query,i=e.rootId,a=i===void 0?"ROOT_QUERY":i,o=e.variables,u=e.returnPartialData,s=u===void 0?!0:u,c=e.canonizeResults,h=c===void 0?this.config.canonizeResults:c,l=this.config.cache.policies;o=P(P({},ri(ps(n))),o);var p=bt(a),d=this.executeSelectionSet({selectionSet:ti(n).selectionSet,objectOrReference:p,enclosingRef:p,context:P({store:r,query:n,policies:l,variables:o,varString:ft(o),canonizeResults:h},Bs(n,this.config.fragments))}),y;if(d.missing&&(y=[new Fs(Lh(d.missing),d.missing,n,o)],!s))throw y[0];return{result:d.result,complete:!y,missing:y}},t.prototype.isFresh=function(e,r,n,i){if($t(i.store)&&this.knownResults.get(e)===n){var a=this.executeSelectionSet.peek(n,r,i,this.canon.isKnown(e));if(a&&e===a.result)return!0}return!1},t.prototype.execSelectionSetImpl=function(e){var r=this,n=e.selectionSet,i=e.objectOrReference,a=e.enclosingRef,o=e.context;if(se(i)&&!o.policies.rootTypenamesById[i.__ref]&&!o.store.has(i.__ref))return{result:this.canon.empty,missing:"Dangling reference to missing ".concat(i.__ref," object")};var u=o.variables,s=o.policies,c=o.store,h=c.getFieldValue(i,"__typename"),l=[],p,d=new pt;this.config.addTypename&&typeof h=="string"&&!s.rootIdsByTypename[h]&&l.push({__typename:h});function y(g,T){var L;return g.missing&&(p=d.merge(p,(L={},L[T]=g.missing,L))),g.result}var f=new Set(n.selections);f.forEach(function(g){var T,L;if(!!Vr(g,u))if(We(g)){var A=s.readField({fieldName:g.name.value,field:g,variables:o.variables,from:i},o),b=ht(g);A===void 0?ii.added(g)||(p=d.merge(p,(T={},T[b]="Can't find field '".concat(g.name.value,"' on ").concat(se(i)?i.__ref+" object":"object "+JSON.stringify(i,null,2)),T))):ge(A)?A=y(r.executeSubSelectedArray({field:g,array:A,enclosingRef:a,context:o}),b):g.selectionSet?A!=null&&(A=y(r.executeSelectionSet({selectionSet:g.selectionSet,objectOrReference:A,enclosingRef:se(A)?A:a,context:o}),b)):o.canonizeResults&&(A=r.canon.pass(A)),A!==void 0&&l.push((L={},L[b]=A,L))}else{var I=Jn(g,o.lookupFragment);if(!I&&g.kind===Ba.FRAGMENT_SPREAD)throw __DEV__?new ne("No fragment named ".concat(g.name.value)):new ne(5);I&&s.fragmentMatches(I,h)&&I.selectionSet.selections.forEach(f.add,f)}});var v=ai(l),m={result:v,missing:p},E=o.canonizeResults?this.canon.admit(m):In(m);return E.result&&this.knownResults.set(E.result,n),E},t.prototype.execSubSelectedArrayImpl=function(e){var r=this,n=e.field,i=e.array,a=e.enclosingRef,o=e.context,u,s=new pt;function c(h,l){var p;return h.missing&&(u=s.merge(u,(p={},p[l]=h.missing,p))),h.result}return n.selectionSet&&(i=i.filter(o.store.canRead)),i=i.map(function(h,l){return h===null?null:ge(h)?c(r.executeSubSelectedArray({field:n,array:h,enclosingRef:a,context:o}),l):n.selectionSet?c(r.executeSelectionSet({selectionSet:n.selectionSet,objectOrReference:h,enclosingRef:se(h)?h:a,context:o}),l):(__DEV__&&Ch(o.store,n,h),h)}),{result:o.canonizeResults?this.canon.admit(i):i,missing:u}},t}();function Lh(t){try{JSON.stringify(t,function(e,r){if(typeof r=="string")throw r;return r})}catch(e){return e}}function Ch(t,e,r){if(!e.selectionSet){var n=new Set([r]);n.forEach(function(i){me(i)&&(__DEV__?V(!se(i),"Missing selection set for object of type ".concat(Rh(t,i)," returned for query field ").concat(e.name.value)):V(!se(i),6),Object.values(i).forEach(n.add,n))})}}var Oe=null,Ta={},wh=1,Mh=function(){return function(){function t(){this.id=["slot",wh++,Date.now(),Math.random().toString(36).slice(2)].join(":")}return t.prototype.hasValue=function(){for(var e=Oe;e;e=e.parent)if(this.id in e.slots){var r=e.slots[this.id];if(r===Ta)break;return e!==Oe&&(Oe.slots[this.id]=r),!0}return Oe&&(Oe.slots[this.id]=Ta),!1},t.prototype.getValue=function(){if(this.hasValue())return Oe.slots[this.id]},t.prototype.withValue=function(e,r,n,i){var a,o=(a={__proto__:null},a[this.id]=e,a),u=Oe;Oe={parent:u,slots:o};try{return r.apply(i,n)}finally{Oe=u}},t.bind=function(e){var r=Oe;return function(){var n=Oe;try{return Oe=r,e.apply(this,arguments)}finally{Oe=n}}},t.noContext=function(e,r,n){if(Oe){var i=Oe;try{return Oe=null,e.apply(n,r)}finally{Oe=i}}else return e.apply(n,r)},t}()};function Oa(t){try{return t()}catch{}}var fn="@wry/context:Slot",Fh=Oa(function(){return globalThis})||Oa(function(){return global})||Object.create(null),Aa=Fh,vi=Aa[fn]||Array[fn]||function(t){try{Object.defineProperty(Aa,fn,{value:t,enumerable:!1,writable:!1,configurable:!0})}finally{return t}}(Mh());vi.bind;vi.noContext;var mi=new vi,ba=new WeakMap;function Xt(t){var e=ba.get(t);return e||ba.set(t,e={vars:new Set,dep:ws()}),e}function Ra(t){Xt(t).vars.forEach(function(e){return e.forgetCache(t)})}function Dh(t){Xt(t).vars.forEach(function(e){return e.attachCache(t)})}function xh(t){var e=new Set,r=new Set,n=function(a){if(arguments.length>0){if(t!==a){t=a,e.forEach(function(s){Xt(s).dep.dirty(n),Uh(s)});var o=Array.from(r);r.clear(),o.forEach(function(s){return s(t)})}}else{var u=mi.getValue();u&&(i(u),Xt(u).dep(n))}return t};n.onNextChange=function(a){return r.add(a),function(){r.delete(a)}};var i=n.attachCache=function(a){return e.add(a),Xt(a).vars.add(n),n};return n.forgetCache=function(a){return e.delete(a)},n}function Uh(t){t.broadcastWatches&&t.broadcastWatches()}var Sa=Object.create(null);function yi(t){var e=JSON.stringify(t);return Sa[e]||(Sa[e]=Object.create(null))}function ka(t){var e=yi(t);return e.keyFieldsFn||(e.keyFieldsFn=function(r,n){var i=function(o,u){return n.readField(u,o)},a=n.keyObject=gi(t,function(o){var u=Rt(n.storeObject,o,i);return u===void 0&&r!==n.storeObject&&Ee.call(r,o[0])&&(u=Rt(r,o,Ws)),__DEV__?V(u!==void 0,"Missing field '".concat(o.join("."),"' while extracting keyFields from ").concat(JSON.stringify(r))):V(u!==void 0,2),u});return"".concat(n.typename,":").concat(JSON.stringify(a))})}function Na(t){var e=yi(t);return e.keyArgsFn||(e.keyArgsFn=function(r,n){var i=n.field,a=n.variables,o=n.fieldName,u=gi(t,function(c){var h=c[0],l=h.charAt(0);if(l==="@"){if(i&&Ue(i.directives)){var p=h.slice(1),d=i.directives.find(function(m){return m.name.value===p}),y=d&&qr(d,a);return y&&Rt(y,c.slice(1))}return}if(l==="$"){var f=h.slice(1);if(a&&Ee.call(a,f)){var v=c.slice(0);return v[0]=f,Rt(a,v)}return}if(r)return Rt(r,c)}),s=JSON.stringify(u);return(r||s!=="{}")&&(o+=":"+s),o})}function gi(t,e){var r=new pt;return qs(t).reduce(function(n,i){var a,o=e(i);if(o!==void 0){for(var u=i.length-1;u>=0;--u)o=(a={},a[i[u]]=o,a);n=r.merge(n,o)}return n},Object.create(null))}function qs(t){var e=yi(t);if(!e.paths){var r=e.paths=[],n=[];t.forEach(function(i,a){ge(i)?(qs(i).forEach(function(o){return r.push(n.concat(o))}),n.length=0):(n.push(i),ge(t[a+1])||(r.push(n.slice(0)),n.length=0))})}return e.paths}function Ws(t,e){return t[e]}function Rt(t,e,r){return r=r||Ws,Gs(e.reduce(function n(i,a){return ge(i)?i.map(function(o){return n(o,a)}):i&&r(i,a)},t))}function Gs(t){return me(t)?ge(t)?t.map(Gs):gi(Object.keys(t).sort(),function(e){return Rt(t,e)}):t}Zn.setStringify(ft);function Bn(t){return t.args!==void 0?t.args:t.field?qr(t.field,t.variables):null}var jh=function(){},Ia=function(t,e){return e.fieldName},Pa=function(t,e,r){var n=r.mergeObjects;return n(t,e)},La=function(t,e){return e},Bh=function(){function t(e){this.config=e,this.typePolicies=Object.create(null),this.toBeAdded=Object.create(null),this.supertypeMap=new Map,this.fuzzySubtypes=new Map,this.rootIdsByTypename=Object.create(null),this.rootTypenamesById=Object.create(null),this.usingPossibleTypes=!1,this.config=P({dataIdFromObject:Ds},e),this.cache=this.config.cache,this.setRootTypename("Query"),this.setRootTypename("Mutation"),this.setRootTypename("Subscription"),e.possibleTypes&&this.addPossibleTypes(e.possibleTypes),e.typePolicies&&this.addTypePolicies(e.typePolicies)}return t.prototype.identify=function(e,r){var n,i=this,a=r&&(r.typename||((n=r.storeObject)===null||n===void 0?void 0:n.__typename))||e.__typename;if(a===this.rootTypenamesById.ROOT_QUERY)return["ROOT_QUERY"];for(var o=r&&r.storeObject||e,u=P(P({},r),{typename:a,storeObject:o,readField:r&&r.readField||function(){var p=Ei(arguments,o);return i.readField(p,{store:i.cache.data,variables:p.variables})}}),s,c=a&&this.getTypePolicy(a),h=c&&c.keyFn||this.config.dataIdFromObject;h;){var l=h(e,u);if(ge(l))h=ka(l);else{s=l;break}}return s=s?String(s):void 0,u.keyObject?[s,u.keyObject]:[s]},t.prototype.addTypePolicies=function(e){var r=this;Object.keys(e).forEach(function(n){var i=e[n],a=i.queryType,o=i.mutationType,u=i.subscriptionType,s=St(i,["queryType","mutationType","subscriptionType"]);a&&r.setRootTypename("Query",n),o&&r.setRootTypename("Mutation",n),u&&r.setRootTypename("Subscription",n),Ee.call(r.toBeAdded,n)?r.toBeAdded[n].push(s):r.toBeAdded[n]=[s]})},t.prototype.updateTypePolicy=function(e,r){var n=this,i=this.getTypePolicy(e),a=r.keyFields,o=r.fields;function u(s,c){s.merge=typeof c=="function"?c:c===!0?Pa:c===!1?La:s.merge}u(i,r.merge),i.keyFn=a===!1?jh:ge(a)?ka(a):typeof a=="function"?a:i.keyFn,o&&Object.keys(o).forEach(function(s){var c=n.getFieldPolicy(e,s,!0),h=o[s];if(typeof h=="function")c.read=h;else{var l=h.keyArgs,p=h.read,d=h.merge;c.keyFn=l===!1?Ia:ge(l)?Na(l):typeof l=="function"?l:c.keyFn,typeof p=="function"&&(c.read=p),u(c,d)}c.read&&c.merge&&(c.keyFn=c.keyFn||Ia)})},t.prototype.setRootTypename=function(e,r){r===void 0&&(r=e);var n="ROOT_"+e.toUpperCase(),i=this.rootTypenamesById[n];r!==i&&(__DEV__?V(!i||i===e,"Cannot change root ".concat(e," __typename more than once")):V(!i||i===e,3),i&&delete this.rootIdsByTypename[i],this.rootIdsByTypename[r]=n,this.rootTypenamesById[n]=r)},t.prototype.addPossibleTypes=function(e){var r=this;this.usingPossibleTypes=!0,Object.keys(e).forEach(function(n){r.getSupertypeSet(n,!0),e[n].forEach(function(i){r.getSupertypeSet(i,!0).add(n);var a=i.match(js);(!a||a[0]!==i)&&r.fuzzySubtypes.set(i,new RegExp(i))})})},t.prototype.getTypePolicy=function(e){var r=this;if(!Ee.call(this.typePolicies,e)){var n=this.typePolicies[e]=Object.create(null);n.fields=Object.create(null);var i=this.supertypeMap.get(e);i&&i.size&&i.forEach(function(o){var u=r.getTypePolicy(o),s=u.fields,c=St(u,["fields"]);Object.assign(n,c),Object.assign(n.fields,s)})}var a=this.toBeAdded[e];return a&&a.length&&a.splice(0).forEach(function(o){r.updateTypePolicy(e,o)}),this.typePolicies[e]},t.prototype.getFieldPolicy=function(e,r,n){if(e){var i=this.getTypePolicy(e).fields;return i[r]||n&&(i[r]=Object.create(null))}},t.prototype.getSupertypeSet=function(e,r){var n=this.supertypeMap.get(e);return!n&&r&&this.supertypeMap.set(e,n=new Set),n},t.prototype.fragmentMatches=function(e,r,n,i){var a=this;if(!e.typeCondition)return!0;if(!r)return!1;var o=e.typeCondition.name.value;if(r===o)return!0;if(this.usingPossibleTypes&&this.supertypeMap.has(o))for(var u=this.getSupertypeSet(r,!0),s=[u],c=function(y){var f=a.getSupertypeSet(y,!1);f&&f.size&&s.indexOf(f)<0&&s.push(f)},h=!!(n&&this.fuzzySubtypes.size),l=!1,p=0;p<s.length;++p){var d=s[p];if(d.has(o))return u.has(o)||(l&&__DEV__&&V.warn("Inferring subtype ".concat(r," of supertype ").concat(o)),u.add(o)),!0;d.forEach(c),h&&p===s.length-1&&Dn(e.selectionSet,n,i)&&(h=!1,l=!0,this.fuzzySubtypes.forEach(function(y,f){var v=r.match(y);v&&v[0]===r&&c(f)}))}return!1},t.prototype.hasKeyArgs=function(e,r){var n=this.getFieldPolicy(e,r,!1);return!!(n&&n.keyFn)},t.prototype.getStoreFieldName=function(e){var r=e.typename,n=e.fieldName,i=this.getFieldPolicy(r,n,!1),a,o=i&&i.keyFn;if(o&&r)for(var u={typename:r,fieldName:n,field:e.field||null,variables:e.variables},s=Bn(e);o;){var c=o(s,u);if(ge(c))o=Na(c);else{a=c||n;break}}return a===void 0&&(a=e.field?Kl(e.field,e.variables):Zn(n,Bn(e))),a===!1?n:n===rt(a)?a:n+":"+a},t.prototype.readField=function(e,r){var n=e.from;if(!!n){var i=e.field||e.fieldName;if(!!i){if(e.typename===void 0){var a=r.store.getFieldValue(n,"__typename");a&&(e.typename=a)}var o=this.getStoreFieldName(e),u=rt(o),s=r.store.getFieldValue(n,o),c=this.getFieldPolicy(e.typename,u,!1),h=c&&c.read;if(h){var l=Ca(this,n,e,r,r.store.getStorage(se(n)?n.__ref:n,o));return mi.withValue(this.cache,h,[s,l])}return s}}},t.prototype.getReadFunction=function(e,r){var n=this.getFieldPolicy(e,r,!1);return n&&n.read},t.prototype.getMergeFunction=function(e,r,n){var i=this.getFieldPolicy(e,r,!1),a=i&&i.merge;return!a&&n&&(i=this.getTypePolicy(n),a=i&&i.merge),a},t.prototype.runMergeFunction=function(e,r,n,i,a){var o=n.field,u=n.typename,s=n.merge;return s===Pa?Qs(i.store)(e,r):s===La?r:(i.overwrite&&(e=void 0),s(e,r,Ca(this,void 0,{typename:u,fieldName:o.name.value,field:o,variables:i.variables},i,a||Object.create(null))))},t}();function Ca(t,e,r,n,i){var a=t.getStoreFieldName(r),o=rt(a),u=r.variables||n.variables,s=n.store,c=s.toReference,h=s.canRead;return{args:Bn(r),field:r.field||null,fieldName:o,storeFieldName:a,variables:u,isReference:se,toReference:c,storage:i,cache:t.cache,canRead:h,readField:function(){return t.readField(Ei(arguments,e,u),n)},mergeObjects:Qs(n.store)}}function Ei(t,e,r){var n=t[0],i=t[1],a=t.length,o;return typeof n=="string"?o={fieldName:n,from:a>1?i:e}:(o=P({},n),Ee.call(o,"from")||(o.from=e)),__DEV__&&o.from===void 0&&__DEV__&&V.warn("Undefined 'from' passed to readField with arguments ".concat(Tf(Array.from(t)))),o.variables===void 0&&(o.variables=r),o}function Qs(t){return function(r,n){if(ge(r)||ge(n))throw __DEV__?new ne("Cannot automatically merge arrays"):new ne(4);if(me(r)&&me(n)){var i=t.getFieldValue(r,"__typename"),a=t.getFieldValue(n,"__typename"),o=i&&a&&i!==a;if(o)return n;if(se(r)&&Tt(n))return t.merge(r.__ref,n),r;if(Tt(r)&&se(n))return t.merge(r,n.__ref),n;if(Tt(r)&&Tt(n))return P(P({},r),n)}return n}}function hn(t,e,r){var n="".concat(e).concat(r),i=t.flavors.get(n);return i||t.flavors.set(n,i=t.clientOnly===e&&t.deferred===r?t:P(P({},t),{clientOnly:e,deferred:r})),i}var Vh=function(){function t(e,r,n){this.cache=e,this.reader=r,this.fragments=n}return t.prototype.writeToStore=function(e,r){var n=this,i=r.query,a=r.result,o=r.dataId,u=r.variables,s=r.overwrite,c=lr(i),h=Sh();u=P(P({},ri(c)),u);var l=P(P({store:e,written:Object.create(null),merge:function(d,y){return h.merge(d,y)},variables:u,varString:ft(u)},Bs(i,this.fragments)),{overwrite:!!s,incomingById:new Map,clientOnly:!1,deferred:!1,flavors:new Map}),p=this.processSelectionSet({result:a||Object.create(null),dataId:o,selectionSet:c.selectionSet,mergeTree:{map:new Map},context:l});if(!se(p))throw __DEV__?new ne("Could not identify object ".concat(JSON.stringify(a))):new ne(7);return l.incomingById.forEach(function(d,y){var f=d.storeObject,v=d.mergeTree,m=d.fieldNodeSet,E=bt(y);if(v&&v.map.size){var g=n.applyMerges(v,E,f,l);if(se(g))return;f=g}if(__DEV__&&!l.overwrite){var T=Object.create(null);m.forEach(function(b){b.selectionSet&&(T[b.name.value]=!0)});var L=function(b){return T[rt(b)]===!0},A=function(b){var I=v&&v.map.get(b);return Boolean(I&&I.info&&I.info.merge)};Object.keys(f).forEach(function(b){L(b)&&!A(b)&&qh(E,f,b,l.store)})}e.merge(y,f)}),e.retain(p.__ref),p},t.prototype.processSelectionSet=function(e){var r=this,n=e.dataId,i=e.result,a=e.selectionSet,o=e.context,u=e.mergeTree,s=this.cache.policies,c=Object.create(null),h=n&&s.rootTypenamesById[n]||bn(i,a,o.fragmentMap)||n&&o.store.get(n,"__typename");typeof h=="string"&&(c.__typename=h);var l=function(){var g=Ei(arguments,c,o.variables);if(se(g.from)){var T=o.incomingById.get(g.from.__ref);if(T){var L=s.readField(P(P({},g),{from:T.storeObject}),o);if(L!==void 0)return L}}return s.readField(g,o)},p=new Set;this.flattenFields(a,i,o,h).forEach(function(g,T){var L,A=ht(T),b=i[A];if(p.add(T),b!==void 0){var I=s.getStoreFieldName({typename:h,fieldName:T.name.value,field:T,variables:g.variables}),R=wa(u,I),k=r.processFieldValue(b,T,T.selectionSet?hn(g,!1,!1):g,R),_=void 0;T.selectionSet&&(se(k)||Tt(k))&&(_=l("__typename",k));var S=s.getMergeFunction(h,T.name.value,_);S?R.info={field:T,typename:h,merge:S}:Ma(u,I),c=g.merge(c,(L={},L[I]=k,L))}else __DEV__&&!g.clientOnly&&!g.deferred&&!ii.added(T)&&!s.getReadFunction(h,T.name.value)&&__DEV__&&V.error("Missing field '".concat(ht(T),"' while writing result ").concat(JSON.stringify(i,null,2)).substring(0,1e3))});try{var d=s.identify(i,{typename:h,selectionSet:a,fragmentMap:o.fragmentMap,storeObject:c,readField:l}),y=d[0],f=d[1];n=n||y,f&&(c=o.merge(c,f))}catch(g){if(!n)throw g}if(typeof n=="string"){var v=bt(n),m=o.written[n]||(o.written[n]=[]);if(m.indexOf(a)>=0||(m.push(a),this.reader&&this.reader.isFresh(i,v,a,o)))return v;var E=o.incomingById.get(n);return E?(E.storeObject=o.merge(E.storeObject,c),E.mergeTree=Vn(E.mergeTree,u),p.forEach(function(g){return E.fieldNodeSet.add(g)})):o.incomingById.set(n,{storeObject:c,mergeTree:Nr(u)?void 0:u,fieldNodeSet:p}),v}return c},t.prototype.processFieldValue=function(e,r,n,i){var a=this;return!r.selectionSet||e===null?__DEV__?li(e):e:ge(e)?e.map(function(o,u){var s=a.processFieldValue(o,r,n,wa(i,u));return Ma(i,u),s}):this.processSelectionSet({result:e,selectionSet:r.selectionSet,context:n,mergeTree:i})},t.prototype.flattenFields=function(e,r,n,i){i===void 0&&(i=bn(r,e,n.fragmentMap));var a=new Map,o=this.cache.policies,u=new hr(!1);return function s(c,h){var l=u.lookup(c,h.clientOnly,h.deferred);l.visited||(l.visited=!0,c.selections.forEach(function(p){if(!!Vr(p,n.variables)){var d=h.clientOnly,y=h.deferred;if(!(d&&y)&&Ue(p.directives)&&p.directives.forEach(function(m){var E=m.name.value;if(E==="client"&&(d=!0),E==="defer"){var g=qr(m,n.variables);(!g||g.if!==!1)&&(y=!0)}}),We(p)){var f=a.get(p);f&&(d=d&&f.clientOnly,y=y&&f.deferred),a.set(p,hn(n,d,y))}else{var v=Jn(p,n.lookupFragment);if(!v&&p.kind===Ba.FRAGMENT_SPREAD)throw __DEV__?new ne("No fragment named ".concat(p.name.value)):new ne(8);v&&o.fragmentMatches(v,i,r,n.variables)&&s(v.selectionSet,hn(n,d,y))}}}))}(e,n),a},t.prototype.applyMerges=function(e,r,n,i,a){var o,u=this;if(e.map.size&&!se(n)){var s=!ge(n)&&(se(r)||Tt(r))?r:void 0,c=n;s&&!a&&(a=[se(s)?s.__ref:s]);var h,l=function(p,d){return ge(p)?typeof d=="number"?p[d]:void 0:i.store.getFieldValue(p,String(d))};e.map.forEach(function(p,d){var y=l(s,d),f=l(c,d);if(f!==void 0){a&&a.push(d);var v=u.applyMerges(p,y,f,i,a);v!==f&&(h=h||new Map,h.set(d,v)),a&&V(a.pop()===d)}}),h&&(n=ge(c)?c.slice(0):P({},c),h.forEach(function(p,d){n[d]=p}))}return e.info?this.cache.policies.runMergeFunction(r,n,e.info,i,a&&(o=i.store).getStorage.apply(o,a)):n},t}(),zs=[];function wa(t,e){var r=t.map;return r.has(e)||r.set(e,zs.pop()||{map:new Map}),r.get(e)}function Vn(t,e){if(t===e||!e||Nr(e))return t;if(!t||Nr(t))return e;var r=t.info&&e.info?P(P({},t.info),e.info):t.info||e.info,n=t.map.size&&e.map.size,i=n?new Map:t.map.size?t.map:e.map,a={info:r,map:i};if(n){var o=new Set(e.map.keys());t.map.forEach(function(u,s){a.map.set(s,Vn(u,e.map.get(s))),o.delete(s)}),o.forEach(function(u){a.map.set(u,Vn(e.map.get(u),t.map.get(u)))})}return a}function Nr(t){return!t||!(t.info||t.map.size)}function Ma(t,e){var r=t.map,n=r.get(e);n&&Nr(n)&&(zs.push(n),r.delete(e))}var Fa=new Set;function qh(t,e,r,n){var i=function(l){var p=n.getFieldValue(l,r);return typeof p=="object"&&p},a=i(t);if(!!a){var o=i(e);if(!!o&&!se(a)&&!_e(a,o)&&!Object.keys(a).every(function(l){return n.getFieldValue(o,l)!==void 0})){var u=n.getFieldValue(t,"__typename")||n.getFieldValue(e,"__typename"),s=rt(r),c="".concat(u,".").concat(s);if(!Fa.has(c)){Fa.add(c);var h=[];!ge(a)&&!ge(o)&&[a,o].forEach(function(l){var p=n.getFieldValue(l,"__typename");typeof p=="string"&&!h.includes(p)&&h.push(p)}),__DEV__&&V.warn("Cache data may be lost when replacing the ".concat(s," field of a ").concat(u,` object.

To address this problem (which is not a bug in Apollo Client), `).concat(h.length?"either ensure all objects of type "+h.join(" and ")+" have an ID or a custom merge function, or ":"","define a custom merge function for the ").concat(c,` field, so InMemoryCache can safely merge these objects:

  existing: `).concat(JSON.stringify(a).slice(0,1e3),`
  incoming: `).concat(JSON.stringify(o).slice(0,1e3),`

For more information about these options, please refer to the documentation:

  * Ensuring entity objects have IDs: https://go.apollo.dev/c/generating-unique-identifiers
  * Defining custom merge functions: https://go.apollo.dev/c/merging-non-normalized-objects
`))}}}}var Wh=function(t){we(e,t);function e(r){r===void 0&&(r={});var n=t.call(this)||this;return n.watches=new Set,n.typenameDocumentCache=new Map,n.makeVar=xh,n.txCount=0,n.config=bh(r),n.addTypename=!!n.config.addTypename,n.policies=new Bh({cache:n,dataIdFromObject:n.config.dataIdFromObject,possibleTypes:n.config.possibleTypes,typePolicies:n.config.typePolicies}),n.init(),n}return e.prototype.init=function(){var r=this.data=new tr.Root({policies:this.policies,resultCaching:this.config.resultCaching});this.optimisticData=r.stump,this.resetResultCache()},e.prototype.resetResultCache=function(r){var n=this,i=this.storeReader,a=this.config.fragments;this.storeWriter=new Vh(this,this.storeReader=new Ph({cache:this,addTypename:this.addTypename,resultCacheMaxSize:this.config.resultCacheMaxSize,canonizeResults:Us(this.config),canon:r?void 0:i&&i.canon,fragments:a}),a),this.maybeBroadcastWatch=kr(function(o,u){return n.broadcastWatch(o,u)},{max:this.config.resultCacheMaxSize,makeCacheKey:function(o){var u=o.optimistic?n.optimisticData:n.data;if($t(u)){var s=o.optimistic,c=o.id,h=o.variables;return u.makeCacheKey(o.query,o.callback,ft({optimistic:s,id:c,variables:h}))}}}),new Set([this.data.group,this.optimisticData.group]).forEach(function(o){return o.resetCaching()})},e.prototype.restore=function(r){return this.init(),r&&this.data.replace(r),this},e.prototype.extract=function(r){return r===void 0&&(r=!1),(r?this.optimisticData:this.data).extract()},e.prototype.read=function(r){var n=r.returnPartialData,i=n===void 0?!1:n;try{return this.storeReader.diffQueryAgainstStore(P(P({},r),{store:r.optimistic?this.optimisticData:this.data,config:this.config,returnPartialData:i})).result||null}catch(a){if(a instanceof Fs)return null;throw a}},e.prototype.write=function(r){try{return++this.txCount,this.storeWriter.writeToStore(this.data,r)}finally{!--this.txCount&&r.broadcast!==!1&&this.broadcastWatches()}},e.prototype.modify=function(r){if(Ee.call(r,"id")&&!r.id)return!1;var n=r.optimistic?this.optimisticData:this.data;try{return++this.txCount,n.modify(r.id||"ROOT_QUERY",r.fields)}finally{!--this.txCount&&r.broadcast!==!1&&this.broadcastWatches()}},e.prototype.diff=function(r){return this.storeReader.diffQueryAgainstStore(P(P({},r),{store:r.optimistic?this.optimisticData:this.data,rootId:r.id||"ROOT_QUERY",config:this.config}))},e.prototype.watch=function(r){var n=this;return this.watches.size||Dh(this),this.watches.add(r),r.immediate&&this.maybeBroadcastWatch(r),function(){n.watches.delete(r)&&!n.watches.size&&Ra(n),n.maybeBroadcastWatch.forget(r)}},e.prototype.gc=function(r){ft.reset();var n=this.optimisticData.gc();return r&&!this.txCount&&(r.resetResultCache?this.resetResultCache(r.resetResultIdentities):r.resetResultIdentities&&this.storeReader.resetCanon()),n},e.prototype.retain=function(r,n){return(n?this.optimisticData:this.data).retain(r)},e.prototype.release=function(r,n){return(n?this.optimisticData:this.data).release(r)},e.prototype.identify=function(r){if(se(r))return r.__ref;try{return this.policies.identify(r)[0]}catch(n){__DEV__&&V.warn(n)}},e.prototype.evict=function(r){if(!r.id){if(Ee.call(r,"id"))return!1;r=P(P({},r),{id:"ROOT_QUERY"})}try{return++this.txCount,this.optimisticData.evict(r,this.data)}finally{!--this.txCount&&r.broadcast!==!1&&this.broadcastWatches()}},e.prototype.reset=function(r){var n=this;return this.init(),ft.reset(),r&&r.discardWatches?(this.watches.forEach(function(i){return n.maybeBroadcastWatch.forget(i)}),this.watches.clear(),Ra(this)):this.broadcastWatches(),Promise.resolve()},e.prototype.removeOptimistic=function(r){var n=this.optimisticData.removeLayer(r);n!==this.optimisticData&&(this.optimisticData=n,this.broadcastWatches())},e.prototype.batch=function(r){var n=this,i=r.update,a=r.optimistic,o=a===void 0?!0:a,u=r.removeOptimistic,s=r.onWatchUpdated,c,h=function(p){var d=n,y=d.data,f=d.optimisticData;++n.txCount,p&&(n.data=n.optimisticData=p);try{return c=i(n)}finally{--n.txCount,n.data=y,n.optimisticData=f}},l=new Set;return s&&!this.txCount&&this.broadcastWatches(P(P({},r),{onWatchUpdated:function(p){return l.add(p),!1}})),typeof o=="string"?this.optimisticData=this.optimisticData.addLayer(o,h):o===!1?h(this.data):h(),typeof u=="string"&&(this.optimisticData=this.optimisticData.removeLayer(u)),s&&l.size?(this.broadcastWatches(P(P({},r),{onWatchUpdated:function(p,d){var y=s.call(this,p,d);return y!==!1&&l.delete(p),y}})),l.size&&l.forEach(function(p){return n.maybeBroadcastWatch.dirty(p)})):this.broadcastWatches(r),c},e.prototype.performTransaction=function(r,n){return this.batch({update:r,optimistic:n||n!==null})},e.prototype.transformDocument=function(r){if(this.addTypename){var n=this.typenameDocumentCache.get(r);return n||(n=ii(r),this.typenameDocumentCache.set(r,n),this.typenameDocumentCache.set(n,n)),n}return r},e.prototype.transformForLink=function(r){var n=this.config.fragments;return n?n.transform(r):r},e.prototype.broadcastWatches=function(r){var n=this;this.txCount||this.watches.forEach(function(i){return n.maybeBroadcastWatch(i,r)})},e.prototype.broadcastWatch=function(r,n){var i=r.lastDiff,a=this.diff(r);n&&(r.optimistic&&typeof n.optimistic=="string"&&(a.fromOptimisticTransaction=!0),n.onWatchUpdated&&n.onWatchUpdated.call(this,r,a,i)===!1)||(!i||!_e(i.result,a.result))&&r.callback(r.lastDiff=a,i)},e}(Ah);function Gh(t){return t.hasOwnProperty("graphQLErrors")}var Qh=function(t){var e="";if(Ue(t.graphQLErrors)||Ue(t.clientErrors)){var r=(t.graphQLErrors||[]).concat(t.clientErrors||[]);r.forEach(function(n){var i=n?n.message:"Error message not found.";e+="".concat(i,`
`)})}return t.networkError&&(e+="".concat(t.networkError.message,`
`)),e=e.replace(/\n$/,""),e},gt=function(t){we(e,t);function e(r){var n=r.graphQLErrors,i=r.clientErrors,a=r.networkError,o=r.errorMessage,u=r.extraInfo,s=t.call(this,o)||this;return s.graphQLErrors=n||[],s.clientErrors=i||[],s.networkError=a||null,s.message=o||Qh(s),s.extraInfo=u,s.__proto__=e.prototype,s}return e}(Error),ce;(function(t){t[t.loading=1]="loading",t[t.setVariables=2]="setVariables",t[t.fetchMore=3]="fetchMore",t[t.refetch=4]="refetch",t[t.poll=6]="poll",t[t.ready=7]="ready",t[t.error=8]="error"})(ce||(ce={}));function rr(t){return t?t<7:!1}var zh=Object.assign,Kh=Object.hasOwnProperty,qn=function(t){we(e,t);function e(r){var n=r.queryManager,i=r.queryInfo,a=r.options,o=t.call(this,function(v){try{var m=v._subscription._observer;m&&!m.error&&(m.error=Hh)}catch{}var E=!o.observers.size;o.observers.add(v);var g=o.last;return g&&g.error?v.error&&v.error(g.error):g&&g.result&&v.next&&v.next(g.result),E&&o.reobserve().catch(function(){}),function(){o.observers.delete(v)&&!o.observers.size&&o.tearDownQuery()}})||this;o.observers=new Set,o.subscriptions=new Set,o.queryInfo=i,o.queryManager=n,o.isTornDown=!1;var u=n.defaultOptions.watchQuery,s=u===void 0?{}:u,c=s.fetchPolicy,h=c===void 0?"cache-first":c,l=a.fetchPolicy,p=l===void 0?h:l,d=a.initialFetchPolicy,y=d===void 0?p==="standby"?h:p:d;o.options=P(P({},a),{initialFetchPolicy:y,fetchPolicy:p}),o.queryId=i.queryId||n.generateQueryId();var f=lr(o.query);return o.queryName=f&&f.name&&f.name.value,o}return Object.defineProperty(e.prototype,"query",{get:function(){return this.queryManager.transform(this.options.query).document},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"variables",{get:function(){return this.options.variables},enumerable:!1,configurable:!0}),e.prototype.result=function(){var r=this;return new Promise(function(n,i){var a={next:function(u){n(u),r.observers.delete(a),r.observers.size||r.queryManager.removeQuery(r.queryId),setTimeout(function(){o.unsubscribe()},0)},error:i},o=r.subscribe(a)})},e.prototype.getCurrentResult=function(r){r===void 0&&(r=!0);var n=this.getLastResult(!0),i=this.queryInfo.networkStatus||n&&n.networkStatus||ce.ready,a=P(P({},n),{loading:rr(i),networkStatus:i}),o=this.options.fetchPolicy,u=o===void 0?"cache-first":o;if(!(u==="network-only"||u==="no-cache"||u==="standby"||this.queryManager.transform(this.options.query).hasForcedResolvers)){var s=this.queryInfo.getDiff();(s.complete||this.options.returnPartialData)&&(a.data=s.result),_e(a.data,{})&&(a.data=void 0),s.complete?(delete a.partial,s.complete&&a.networkStatus===ce.loading&&(u==="cache-first"||u==="cache-only")&&(a.networkStatus=ce.ready,a.loading=!1)):a.partial=!0,__DEV__&&!s.complete&&!this.options.partialRefetch&&!a.loading&&!a.data&&!a.error&&Hs(s.missing)}return r&&this.updateLastResult(a),a},e.prototype.isDifferentFromLastResult=function(r){return!this.last||!_e(this.last.result,r)},e.prototype.getLast=function(r,n){var i=this.last;if(i&&i[r]&&(!n||_e(i.variables,this.variables)))return i[r]},e.prototype.getLastResult=function(r){return this.getLast("result",r)},e.prototype.getLastError=function(r){return this.getLast("error",r)},e.prototype.resetLastResults=function(){delete this.last,this.isTornDown=!1},e.prototype.resetQueryStoreErrors=function(){this.queryManager.resetErrors(this.queryId)},e.prototype.refetch=function(r){var n,i={pollInterval:0},a=this.options.fetchPolicy;if(a==="cache-and-network"?i.fetchPolicy=a:a==="no-cache"?i.fetchPolicy="no-cache":i.fetchPolicy="network-only",__DEV__&&r&&Kh.call(r,"variables")){var o=ps(this.query),u=o.variableDefinitions;(!u||!u.some(function(s){return s.variable.name.value==="variables"}))&&__DEV__&&V.warn("Called refetch(".concat(JSON.stringify(r),") for query ").concat(((n=o.name)===null||n===void 0?void 0:n.value)||JSON.stringify(o),`, which does not declare a $variables variable.
Did you mean to call refetch(variables) instead of refetch({ variables })?`))}return r&&!_e(this.options.variables,r)&&(i.variables=this.options.variables=P(P({},this.options.variables),r)),this.queryInfo.resetLastWrite(),this.reobserve(i,ce.refetch)},e.prototype.fetchMore=function(r){var n=this,i=P(P({},r.query?r:P(P(P(P({},this.options),{query:this.query}),r),{variables:P(P({},this.options.variables),r.variables)})),{fetchPolicy:"no-cache"}),a=this.queryManager.generateQueryId(),o=this.queryInfo,u=o.networkStatus;o.networkStatus=ce.fetchMore,i.notifyOnNetworkStatusChange&&this.observe();var s=new Set;return this.queryManager.fetchQuery(a,i,ce.fetchMore).then(function(c){return n.queryManager.removeQuery(a),o.networkStatus===ce.fetchMore&&(o.networkStatus=u),n.queryManager.cache.batch({update:function(h){var l=r.updateQuery;l?h.updateQuery({query:n.query,variables:n.variables,returnPartialData:!0,optimistic:!1},function(p){return l(p,{fetchMoreResult:c.data,variables:i.variables})}):h.writeQuery({query:i.query,variables:i.variables,data:c.data})},onWatchUpdated:function(h){s.add(h.query)}}),c}).finally(function(){s.has(n.query)||Ks(n)})},e.prototype.subscribeToMore=function(r){var n=this,i=this.queryManager.startGraphQLSubscription({query:r.document,variables:r.variables,context:r.context}).subscribe({next:function(a){var o=r.updateQuery;o&&n.updateQuery(function(u,s){var c=s.variables;return o(u,{subscriptionData:a,variables:c})})},error:function(a){if(r.onError){r.onError(a);return}__DEV__&&V.error("Unhandled GraphQL subscription error",a)}});return this.subscriptions.add(i),function(){n.subscriptions.delete(i)&&i.unsubscribe()}},e.prototype.setOptions=function(r){return this.reobserve(r)},e.prototype.setVariables=function(r){return _e(this.variables,r)?this.observers.size?this.result():Promise.resolve():(this.options.variables=r,this.observers.size?this.reobserve({fetchPolicy:this.options.initialFetchPolicy,variables:r},ce.setVariables):Promise.resolve())},e.prototype.updateQuery=function(r){var n=this.queryManager,i=n.cache.diff({query:this.options.query,variables:this.variables,returnPartialData:!0,optimistic:!1}).result,a=r(i,{variables:this.variables});a&&(n.cache.writeQuery({query:this.options.query,data:a,variables:this.variables}),n.broadcastQueries())},e.prototype.startPolling=function(r){this.options.pollInterval=r,this.updatePolling()},e.prototype.stopPolling=function(){this.options.pollInterval=0,this.updatePolling()},e.prototype.applyNextFetchPolicy=function(r,n){if(n.nextFetchPolicy){var i=n.fetchPolicy,a=i===void 0?"cache-first":i,o=n.initialFetchPolicy,u=o===void 0?a:o;a==="standby"||(typeof n.nextFetchPolicy=="function"?n.fetchPolicy=n.nextFetchPolicy(a,{reason:r,options:n,observable:this,initialFetchPolicy:u}):r==="variables-changed"?n.fetchPolicy=u:n.fetchPolicy=n.nextFetchPolicy)}return n.fetchPolicy},e.prototype.fetch=function(r,n){return this.queryManager.setObservableQuery(this),this.queryManager.fetchQueryObservable(this.queryId,r,n)},e.prototype.updatePolling=function(){var r=this;if(!this.queryManager.ssrMode){var n=this,i=n.pollingInfo,a=n.options.pollInterval;if(!a){i&&(clearTimeout(i.timeout),delete this.pollingInfo);return}if(!(i&&i.interval===a)){__DEV__?V(a,"Attempted to start a polling query without a polling interval."):V(a,12);var o=i||(this.pollingInfo={});o.interval=a;var u=function(){r.pollingInfo&&(rr(r.queryInfo.networkStatus)?s():r.reobserve({fetchPolicy:r.options.initialFetchPolicy==="no-cache"?"no-cache":"network-only"},ce.poll).then(s,s))},s=function(){var c=r.pollingInfo;c&&(clearTimeout(c.timeout),c.timeout=setTimeout(u,c.interval))};s()}}},e.prototype.updateLastResult=function(r,n){return n===void 0&&(n=this.variables),this.last=P(P({},this.last),{result:this.queryManager.assumeImmutableResults?r:li(r),variables:n}),Ue(r.errors)||delete this.last.error,this.last},e.prototype.reobserve=function(r,n){var i=this;this.isTornDown=!1;var a=n===ce.refetch||n===ce.fetchMore||n===ce.poll,o=this.options.variables,u=this.options.fetchPolicy,s=Qr(this.options,r||{}),c=a?s:zh(this.options,s);a||(this.updatePolling(),r&&r.variables&&!_e(r.variables,o)&&c.fetchPolicy!=="standby"&&c.fetchPolicy===u&&(this.applyNextFetchPolicy("variables-changed",c),n===void 0&&(n=ce.setVariables)));var h=c.variables&&P({},c.variables),l=this.fetch(c,n),p={next:function(d){i.reportResult(d,h)},error:function(d){i.reportError(d,h)}};return a||(this.concast&&this.observer&&this.concast.removeObserver(this.observer),this.concast=l,this.observer=p),l.addObserver(p),l.promise},e.prototype.observe=function(){this.reportResult(this.getCurrentResult(!1),this.variables)},e.prototype.reportResult=function(r,n){var i=this.getLastError();(i||this.isDifferentFromLastResult(r))&&((i||!r.partial||this.options.returnPartialData)&&this.updateLastResult(r,n),Yt(this.observers,"next",r))},e.prototype.reportError=function(r,n){var i=P(P({},this.getLastResult()),{error:r,errors:r.graphQLErrors,networkStatus:ce.error,loading:!1});this.updateLastResult(i,n),Yt(this.observers,"error",this.last.error=r)},e.prototype.hasObservers=function(){return this.observers.size>0},e.prototype.tearDownQuery=function(){this.isTornDown||(this.concast&&this.observer&&(this.concast.removeObserver(this.observer),delete this.concast,delete this.observer),this.stopPolling(),this.subscriptions.forEach(function(r){return r.unsubscribe()}),this.subscriptions.clear(),this.queryManager.stopQuery(this.queryId),this.observers.clear(),this.isTornDown=!0)},e}(fe);Ts(qn);function Ks(t){var e=t.options,r=e.fetchPolicy,n=e.nextFetchPolicy;return r==="cache-and-network"||r==="network-only"?t.reobserve({fetchPolicy:"cache-first",nextFetchPolicy:function(){return this.nextFetchPolicy=n,typeof n=="function"?n.apply(this,arguments):r}}):t.reobserve()}function Hh(t){__DEV__&&V.error("Unhandled error",t.message,t.stack)}function Hs(t){__DEV__&&t&&__DEV__&&V.debug("Missing cache result fields: ".concat(JSON.stringify(t)),t)}var Ys=function(){function t(e){var r=e.cache,n=e.client,i=e.resolvers,a=e.fragmentMatcher;this.cache=r,n&&(this.client=n),i&&this.addResolvers(i),a&&this.setFragmentMatcher(a)}return t.prototype.addResolvers=function(e){var r=this;this.resolvers=this.resolvers||{},Array.isArray(e)?e.forEach(function(n){r.resolvers=Zi(r.resolvers,n)}):this.resolvers=Zi(this.resolvers,e)},t.prototype.setResolvers=function(e){this.resolvers={},this.addResolvers(e)},t.prototype.getResolvers=function(){return this.resolvers||{}},t.prototype.runResolvers=function(e){var r=e.document,n=e.remoteResult,i=e.context,a=e.variables,o=e.onlyRunForcedResolvers,u=o===void 0?!1:o;return Xe(this,void 0,void 0,function(){return Je(this,function(s){return r?[2,this.resolveDocument(r,n.data,i,a,this.fragmentMatcher,u).then(function(c){return P(P({},n),{data:c.result})})]:[2,n]})})},t.prototype.setFragmentMatcher=function(e){this.fragmentMatcher=e},t.prototype.getFragmentMatcher=function(){return this.fragmentMatcher},t.prototype.clientQuery=function(e){return $n(["client"],e)&&this.resolvers?e:null},t.prototype.serverQuery=function(e){return nf(e)},t.prototype.prepareContext=function(e){var r=this.cache;return P(P({},e),{cache:r,getCacheKey:function(n){return r.identify(n)}})},t.prototype.addExportedVariables=function(e,r,n){return r===void 0&&(r={}),n===void 0&&(n={}),Xe(this,void 0,void 0,function(){return Je(this,function(i){return e?[2,this.resolveDocument(e,this.buildRootValueFromCache(e,r)||{},this.prepareContext(n),r).then(function(a){return P(P({},r),a.exportedVariables)})]:[2,P({},r)]})})},t.prototype.shouldForceResolvers=function(e){var r=!1;return Ge(e,{Directive:{enter:function(n){if(n.name.value==="client"&&n.arguments&&(r=n.arguments.some(function(i){return i.name.value==="always"&&i.value.kind==="BooleanValue"&&i.value.value===!0}),r))return Va}}}),r},t.prototype.buildRootValueFromCache=function(e,r){return this.cache.diff({query:rf(e),variables:r,returnPartialData:!0,optimistic:!1}).result},t.prototype.resolveDocument=function(e,r,n,i,a,o){return n===void 0&&(n={}),i===void 0&&(i={}),a===void 0&&(a=function(){return!0}),o===void 0&&(o=!1),Xe(this,void 0,void 0,function(){var u,s,c,h,l,p,d,y,f;return Je(this,function(v){return u=ti(e),s=ei(e),c=Xn(s),h=u.operation,l=h?h.charAt(0).toUpperCase()+h.slice(1):"Query",p=this,d=p.cache,y=p.client,f={fragmentMap:c,context:P(P({},n),{cache:d,client:y}),variables:i,fragmentMatcher:a,defaultOperationType:l,exportedVariables:{},onlyRunForcedResolvers:o},[2,this.resolveSelectionSet(u.selectionSet,r,f).then(function(m){return{result:m,exportedVariables:f.exportedVariables}})]})})},t.prototype.resolveSelectionSet=function(e,r,n){return Xe(this,void 0,void 0,function(){var i,a,o,u,s,c=this;return Je(this,function(h){return i=n.fragmentMap,a=n.context,o=n.variables,u=[r],s=function(l){return Xe(c,void 0,void 0,function(){var p,d;return Je(this,function(y){return Vr(l,o)?We(l)?[2,this.resolveField(l,r,n).then(function(f){var v;typeof f<"u"&&u.push((v={},v[ht(l)]=f,v))})]:(hs(l)?p=l:(p=i[l.name.value],__DEV__?V(p,"No fragment named ".concat(l.name.value)):V(p,11)),p&&p.typeCondition&&(d=p.typeCondition.name.value,n.fragmentMatcher(r,d,a))?[2,this.resolveSelectionSet(p.selectionSet,r,n).then(function(f){u.push(f)})]:[2]):[2]})})},[2,Promise.all(e.selections.map(s)).then(function(){return ai(u)})]})})},t.prototype.resolveField=function(e,r,n){return Xe(this,void 0,void 0,function(){var i,a,o,u,s,c,h,l,p,d=this;return Je(this,function(y){return i=n.variables,a=e.name.value,o=ht(e),u=a!==o,s=r[o]||r[a],c=Promise.resolve(s),(!n.onlyRunForcedResolvers||this.shouldForceResolvers(e))&&(h=r.__typename||n.defaultOperationType,l=this.resolvers&&this.resolvers[h],l&&(p=l[u?a:o],p&&(c=Promise.resolve(mi.withValue(this.cache,p,[r,qr(e,i),n.context,{field:e,fragmentMap:n.fragmentMap}]))))),[2,c.then(function(f){if(f===void 0&&(f=s),e.directives&&e.directives.forEach(function(v){v.name.value==="export"&&v.arguments&&v.arguments.forEach(function(m){m.name.value==="as"&&m.value.kind==="StringValue"&&(n.exportedVariables[m.value.value]=f)})}),!e.selectionSet||f==null)return f;if(Array.isArray(f))return d.resolveSubSelectedArray(e,f,n);if(e.selectionSet)return d.resolveSelectionSet(e.selectionSet,f,n)})]})})},t.prototype.resolveSubSelectedArray=function(e,r,n){var i=this;return Promise.all(r.map(function(a){if(a===null)return null;if(Array.isArray(a))return i.resolveSubSelectedArray(e,a,n);if(e.selectionSet)return i.resolveSelectionSet(e.selectionSet,a,n)}))},t}(),Ot=new(mt?WeakMap:Map);function pn(t,e){var r=t[e];typeof r=="function"&&(t[e]=function(){return Ot.set(t,(Ot.get(t)+1)%1e15),r.apply(this,arguments)})}function Da(t){t.notifyTimeout&&(clearTimeout(t.notifyTimeout),t.notifyTimeout=void 0)}var dn=function(){function t(e,r){r===void 0&&(r=e.generateQueryId()),this.queryId=r,this.listeners=new Set,this.document=null,this.lastRequestId=1,this.subscriptions=new Set,this.stopped=!1,this.dirty=!1,this.observableQuery=null;var n=this.cache=e.cache;Ot.has(n)||(Ot.set(n,0),pn(n,"evict"),pn(n,"modify"),pn(n,"reset"))}return t.prototype.init=function(e){var r=e.networkStatus||ce.loading;return this.variables&&this.networkStatus!==ce.loading&&!_e(this.variables,e.variables)&&(r=ce.setVariables),_e(e.variables,this.variables)||(this.lastDiff=void 0),Object.assign(this,{document:e.document,variables:e.variables,networkError:null,graphQLErrors:this.graphQLErrors||[],networkStatus:r}),e.observableQuery&&this.setObservableQuery(e.observableQuery),e.lastRequestId&&(this.lastRequestId=e.lastRequestId),this},t.prototype.reset=function(){Da(this),this.dirty=!1},t.prototype.getDiff=function(e){e===void 0&&(e=this.variables);var r=this.getDiffOptions(e);if(this.lastDiff&&_e(r,this.lastDiff.options))return this.lastDiff.diff;this.updateWatch(this.variables=e);var n=this.observableQuery;if(n&&n.options.fetchPolicy==="no-cache")return{complete:!1};var i=this.cache.diff(r);return this.updateLastDiff(i,r),i},t.prototype.updateLastDiff=function(e,r){this.lastDiff=e?{diff:e,options:r||this.getDiffOptions()}:void 0},t.prototype.getDiffOptions=function(e){var r;return e===void 0&&(e=this.variables),{query:this.document,variables:e,returnPartialData:!0,optimistic:!0,canonizeResults:(r=this.observableQuery)===null||r===void 0?void 0:r.options.canonizeResults}},t.prototype.setDiff=function(e){var r=this,n=this.lastDiff&&this.lastDiff.diff;this.updateLastDiff(e),!this.dirty&&!_e(n&&n.result,e&&e.result)&&(this.dirty=!0,this.notifyTimeout||(this.notifyTimeout=setTimeout(function(){return r.notify()},0)))},t.prototype.setObservableQuery=function(e){var r=this;e!==this.observableQuery&&(this.oqListener&&this.listeners.delete(this.oqListener),this.observableQuery=e,e?(e.queryInfo=this,this.listeners.add(this.oqListener=function(){var n=r.getDiff();n.fromOptimisticTransaction?e.observe():Ks(e)})):delete this.oqListener)},t.prototype.notify=function(){var e=this;Da(this),this.shouldNotify()&&this.listeners.forEach(function(r){return r(e)}),this.dirty=!1},t.prototype.shouldNotify=function(){if(!this.dirty||!this.listeners.size)return!1;if(rr(this.networkStatus)&&this.observableQuery){var e=this.observableQuery.options.fetchPolicy;if(e!=="cache-only"&&e!=="cache-and-network")return!1}return!0},t.prototype.stop=function(){if(!this.stopped){this.stopped=!0,this.reset(),this.cancel(),this.cancel=t.prototype.cancel,this.subscriptions.forEach(function(r){return r.unsubscribe()});var e=this.observableQuery;e&&e.stopPolling()}},t.prototype.cancel=function(){},t.prototype.updateWatch=function(e){var r=this;e===void 0&&(e=this.variables);var n=this.observableQuery;if(!(n&&n.options.fetchPolicy==="no-cache")){var i=P(P({},this.getDiffOptions(e)),{watcher:this,callback:function(a){return r.setDiff(a)}});(!this.lastWatch||!_e(i,this.lastWatch))&&(this.cancel(),this.cancel=this.cache.watch(this.lastWatch=i))}},t.prototype.resetLastWrite=function(){this.lastWrite=void 0},t.prototype.shouldWrite=function(e,r){var n=this.lastWrite;return!(n&&n.dmCount===Ot.get(this.cache)&&_e(r,n.variables)&&_e(e.data,n.result.data))},t.prototype.markResult=function(e,r,n,i){var a=this,o=Ue(e.errors)?e.errors.slice(0):[];if(this.reset(),"incremental"in e&&Ue(e.incremental)){var u=this.getDiff().result,s=new pt;e.incremental.forEach(function(c){for(var h=c.data,l=c.path,p=c.errors,d=l.length-1;d>=0;--d){var y=l[d],f=!isNaN(+y),v=f?[]:{};v[y]=h,h=v}p&&o.push.apply(o,p),u=s.merge(u,h)}),e.data=u}this.graphQLErrors=o,n.fetchPolicy==="no-cache"?this.updateLastDiff({result:e.data,complete:!0},this.getDiffOptions(n.variables)):i!==0&&(Wn(e,n.errorPolicy)?this.cache.performTransaction(function(c){if(a.shouldWrite(e,n.variables))c.writeQuery({query:r,data:e.data,variables:n.variables,overwrite:i===1}),a.lastWrite={result:e,variables:n.variables,dmCount:Ot.get(a.cache)};else if(a.lastDiff&&a.lastDiff.diff.complete){e.data=a.lastDiff.diff.result;return}var h=a.getDiffOptions(n.variables),l=c.diff(h);a.stopped||a.updateWatch(n.variables),a.updateLastDiff(l,h),l.complete&&(e.data=l.result)}):this.lastWrite=void 0)},t.prototype.markReady=function(){return this.networkError=null,this.networkStatus=ce.ready},t.prototype.markError=function(e){return this.networkStatus=ce.error,this.lastWrite=void 0,this.reset(),e.graphQLErrors&&(this.graphQLErrors=e.graphQLErrors),e.networkError&&(this.networkError=e.networkError),e},t}();function Wn(t,e){e===void 0&&(e="none");var r=e==="ignore"||e==="all",n=!Or(t);return!n&&r&&t.data&&(n=!0),n}var Yh=Object.prototype.hasOwnProperty,$h=function(){function t(e){var r=e.cache,n=e.link,i=e.defaultOptions,a=e.queryDeduplication,o=a===void 0?!1:a,u=e.onBroadcast,s=e.ssrMode,c=s===void 0?!1:s,h=e.clientAwareness,l=h===void 0?{}:h,p=e.localState,d=e.assumeImmutableResults;this.clientAwareness={},this.queries=new Map,this.fetchCancelFns=new Map,this.transformCache=new(mt?WeakMap:Map),this.queryIdCounter=1,this.requestIdCounter=1,this.mutationIdCounter=1,this.inFlightLinkObservables=new Map,this.cache=r,this.link=n,this.defaultOptions=i||Object.create(null),this.queryDeduplication=o,this.clientAwareness=l,this.localState=p||new Ys({cache:r}),this.ssrMode=c,this.assumeImmutableResults=!!d,(this.onBroadcast=u)&&(this.mutationStore=Object.create(null))}return t.prototype.stop=function(){var e=this;this.queries.forEach(function(r,n){e.stopQueryNoBroadcast(n)}),this.cancelPendingFetches(__DEV__?new ne("QueryManager stopped while query was in flight"):new ne(13))},t.prototype.cancelPendingFetches=function(e){this.fetchCancelFns.forEach(function(r){return r(e)}),this.fetchCancelFns.clear()},t.prototype.mutate=function(e){var r,n,i=e.mutation,a=e.variables,o=e.optimisticResponse,u=e.updateQueries,s=e.refetchQueries,c=s===void 0?[]:s,h=e.awaitRefetchQueries,l=h===void 0?!1:h,p=e.update,d=e.onQueryUpdated,y=e.fetchPolicy,f=y===void 0?((r=this.defaultOptions.mutate)===null||r===void 0?void 0:r.fetchPolicy)||"network-only":y,v=e.errorPolicy,m=v===void 0?((n=this.defaultOptions.mutate)===null||n===void 0?void 0:n.errorPolicy)||"none":v,E=e.keepRootFields,g=e.context;return Xe(this,void 0,void 0,function(){var T,L,A,b,I,R;return Je(this,function(k){switch(k.label){case 0:return __DEV__?V(i,"mutation option is required. You must specify your GraphQL document in the mutation option."):V(i,14),__DEV__?V(f==="network-only"||f==="no-cache","Mutations support only 'network-only' or 'no-cache' fetchPolicy strings. The default `network-only` behavior automatically writes mutation results to the cache. Passing `no-cache` skips the cache write."):V(f==="network-only"||f==="no-cache",15),T=this.generateMutationId(),L=this.transform(i),A=L.document,b=L.hasClientExports,i=this.cache.transformForLink(A),a=this.getVariables(i,a),b?[4,this.localState.addExportedVariables(i,a,g)]:[3,2];case 1:a=k.sent(),k.label=2;case 2:return I=this.mutationStore&&(this.mutationStore[T]={mutation:i,variables:a,loading:!0,error:null}),o&&this.markMutationOptimistic(o,{mutationId:T,document:i,variables:a,fetchPolicy:f,errorPolicy:m,context:g,updateQueries:u,update:p,keepRootFields:E}),this.broadcastQueries(),R=this,[2,new Promise(function(_,S){return rn(R.getObservableFromLink(i,P(P({},g),{optimisticResponse:o}),a,!1),function(O){if(Or(O)&&m==="none")throw new gt({graphQLErrors:O.errors});I&&(I.loading=!1,I.error=null);var C=P({},O);return typeof c=="function"&&(c=c(C)),m==="ignore"&&Or(C)&&delete C.errors,R.markMutationResult({mutationId:T,result:C,document:i,variables:a,fetchPolicy:f,errorPolicy:m,context:g,update:p,updateQueries:u,awaitRefetchQueries:l,refetchQueries:c,removeOptimistic:o?T:void 0,onQueryUpdated:d,keepRootFields:E})}).subscribe({next:function(O){R.broadcastQueries(),_(O)},error:function(O){I&&(I.loading=!1,I.error=O),o&&R.cache.removeOptimistic(T),R.broadcastQueries(),S(O instanceof gt?O:new gt({networkError:O}))}})})]}})})},t.prototype.markMutationResult=function(e,r){var n=this;r===void 0&&(r=this.cache);var i=e.result,a=[],o=e.fetchPolicy==="no-cache";if(!o&&Wn(i,e.errorPolicy)){a.push({result:i.data,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables});var u=e.updateQueries;u&&this.queries.forEach(function(c,h){var l=c.observableQuery,p=l&&l.queryName;if(!(!p||!Yh.call(u,p))){var d=u[p],y=n.queries.get(h),f=y.document,v=y.variables,m=r.diff({query:f,variables:v,returnPartialData:!0,optimistic:!1}),E=m.result,g=m.complete;if(g&&E){var T=d(E,{mutationResult:i,queryName:f&&Rn(f)||void 0,queryVariables:v});T&&a.push({result:T,dataId:"ROOT_QUERY",query:f,variables:v})}}})}if(a.length>0||e.refetchQueries||e.update||e.onQueryUpdated||e.removeOptimistic){var s=[];if(this.refetchQueries({updateCache:function(c){o||a.forEach(function(p){return c.write(p)});var h=e.update;if(h){if(!o){var l=c.diff({id:"ROOT_MUTATION",query:n.transform(e.document).asQuery,variables:e.variables,optimistic:!1,returnPartialData:!0});l.complete&&!ih(i)&&(i=P(P({},i),{data:l.result}))}h(c,i,{context:e.context,variables:e.variables})}!o&&!e.keepRootFields&&c.modify({id:"ROOT_MUTATION",fields:function(p,d){var y=d.fieldName,f=d.DELETE;return y==="__typename"?p:f}})},include:e.refetchQueries,optimistic:!1,removeOptimistic:e.removeOptimistic,onQueryUpdated:e.onQueryUpdated||null}).forEach(function(c){return s.push(c)}),e.awaitRefetchQueries||e.onQueryUpdated)return Promise.all(s).then(function(){return i})}return Promise.resolve(i)},t.prototype.markMutationOptimistic=function(e,r){var n=this,i=typeof e=="function"?e(r.variables):e;return this.cache.recordOptimisticTransaction(function(a){try{n.markMutationResult(P(P({},r),{result:{data:i}}),a)}catch(o){__DEV__&&V.error(o)}},r.mutationId)},t.prototype.fetchQuery=function(e,r,n){return this.fetchQueryObservable(e,r,n).promise},t.prototype.getQueryStore=function(){var e=Object.create(null);return this.queries.forEach(function(r,n){e[n]={variables:r.variables,networkStatus:r.networkStatus,networkError:r.networkError,graphQLErrors:r.graphQLErrors}}),e},t.prototype.resetErrors=function(e){var r=this.queries.get(e);r&&(r.networkError=void 0,r.graphQLErrors=[])},t.prototype.transform=function(e){var r=this.transformCache;if(!r.has(e)){var n=this.cache.transformDocument(e),i=Jl(n),a=this.localState.clientQuery(n),o=i&&this.localState.serverQuery(i),u={document:n,hasClientExports:wl(n),hasForcedResolvers:this.localState.shouldForceResolvers(n),clientQuery:a,serverQuery:o,defaultVars:ri(lr(n)),asQuery:P(P({},n),{definitions:n.definitions.map(function(c){return c.kind==="OperationDefinition"&&c.operation!=="query"?P(P({},c),{operation:"query"}):c})})},s=function(c){c&&!r.has(c)&&r.set(c,u)};s(e),s(n),s(a),s(o)}return r.get(e)},t.prototype.getVariables=function(e,r){return P(P({},this.transform(e).defaultVars),r)},t.prototype.watchQuery=function(e){e=P(P({},e),{variables:this.getVariables(e.query,e.variables)}),typeof e.notifyOnNetworkStatusChange>"u"&&(e.notifyOnNetworkStatusChange=!1);var r=new dn(this),n=new qn({queryManager:this,queryInfo:r,options:e});return this.queries.set(n.queryId,r),r.init({document:n.query,observableQuery:n,variables:n.variables}),n},t.prototype.query=function(e,r){var n=this;return r===void 0&&(r=this.generateQueryId()),__DEV__?V(e.query,"query option is required. You must specify your GraphQL document in the query option."):V(e.query,16),__DEV__?V(e.query.kind==="Document",'You must wrap the query string in a "gql" tag.'):V(e.query.kind==="Document",17),__DEV__?V(!e.returnPartialData,"returnPartialData option only supported on watchQuery."):V(!e.returnPartialData,18),__DEV__?V(!e.pollInterval,"pollInterval option only supported on watchQuery."):V(!e.pollInterval,19),this.fetchQuery(r,e).finally(function(){return n.stopQuery(r)})},t.prototype.generateQueryId=function(){return String(this.queryIdCounter++)},t.prototype.generateRequestId=function(){return this.requestIdCounter++},t.prototype.generateMutationId=function(){return String(this.mutationIdCounter++)},t.prototype.stopQueryInStore=function(e){this.stopQueryInStoreNoBroadcast(e),this.broadcastQueries()},t.prototype.stopQueryInStoreNoBroadcast=function(e){var r=this.queries.get(e);r&&r.stop()},t.prototype.clearStore=function(e){return e===void 0&&(e={discardWatches:!0}),this.cancelPendingFetches(__DEV__?new ne("Store reset while query was in flight (not completed in link chain)"):new ne(20)),this.queries.forEach(function(r){r.observableQuery?r.networkStatus=ce.loading:r.stop()}),this.mutationStore&&(this.mutationStore=Object.create(null)),this.cache.reset(e)},t.prototype.getObservableQueries=function(e){var r=this;e===void 0&&(e="active");var n=new Map,i=new Map,a=new Set;return Array.isArray(e)&&e.forEach(function(o){typeof o=="string"?i.set(o,!1):xl(o)?i.set(r.transform(o).document,!1):me(o)&&o.query&&a.add(o)}),this.queries.forEach(function(o,u){var s=o.observableQuery,c=o.document;if(s){if(e==="all"){n.set(u,s);return}var h=s.queryName,l=s.options.fetchPolicy;if(l==="standby"||e==="active"&&!s.hasObservers())return;(e==="active"||h&&i.has(h)||c&&i.has(c))&&(n.set(u,s),h&&i.set(h,!0),c&&i.set(c,!0))}}),a.size&&a.forEach(function(o){var u=Pn("legacyOneTimeQuery"),s=r.getQuery(u).init({document:o.query,variables:o.variables}),c=new qn({queryManager:r,queryInfo:s,options:P(P({},o),{fetchPolicy:"network-only"})});V(c.queryId===u),s.setObservableQuery(c),n.set(u,c)}),__DEV__&&i.size&&i.forEach(function(o,u){o||__DEV__&&V.warn("Unknown query ".concat(typeof u=="string"?"named ":"").concat(JSON.stringify(u,null,2)," requested in refetchQueries options.include array"))}),n},t.prototype.reFetchObservableQueries=function(e){var r=this;e===void 0&&(e=!1);var n=[];return this.getObservableQueries(e?"all":"active").forEach(function(i,a){var o=i.options.fetchPolicy;i.resetLastResults(),(e||o!=="standby"&&o!=="cache-only")&&n.push(i.refetch()),r.getQuery(a).setDiff(null)}),this.broadcastQueries(),Promise.all(n)},t.prototype.setObservableQuery=function(e){this.getQuery(e.queryId).setObservableQuery(e)},t.prototype.startGraphQLSubscription=function(e){var r=this,n=e.query,i=e.fetchPolicy,a=e.errorPolicy,o=e.variables,u=e.context,s=u===void 0?{}:u;n=this.transform(n).document,o=this.getVariables(n,o);var c=function(l){return r.getObservableFromLink(n,s,l).map(function(p){if(i!=="no-cache"&&(Wn(p,a)&&r.cache.write({query:n,result:p.data,dataId:"ROOT_SUBSCRIPTION",variables:l}),r.broadcastQueries()),Or(p))throw new gt({graphQLErrors:p.errors});return p})};if(this.transform(n).hasClientExports){var h=this.localState.addExportedVariables(n,o,s).then(c);return new fe(function(l){var p=null;return h.then(function(d){return p=d.subscribe(l)},l.error),function(){return p&&p.unsubscribe()}})}return c(o)},t.prototype.stopQuery=function(e){this.stopQueryNoBroadcast(e),this.broadcastQueries()},t.prototype.stopQueryNoBroadcast=function(e){this.stopQueryInStoreNoBroadcast(e),this.removeQuery(e)},t.prototype.removeQuery=function(e){this.fetchCancelFns.delete(e),this.queries.has(e)&&(this.getQuery(e).stop(),this.queries.delete(e))},t.prototype.broadcastQueries=function(){this.onBroadcast&&this.onBroadcast(),this.queries.forEach(function(e){return e.notify()})},t.prototype.getLocalState=function(){return this.localState},t.prototype.getObservableFromLink=function(e,r,n,i){var a=this,o;i===void 0&&(i=(o=r==null?void 0:r.queryDeduplication)!==null&&o!==void 0?o:this.queryDeduplication);var u,s=this.transform(e).serverQuery;if(s){var c=this,h=c.inFlightLinkObservables,l=c.link,p={query:s,variables:n,operationName:Rn(s)||void 0,context:this.prepareContext(P(P({},r),{forceFetch:!i}))};if(r=p.context,i){var d=h.get(s)||new Map;h.set(s,d);var y=ft(n);if(u=d.get(y),!u){var f=new zt([Cn(l,p)]);d.set(y,u=f),f.beforeNext(function(){d.delete(y)&&d.size<1&&h.delete(s)})}}else u=new zt([Cn(l,p)])}else u=new zt([fe.of({data:{}})]),r=this.prepareContext(r);var v=this.transform(e).clientQuery;return v&&(u=rn(u,function(m){return a.localState.runResolvers({document:v,remoteResult:m,context:r,variables:n})})),u},t.prototype.getResultsFromLink=function(e,r,n){var i=e.lastRequestId=this.generateRequestId();n=li(n);var a=this.cache.transformForLink(this.transform(e.document).document);return rn(this.getObservableFromLink(a,n.context,n.variables),function(o){var u=Ue(o.errors)?o.errors.slice(0):[];"incremental"in o&&Ue(o.incremental)&&o.incremental.forEach(function(h){h.errors&&u.push.apply(u,h.errors)});var s=Ue(u);if(i>=e.lastRequestId){if(s&&n.errorPolicy==="none")throw e.markError(new gt({graphQLErrors:u}));e.markResult(o,a,n,r),e.markReady()}var c={data:o.data,loading:!1,networkStatus:ce.ready};return s&&n.errorPolicy!=="ignore"&&(c.errors=u,c.networkStatus=ce.error),c},function(o){var u=Gh(o)?o:new gt({networkError:o});throw i>=e.lastRequestId&&e.markError(u),u})},t.prototype.fetchQueryObservable=function(e,r,n){var i=this;n===void 0&&(n=ce.loading);var a=this.transform(r.query).document,o=this.getVariables(a,r.variables),u=this.getQuery(e),s=this.defaultOptions.watchQuery,c=r.fetchPolicy,h=c===void 0?s&&s.fetchPolicy||"cache-first":c,l=r.errorPolicy,p=l===void 0?s&&s.errorPolicy||"none":l,d=r.returnPartialData,y=d===void 0?!1:d,f=r.notifyOnNetworkStatusChange,v=f===void 0?!1:f,m=r.context,E=m===void 0?{}:m,g=Object.assign({},r,{query:a,variables:o,fetchPolicy:h,errorPolicy:p,returnPartialData:y,notifyOnNetworkStatusChange:v,context:E}),T=function(b){g.variables=b;var I=i.fetchQueryByPolicy(u,g,n);return g.fetchPolicy!=="standby"&&I.length>0&&u.observableQuery&&u.observableQuery.applyNextFetchPolicy("after-fetch",r),I},L=function(){return i.fetchCancelFns.delete(e)};this.fetchCancelFns.set(e,function(b){L(),setTimeout(function(){return A.cancel(b)})});var A=new zt(this.transform(g.query).hasClientExports?this.localState.addExportedVariables(g.query,g.variables,g.context).then(T):T(g.variables));return A.promise.then(L,L),A},t.prototype.refetchQueries=function(e){var r=this,n=e.updateCache,i=e.include,a=e.optimistic,o=a===void 0?!1:a,u=e.removeOptimistic,s=u===void 0?o?Pn("refetchQueries"):void 0:u,c=e.onQueryUpdated,h=new Map;i&&this.getObservableQueries(i).forEach(function(p,d){h.set(d,{oq:p,lastDiff:r.getQuery(d).getDiff()})});var l=new Map;return n&&this.cache.batch({update:n,optimistic:o&&s||!1,removeOptimistic:s,onWatchUpdated:function(p,d,y){var f=p.watcher instanceof dn&&p.watcher.observableQuery;if(f){if(c){h.delete(f.queryId);var v=c(f,d,y);return v===!0&&(v=f.refetch()),v!==!1&&l.set(f,v),v}c!==null&&h.set(f.queryId,{oq:f,lastDiff:y,diff:d})}}}),h.size&&h.forEach(function(p,d){var y=p.oq,f=p.lastDiff,v=p.diff,m;if(c){if(!v){var E=y.queryInfo;E.reset(),v=E.getDiff()}m=c(y,v,f)}(!c||m===!0)&&(m=y.refetch()),m!==!1&&l.set(y,m),d.indexOf("legacyOneTimeQuery")>=0&&r.stopQueryNoBroadcast(d)}),s&&this.cache.removeOptimistic(s),l},t.prototype.fetchQueryByPolicy=function(e,r,n){var i=this,a=r.query,o=r.variables,u=r.fetchPolicy,s=r.refetchWritePolicy,c=r.errorPolicy,h=r.returnPartialData,l=r.context,p=r.notifyOnNetworkStatusChange,d=e.networkStatus;e.init({document:this.transform(a).document,variables:o,networkStatus:n});var y=function(){return e.getDiff(o)},f=function(T,L){L===void 0&&(L=e.networkStatus||ce.loading);var A=T.result;__DEV__&&!h&&!_e(A,{})&&Hs(T.missing);var b=function(I){return fe.of(P({data:I,loading:rr(L),networkStatus:L},T.complete?null:{partial:!0}))};return A&&i.transform(a).hasForcedResolvers?i.localState.runResolvers({document:a,remoteResult:{data:A},context:l,variables:o,onlyRunForcedResolvers:!0}).then(function(I){return b(I.data||void 0)}):b(A)},v=u==="no-cache"?0:n===ce.refetch&&s!=="merge"?1:2,m=function(){return i.getResultsFromLink(e,v,{variables:o,context:l,fetchPolicy:u,errorPolicy:c})},E=p&&typeof d=="number"&&d!==n&&rr(n);switch(u){default:case"cache-first":{var g=y();return g.complete?[f(g,e.markReady())]:h||E?[f(g),m()]:[m()]}case"cache-and-network":{var g=y();return g.complete||h||E?[f(g),m()]:[m()]}case"cache-only":return[f(y(),e.markReady())];case"network-only":return E?[f(y()),m()]:[m()];case"no-cache":return E?[f(e.getDiff()),m()]:[m()];case"standby":return[]}},t.prototype.getQuery=function(e){return e&&!this.queries.has(e)&&this.queries.set(e,new dn(this,e)),this.queries.get(e)},t.prototype.prepareContext=function(e){e===void 0&&(e={});var r=this.localState.prepareContext(e);return P(P({},r),{clientAwareness:this.clientAwareness})},t}(),xa=!1,Xh=function(){function t(e){var r=this;this.resetStoreCallbacks=[],this.clearStoreCallbacks=[];var n=e.uri,i=e.credentials,a=e.headers,o=e.cache,u=e.ssrMode,s=u===void 0?!1:u,c=e.ssrForceFetchDelay,h=c===void 0?0:c,l=e.connectToDevTools,p=l===void 0?typeof window=="object"&&!window.__APOLLO_CLIENT__&&__DEV__:l,d=e.queryDeduplication,y=d===void 0?!0:d,f=e.defaultOptions,v=e.assumeImmutableResults,m=v===void 0?!1:v,E=e.resolvers,g=e.typeDefs,T=e.fragmentMatcher,L=e.name,A=e.version,b=e.link;if(b||(b=n?new Zf({uri:n,credentials:i,headers:a}):fr.empty()),!o)throw __DEV__?new ne(`To initialize Apollo Client, you must specify a 'cache' property in the options object. 
For more information, please visit: https://go.apollo.dev/c/docs`):new ne(9);if(this.link=b,this.cache=o,this.disableNetworkFetches=s||h>0,this.queryDeduplication=y,this.defaultOptions=f||Object.create(null),this.typeDefs=g,h&&setTimeout(function(){return r.disableNetworkFetches=!1},h),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this),p&&typeof window=="object"&&(window.__APOLLO_CLIENT__=this),!xa&&__DEV__&&(xa=!0,typeof window<"u"&&window.document&&window.top===window.self&&!window.__APOLLO_DEVTOOLS_GLOBAL_HOOK__)){var I=window.navigator,R=I&&I.userAgent,k=void 0;typeof R=="string"&&(R.indexOf("Chrome/")>-1?k="https://chrome.google.com/webstore/detail/apollo-client-developer-t/jdkknkkbebbapilgoeccciglkfbmbnfm":R.indexOf("Firefox/")>-1&&(k="https://addons.mozilla.org/en-US/firefox/addon/apollo-developer-tools/")),k&&__DEV__&&V.log("Download the Apollo DevTools for a better development experience: "+k)}this.version=Sf,this.localState=new Ys({cache:o,client:this,resolvers:E,fragmentMatcher:T}),this.queryManager=new $h({cache:this.cache,link:this.link,defaultOptions:this.defaultOptions,queryDeduplication:y,ssrMode:s,clientAwareness:{name:L,version:A},localState:this.localState,assumeImmutableResults:m,onBroadcast:p?function(){r.devToolsHookCb&&r.devToolsHookCb({action:{},state:{queries:r.queryManager.getQueryStore(),mutations:r.queryManager.mutationStore||{}},dataWithOptimisticResults:r.cache.extract(!0)})}:void 0})}return t.prototype.stop=function(){this.queryManager.stop()},t.prototype.watchQuery=function(e){return this.defaultOptions.watchQuery&&(e=nn(this.defaultOptions.watchQuery,e)),this.disableNetworkFetches&&(e.fetchPolicy==="network-only"||e.fetchPolicy==="cache-and-network")&&(e=P(P({},e),{fetchPolicy:"cache-first"})),this.queryManager.watchQuery(e)},t.prototype.query=function(e){return this.defaultOptions.query&&(e=nn(this.defaultOptions.query,e)),__DEV__?V(e.fetchPolicy!=="cache-and-network","The cache-and-network fetchPolicy does not work with client.query, because client.query can only return a single result. Please use client.watchQuery to receive multiple results from the cache and the network, or consider using a different fetchPolicy, such as cache-first or network-only."):V(e.fetchPolicy!=="cache-and-network",10),this.disableNetworkFetches&&e.fetchPolicy==="network-only"&&(e=P(P({},e),{fetchPolicy:"cache-first"})),this.queryManager.query(e)},t.prototype.mutate=function(e){return this.defaultOptions.mutate&&(e=nn(this.defaultOptions.mutate,e)),this.queryManager.mutate(e)},t.prototype.subscribe=function(e){return this.queryManager.startGraphQLSubscription(e)},t.prototype.readQuery=function(e,r){return r===void 0&&(r=!1),this.cache.readQuery(e,r)},t.prototype.readFragment=function(e,r){return r===void 0&&(r=!1),this.cache.readFragment(e,r)},t.prototype.writeQuery=function(e){this.cache.writeQuery(e),this.queryManager.broadcastQueries()},t.prototype.writeFragment=function(e){this.cache.writeFragment(e),this.queryManager.broadcastQueries()},t.prototype.__actionHookForDevTools=function(e){this.devToolsHookCb=e},t.prototype.__requestRaw=function(e){return Cn(this.link,e)},t.prototype.resetStore=function(){var e=this;return Promise.resolve().then(function(){return e.queryManager.clearStore({discardWatches:!1})}).then(function(){return Promise.all(e.resetStoreCallbacks.map(function(r){return r()}))}).then(function(){return e.reFetchObservableQueries()})},t.prototype.clearStore=function(){var e=this;return Promise.resolve().then(function(){return e.queryManager.clearStore({discardWatches:!0})}).then(function(){return Promise.all(e.clearStoreCallbacks.map(function(r){return r()}))})},t.prototype.onResetStore=function(e){var r=this;return this.resetStoreCallbacks.push(e),function(){r.resetStoreCallbacks=r.resetStoreCallbacks.filter(function(n){return n!==e})}},t.prototype.onClearStore=function(e){var r=this;return this.clearStoreCallbacks.push(e),function(){r.clearStoreCallbacks=r.clearStoreCallbacks.filter(function(n){return n!==e})}},t.prototype.reFetchObservableQueries=function(e){return this.queryManager.reFetchObservableQueries(e)},t.prototype.refetchQueries=function(e){var r=this.queryManager.refetchQueries(e),n=[],i=[];r.forEach(function(o,u){n.push(u),i.push(o)});var a=Promise.all(i);return a.queries=n,a.results=i,a.catch(function(o){__DEV__&&V.debug("In client.refetchQueries, Promise.all promise rejected with error ".concat(o))}),a},t.prototype.getObservableQueries=function(e){return e===void 0&&(e="active"),this.queryManager.getObservableQueries(e)},t.prototype.extract=function(e){return this.cache.extract(e)},t.prototype.restore=function(e){return this.cache.restore(e)},t.prototype.addResolvers=function(e){this.localState.addResolvers(e)},t.prototype.setResolvers=function(e){this.localState.setResolvers(e)},t.prototype.getResolvers=function(){return this.localState.getResolvers()},t.prototype.setLocalStateFragmentMatcher=function(e){this.localState.setFragmentMatcher(e)},t.prototype.setLink=function(e){this.link=this.queryManager.link=e},t}();const Jh={watchQuery:{fetchPolicy:"no-cache",errorPolicy:"ignore"},query:{fetchPolicy:"no-cache",errorPolicy:"all"}},Zh=t=>{const e=os+Tl+t;return new Xh({uri:e,cache:new Wh({addTypename:!1}),defaultOptions:Jh})},ep=t=>{var e,r;return(r=(e=t.filter(n=>["model","enum"].includes(n.type)).at(0))==null?void 0:e.id)!=null?r:0},tp=(t,{blocks:e,dbSource:r,schema:n})=>({currentEntityId:ep(e),blocks:e,currentDBSource:r,previewFilters:[],schema:n}),rp=(t,{blocks:e,schema:r})=>({...t,blocks:e,schema:r}),np=(t,e)=>({...t,blocks:e}),ip=(t,e)=>({...t,currentEntityId:e}),ap=(t,e)=>({...t,previewFilters:e}),op=(t,e)=>({...t,schema:e}),sp=(t,e)=>({...t,apolloClient:Zh(String(e))}),Ip=(t,e)=>{switch(e.type){case Wa:return tp(t,e.payload);case Ga:return rp(t,e.payload);case Qa:return np(t,e.payload);case za:return ip(t,e.payload);case Ka:return ap(t,e.payload);case Ha:return op(t,e.payload);case Ya:return sp(t,e.payload);default:return t}},Pp=()=>{const{state:{blocks:t}}=Pt.exports.useContext(Br),e=()=>Math.max(...t.map(r=>r.id))+1;return{entities:t.filter(r=>["enum","model"].includes(r.type)).map(r=>r),getNextId:e,getFirstEntity:()=>t.find(r=>["enum","model"].includes(r.type))}},Lp=()=>{const{state:{currentDBSource:t}}=Pt.exports.useContext(Br);return t},up="_pannel_k0ctw_1",cp="_title_k0ctw_6",lp="_select_k0ctw_11",fp="_actions_k0ctw_14",hp="_manage_k0ctw_19",Cp={pannel:up,title:cp,select:lp,actions:fp,manage:hp,"option-icon":"_option-icon_k0ctw_22","select-contain":"_select-contain_k0ctw_28","delete-label":"_delete-label_k0ctw_35","add-btn":"_add-btn_k0ctw_38","dropdown-icon":"_dropdown-icon_k0ctw_48"},Jt={extractDefaultAttrArgs:t=>{var n;const{value:e}=(n=t[0])!=null?n:{value:void 0};return typeof e=="object"&&e.name||e},extractNormalAttrArgs:t=>{var r;const{value:e}=(r=t[0])!=null?r:{value:void 0};return e},extractIndexAttributeArgs:t=>{var o;const e=(o=t==null?void 0:t.map(u=>u.value))!=null?o:[],r=e.filter(u=>u.key==="fields").map(u=>u.value).flatMap(u=>u.args),n=e.length>=1?e[0].args:[],i=t==null?void 0:t.map(u=>u.value).filter(u=>u.key==="name").map(u=>u.value)[0],a=t==null?void 0:t.map(u=>u.value).filter(u=>u.key==="map").map(u=>u.value)[0];return{fields:r.length>0?r:n,name:i,map:a}},extractRelationAttributeArgs:t=>{var a,o,u;const e=t.map(s=>s.value).filter(s=>s.key==="name").map(s=>s.value)[0],r=(o=(a=t[0])==null?void 0:a.value)!=null&&o.key||(u=t[0])==null?void 0:u.value,n=t.map(s=>s.value).filter(s=>s.key==="fields").map(s=>s.value).flatMap(s=>s.args),i=t.map(s=>s.value).filter(s=>s.key==="references").map(s=>s.value).flatMap(s=>s.args);return{name:e||r,fields:n,references:i}},buildNewRelationArgs:(t,e,r)=>{const n=[];return t&&n.push({type:"attributeArgument",value:{type:"keyValue",key:"name",value:t}}),e&&e.length>0&&n.push({type:"attributeArgument",value:{type:"keyValue",key:"fields",value:{type:"array",args:e}}}),r&&r.length>0&&n.push({type:"attributeArgument",value:{type:"keyValue",key:"references",value:{type:"array",args:r}}}),n}},pp=(t,e)=>{var a,o,u;const r=(a=t.attributes)==null?void 0:a.find(s=>s.name==="relation"),n=(u=(o=r==null?void 0:r.args)==null?void 0:o.map(s=>s.value).filter(s=>s.key==="fields").map(s=>s.value).flatMap(s=>s.args))!=null?u:[];return!!e.properties.filter(s=>s.type==="field").map(s=>s).filter(s=>n.includes(s.name)).find(s=>{var c;return(c=s.attributes)==null?void 0:c.find(h=>h.name==="unique")})},Ua=(t,e)=>{const r=[...e];return t.properties.filter(i=>i.type==="field").map(i=>i).filter(i=>{var a;return(a=i.attributes)==null?void 0:a.find(o=>o.name==="relation")}).forEach(i=>{var s,c,h;const a=i.fieldType,{name:o}=Jt.extractRelationAttributeArgs((h=(c=(s=i.attributes)==null?void 0:s.find(l=>l.name==="relation"))==null?void 0:c.args)!=null?h:[]),u=r.filter(l=>l.type==="model").map(l=>l).find(l=>l.name===a);if(u){const l=pp(i,t);let p=!1;const d=u.properties.map(y=>{var f,v,m;if(y.type==="field"&&y.fieldType===t.name){if(o){const{name:E}=Jt.extractRelationAttributeArgs((m=(v=(f=y.attributes)==null?void 0:f.find(g=>g.name==="relation"))==null?void 0:v.args)!=null?m:[]);if(E!==o)return y}return p=!0,{...y,array:!l,optional:l}}return y});if(!p){const y={type:"attribute",kind:"field",name:"relation",args:Jt.buildNewRelationArgs(o,[],[])};d.push({type:"field",name:o?o.replaceAll('"',"").toLowerCase():`${t.name.toLowerCase()}${l?"":"s"}`,fieldType:t.name,array:!l,optional:l,attributes:o?[y]:[]})}r.forEach((y,f)=>{y.id===u.id&&(r[f]={...u,properties:d})})}}),r},dp=(t,e,r)=>{const n=t.map(a=>a.fieldType),i=t.map(a=>{var o,u,s;return Jt.extractRelationAttributeArgs((s=(u=(o=a.attributes)==null?void 0:o.find(c=>c.name==="relation"))==null?void 0:u.args)!=null?s:[])}).map(a=>a.name);return r.map(a=>{if(a.type==="model"&&n.includes(a.name)){const o={...a};return{...o,properties:o.properties.filter(u=>{var s,c,h;if(u.type==="field"&&u.fieldType===e){const{name:l}=Jt.extractRelationAttributeArgs((h=(c=(s=u.attributes)==null?void 0:s.find(p=>p.name==="relation"))==null?void 0:c.args)!=null?h:[]);return!i.includes(l)}return!0})}}return a})},vp=t=>({addModel:e=>{const r=[...t,e];return Ua(e,r)},updateModel:e=>{const r=t.find(o=>o.id===e.id),n=r==null?void 0:r.properties.filter(o=>{var u;return o.type==="field"&&((u=o.attributes)==null?void 0:u.find(s=>s.name==="relation"))}).map(o=>o),i=e.properties.filter(o=>{var u;return o.type==="field"&&((u=o.attributes)==null?void 0:u.find(s=>s.name==="relation"))}).map(o=>o),a=n.filter(o=>!i.find(u=>{var s,c;return JSON.stringify((s=u.attributes)==null?void 0:s.find(h=>h.name==="relation"))===JSON.stringify((c=o.attributes)==null?void 0:c.find(h=>h.name==="relation"))}));return Ua(e,dp(a,e.name,t).map(o=>o.id===e.id?e:o))},addEnum:e=>[...t,e],addEnums:e=>[...t,...e],updateEnum:e=>t.map(r=>r.id===e.id?e:r),deleteEntity:e=>{const r=t.find(i=>i.id===e);if(!r)return t;const n=r.name;return t.filter(i=>i.id!==e).map(i=>i.type==="model"?{...i,properties:i.properties.filter(a=>!(a.type==="field"&&a.fieldType===n))}:i)},cleanEmptyNameEntity:()=>t.filter(e=>!(["enum","model"].includes(e.type)&&!e.name)),updateEntityName:(e,r)=>{const n=t.find(i=>i.id===e).name;return t.map(i=>{if(i.id!==e&&i.type==="model"){const a={...i},o=[...a.properties];return{...a,properties:o.map(u=>u.type==="field"&&u.fieldType===n?{...u,fieldType:r}:u)}}return i.id===e&&["enum","model"].includes(i.type)?{...i,name:r}:i})}}),wp=()=>{const{state:{blocks:t,currentDBSource:e},dispatch:r}=Pt.exports.useContext(Br);return{blocks:t,updateAndSaveBlock:i=>(i.forEach(a=>{a.type==="model"&&!a.properties&&(a.properties=[])}),Al(i,e.id).then(()=>Sl(String(e.id),r)).catch(a=>{throw r(su(vp(t).cleanEmptyNameEntity())),ja.error(`\u6570\u636E\u8FC1\u79FB\u5931\u8D25\uFF01error: ${a.message}`),a}))}},Mp=()=>{const{state:{currentEntityId:t,blocks:e},dispatch:r}=Pt.exports.useContext(Br),n=e.find(a=>a.id===t);return{currentEntityId:t,currentEntity:n,changeToEntityById:a=>{const o=e.find(c=>c.id===a),u=e.filter(c=>["enum","model"].includes(c.type)),s=u.length>0?u[0].id:0;r(uu(o?a:s))}}};export{_p as A,Op as B,gl as D,bp as E,Rp as M,ce as N,Br as P,Ap as U,kp as a,Tp as b,Lp as c,Mp as d,bl as e,Sp as f,wp as g,Pp as h,ss as i,vp as j,_s as k,V as l,Ip as m,Np as n,gf as o,In as p,mt as q,_e as r,Cp as s,Qr as t,uu as u,nn as v,Ue as w,gt as x,Jt as y,cs as z};
