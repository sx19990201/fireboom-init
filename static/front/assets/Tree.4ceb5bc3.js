import{r as N,a as E,A as ae,g as D,i as Ye,d as Q,k as pt,c as ye,_ as W,j as gt,F as ht,q as Kt,s as xt,v as mt,y as $e,f as ve,p as he,x as Nt,e as z,l as Ke,C as Ge,L as kt}from"./index.bb86fbbf.js";import{K as se,d as Et}from"./Portal.a4c68d61.js";import{p as Ct}from"./pickAttrs.38f17648.js";import{T as Xe,g as fe,C as xe,e as Je,f as Ae,b as V,h as St,i as q,j as Fe,d as J,p as bt,a as Se,k as be,l as Qe,c as Ze,m as we,n as _e,o as De}from"./conductUtil.03254829.js";import{L as Dt}from"./iconUtil.02bc4596.js";import{i as Ot,c as wt}from"./button.aa0bb50b.js";var Pt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M300 276.5a56 56 0 1056-97 56 56 0 00-56 97zm0 284a56 56 0 1056-97 56 56 0 00-56 97zM640 228a56 56 0 10112 0 56 56 0 00-112 0zm0 284a56 56 0 10112 0 56 56 0 00-112 0zM300 844.5a56 56 0 1056-97 56 56 0 00-56 97zM640 796a56 56 0 10112 0 56 56 0 00-112 0z"}}]},name:"holder",theme:"outlined"};const Tt=Pt;var et=function(l,s){return E(ae,{...D(D({},l),{},{ref:s,icon:Tt})})};et.displayName="HolderOutlined";const Lt=N.exports.forwardRef(et);var Mt=["className","style","motion","motionNodes","motionType","onMotionStart","onMotionEnd","active","treeNodeRequiredProps"],tt=function(l,s){var e=l.className,o=l.style,p=l.motion,c=l.motionNodes,t=l.motionType,a=l.onMotionStart,n=l.onMotionEnd,d=l.active,u=l.treeNodeRequiredProps,y=Ye(l,Mt),v=N.exports.useState(!0),g=Q(v,2),K=g[0],h=g[1],i=N.exports.useContext(Xe),x=i.prefixCls,m=N.exports.useRef(!1),f=function(){m.current||n(),m.current=!0};return N.exports.useEffect(function(){c&&t==="hide"&&K&&h(!1)},[c]),N.exports.useEffect(function(){return c&&a(),function(){c&&f()}},[]),c?E(pt,{ref:s,visible:K,...p,motionAppear:t==="show",onAppearEnd:f,onLeaveEnd:f,children:function(k,C){var b=k.className,w=k.style;return E("div",{ref:C,className:ye("".concat(x,"-treenode-motion"),b),style:w,children:c.map(function(S){var I=W({},S.data),O=S.title,T=S.key,$=S.isStart,M=S.isEnd;delete I.children;var R=fe(T,u);return N.exports.createElement(xe,{...I,...R,title:O,active:d,data:S.data,key:T,isStart:$,isEnd:M})})})}}):E(xe,{domRef:s,className:e,style:o,...y,active:d})};tt.displayName="MotionTreeNode";var Rt=N.exports.forwardRef(tt);function It(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=r.length,e=l.length;if(Math.abs(s-e)!==1)return{add:!1,key:null};function o(p,c){var t=new Map;p.forEach(function(n){t.set(n,!0)});var a=c.filter(function(n){return!t.has(n)});return a.length===1?a[0]:null}return s<e?{add:!0,key:o(r,l)}:{add:!1,key:o(l,r)}}function He(r,l,s){var e=r.findIndex(function(t){return t.key===s}),o=r[e+1],p=l.findIndex(function(t){return t.key===s});if(o){var c=l.findIndex(function(t){return t.key===o.key});return l.slice(p+1,c)}return l.slice(p+1)}var $t=["prefixCls","data","selectable","checkable","expandedKeys","selectedKeys","checkedKeys","loadedKeys","loadingKeys","halfCheckedKeys","keyEntities","disabled","dragging","dragOverNodeKey","dropPosition","motion","height","itemHeight","virtual","focusable","activeItem","focused","tabIndex","onKeyDown","onFocus","onBlur","onActiveChange","onListChangeStart","onListChangeEnd"],ze={width:0,height:0,display:"flex",overflow:"hidden",opacity:0,border:0,padding:0,margin:0},At=function(){},ne="RC_TREE_MOTION_".concat(Math.random()),Pe={key:ne},nt={key:ne,level:0,index:0,pos:"0",node:Pe,nodes:[Pe]},qe={parent:null,children:[],pos:nt.pos,data:Pe,title:null,key:ne,isStart:[],isEnd:[]};function je(r,l,s,e){return l===!1||!s?r:r.slice(0,Math.ceil(s/e)+1)}function Ue(r){var l=r.key,s=r.pos;return Je(l,s)}function Ft(r){for(var l=String(r.data.key),s=r;s.parent;)s=s.parent,l="".concat(s.data.key," > ").concat(l);return l}var at=N.exports.forwardRef(function(r,l){var s=r.prefixCls,e=r.data;r.selectable,r.checkable;var o=r.expandedKeys,p=r.selectedKeys,c=r.checkedKeys,t=r.loadedKeys,a=r.loadingKeys,n=r.halfCheckedKeys,d=r.keyEntities,u=r.disabled,y=r.dragging,v=r.dragOverNodeKey,g=r.dropPosition,K=r.motion,h=r.height,i=r.itemHeight,x=r.virtual,m=r.focusable,f=r.activeItem,k=r.focused,C=r.tabIndex,b=r.onKeyDown,w=r.onFocus,S=r.onBlur,I=r.onActiveChange,O=r.onListChangeStart,T=r.onListChangeEnd,$=Ye(r,$t),M=N.exports.useRef(null),R=N.exports.useRef(null);N.exports.useImperativeHandle(l,function(){return{scrollTo:function(X){M.current.scrollTo(X)},getIndentWidth:function(){return R.current.offsetWidth}}});var L=N.exports.useState(o),F=Q(L,2),Y=F[0],_=F[1],re=N.exports.useState(e),j=Q(re,2),H=j[0],U=j[1],le=N.exports.useState(e),oe=Q(le,2),A=oe[0],ie=oe[1],Ne=N.exports.useState([]),pe=Q(Ne,2),ke=pe[0],G=pe[1],ft=N.exports.useState(null),Me=Q(ft,2),vt=Me[0],Ee=Me[1],Re=N.exports.useRef(e);Re.current=e;function Ce(){var P=Re.current;U(P),ie(P),G([]),Ee(null),T()}N.exports.useEffect(function(){_(o);var P=It(Y,o);if(P.key!==null)if(P.add){var X=H.findIndex(function(ce){var ue=ce.key;return ue===P.key}),Z=je(He(H,e,P.key),x,h,i),de=H.slice();de.splice(X+1,0,qe),ie(de),G(Z),Ee("show")}else{var ee=e.findIndex(function(ce){var ue=ce.key;return ue===P.key}),te=je(He(e,H,P.key),x,h,i),ge=e.slice();ge.splice(ee+1,0,qe),ie(ge),G(te),Ee("hide")}else H!==e&&(U(e),ie(e))},[o,e]),N.exports.useEffect(function(){y||Ce()},[y]);var yt=K?A:e,Ie={expandedKeys:o,selectedKeys:p,loadedKeys:t,loadingKeys:a,checkedKeys:c,halfCheckedKeys:n,dragOverNodeKey:v,dropPosition:g,keyEntities:d};return gt(ht,{children:[k&&f&&E("span",{style:ze,"aria-live":"assertive",children:Ft(f)}),E("div",{children:E("input",{style:ze,disabled:m===!1||u,tabIndex:m!==!1?C:null,onKeyDown:b,onFocus:w,onBlur:S,value:"",onChange:At,"aria-label":"for screen reader"})}),E("div",{className:"".concat(s,"-treenode"),"aria-hidden":!0,style:{position:"absolute",pointerEvents:"none",visibility:"hidden",height:0,overflow:"hidden"},children:E("div",{className:"".concat(s,"-indent"),children:E("div",{ref:R,className:"".concat(s,"-indent-unit")})})}),E(Dt,{...$,data:yt,itemKey:Ue,height:h,fullHeight:!1,virtual:x,itemHeight:i,prefixCls:"".concat(s,"-list"),ref:M,onVisibleChange:function(X,Z){var de=new Set(X),ee=Z.filter(function(te){return!de.has(te)});ee.some(function(te){return Ue(te)===ne})&&Ce()},children:function(P){var X=P.pos,Z=W({},P.data),de=P.title,ee=P.key,te=P.isStart,ge=P.isEnd,ce=Je(ee,X);delete Z.key,delete Z.children;var ue=fe(ce,Ie);return E(Rt,{...Z,...ue,title:de,active:!!f&&ee===f.key,pos:X,data:P.data,isStart:te,isEnd:ge,motion:K,motionNodes:ee===ne?ke:null,motionType:vt,onMotionStart:O,onMotionEnd:Ce,treeNodeRequiredProps:Ie,onMouseMove:function(){I(null)}})}})]})});at.displayName="NodeList";function _t(r){var l=r.dropPosition,s=r.dropLevelOffset,e=r.indent,o={pointerEvents:"none",position:"absolute",right:0,backgroundColor:"red",height:2};switch(l){case-1:o.top=0,o.left=-s*e;break;case 1:o.bottom=0,o.left=-s*e;break;case 0:o.bottom=0,o.left=e;break}return E("div",{style:o})}var Ht=10,Te=function(r){Kt(s,r);var l=xt(s);function s(){var e;mt(this,s);for(var o=arguments.length,p=new Array(o),c=0;c<o;c++)p[c]=arguments[c];return e=l.call.apply(l,[this].concat(p)),e.destroyed=!1,e.delayedDragEnterLogic=void 0,e.loadingRetryTimes={},e.state={keyEntities:{},indent:null,selectedKeys:[],checkedKeys:[],halfCheckedKeys:[],loadedKeys:[],loadingKeys:[],expandedKeys:[],draggingNodeKey:null,dragChildrenKeys:[],dropTargetKey:null,dropPosition:null,dropContainerKey:null,dropLevelOffset:null,dropTargetPos:null,dropAllowed:!0,dragOverNodeKey:null,treeData:[],flattenNodes:[],focused:!1,activeKey:null,listChanging:!1,prevProps:null,fieldNames:Ae()},e.dragStartMousePosition=null,e.dragNode=void 0,e.currentMouseOverDroppableNodeKey=null,e.listRef=N.exports.createRef(),e.onNodeDragStart=function(t,a){var n=e.state,d=n.expandedKeys,u=n.keyEntities,y=e.props.onDragStart,v=a.props.eventKey;e.dragNode=a,e.dragStartMousePosition={x:t.clientX,y:t.clientY};var g=V(d,v);e.setState({draggingNodeKey:v,dragChildrenKeys:St(v,u),indent:e.listRef.current.getIndentWidth()}),e.setExpandedKeys(g),window.addEventListener("dragend",e.onWindowDragEnd),y==null||y({event:t,node:q(a.props)})},e.onNodeDragEnter=function(t,a){var n=e.state,d=n.expandedKeys,u=n.keyEntities,y=n.dragChildrenKeys,v=n.flattenNodes,g=n.indent,K=e.props,h=K.onDragEnter,i=K.onExpand,x=K.allowDrop,m=K.direction,f=a.props,k=f.pos,C=f.eventKey,b=$e(e),w=b.dragNode;if(e.currentMouseOverDroppableNodeKey!==C&&(e.currentMouseOverDroppableNodeKey=C),!w){e.resetDragState();return}var S=Fe(t,w,a,g,e.dragStartMousePosition,x,v,u,d,m),I=S.dropPosition,O=S.dropLevelOffset,T=S.dropTargetKey,$=S.dropContainerKey,M=S.dropTargetPos,R=S.dropAllowed,L=S.dragOverNodeKey;if(y.indexOf(T)!==-1||!R){e.resetDragState();return}if(e.delayedDragEnterLogic||(e.delayedDragEnterLogic={}),Object.keys(e.delayedDragEnterLogic).forEach(function(F){clearTimeout(e.delayedDragEnterLogic[F])}),w.props.eventKey!==a.props.eventKey&&(t.persist(),e.delayedDragEnterLogic[k]=window.setTimeout(function(){if(e.state.draggingNodeKey!==null){var F=ve(d),Y=u[a.props.eventKey];Y&&(Y.children||[]).length&&(F=J(d,a.props.eventKey)),"expandedKeys"in e.props||e.setExpandedKeys(F),i==null||i(F,{node:q(a.props),expanded:!0,nativeEvent:t.nativeEvent})}},800)),w.props.eventKey===T&&O===0){e.resetDragState();return}e.setState({dragOverNodeKey:L,dropPosition:I,dropLevelOffset:O,dropTargetKey:T,dropContainerKey:$,dropTargetPos:M,dropAllowed:R}),h==null||h({event:t,node:q(a.props),expandedKeys:d})},e.onNodeDragOver=function(t,a){var n=e.state,d=n.dragChildrenKeys,u=n.flattenNodes,y=n.keyEntities,v=n.expandedKeys,g=n.indent,K=e.props,h=K.onDragOver,i=K.allowDrop,x=K.direction,m=$e(e),f=m.dragNode;if(!!f){var k=Fe(t,f,a,g,e.dragStartMousePosition,i,u,y,v,x),C=k.dropPosition,b=k.dropLevelOffset,w=k.dropTargetKey,S=k.dropContainerKey,I=k.dropAllowed,O=k.dropTargetPos,T=k.dragOverNodeKey;d.indexOf(w)!==-1||!I||(f.props.eventKey===w&&b===0?e.state.dropPosition===null&&e.state.dropLevelOffset===null&&e.state.dropTargetKey===null&&e.state.dropContainerKey===null&&e.state.dropTargetPos===null&&e.state.dropAllowed===!1&&e.state.dragOverNodeKey===null||e.resetDragState():C===e.state.dropPosition&&b===e.state.dropLevelOffset&&w===e.state.dropTargetKey&&S===e.state.dropContainerKey&&O===e.state.dropTargetPos&&I===e.state.dropAllowed&&T===e.state.dragOverNodeKey||e.setState({dropPosition:C,dropLevelOffset:b,dropTargetKey:w,dropContainerKey:S,dropTargetPos:O,dropAllowed:I,dragOverNodeKey:T}),h==null||h({event:t,node:q(a.props)}))}},e.onNodeDragLeave=function(t,a){e.currentMouseOverDroppableNodeKey===a.props.eventKey&&!t.currentTarget.contains(t.relatedTarget)&&(e.resetDragState(),e.currentMouseOverDroppableNodeKey=null);var n=e.props.onDragLeave;n==null||n({event:t,node:q(a.props)})},e.onWindowDragEnd=function(t){e.onNodeDragEnd(t,null,!0),window.removeEventListener("dragend",e.onWindowDragEnd)},e.onNodeDragEnd=function(t,a){var n=e.props.onDragEnd;e.setState({dragOverNodeKey:null}),e.cleanDragState(),n==null||n({event:t,node:q(a.props)}),e.dragNode=null,window.removeEventListener("dragend",e.onWindowDragEnd)},e.onNodeDrop=function(t,a){var n,d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,u=e.state,y=u.dragChildrenKeys,v=u.dropPosition,g=u.dropTargetKey,K=u.dropTargetPos,h=u.dropAllowed;if(!!h){var i=e.props.onDrop;if(e.setState({dragOverNodeKey:null}),e.cleanDragState(),g!==null){var x=D(D({},fe(g,e.getTreeNodeRequiredProps())),{},{active:((n=e.getActiveItem())===null||n===void 0?void 0:n.key)===g,data:e.state.keyEntities[g].node}),m=y.indexOf(g)!==-1;he(!m,"Can not drop to dragNode's children node. This is a bug of rc-tree. Please report an issue.");var f=bt(K),k={event:t,node:q(x),dragNode:e.dragNode?q(e.dragNode.props):null,dragNodesKeys:[e.dragNode.props.eventKey].concat(y),dropToGap:v!==0,dropPosition:v+Number(f[f.length-1])};d||i==null||i(k),e.dragNode=null}}},e.cleanDragState=function(){var t=e.state.draggingNodeKey;t!==null&&e.setState({draggingNodeKey:null,dropPosition:null,dropContainerKey:null,dropTargetKey:null,dropLevelOffset:null,dropAllowed:!0,dragOverNodeKey:null}),e.dragStartMousePosition=null,e.currentMouseOverDroppableNodeKey=null},e.triggerExpandActionExpand=function(t,a){var n=e.state,d=n.expandedKeys,u=n.flattenNodes,y=a.expanded,v=a.key,g=a.isLeaf;if(!(g||t.shiftKey||t.metaKey||t.ctrlKey)){var K=u.filter(function(i){return i.key===v})[0],h=q(D(D({},fe(v,e.getTreeNodeRequiredProps())),{},{data:K.data}));e.setExpandedKeys(y?V(d,v):J(d,v)),e.onNodeExpand(t,h)}},e.onNodeClick=function(t,a){var n=e.props,d=n.onClick,u=n.expandAction;u==="click"&&e.triggerExpandActionExpand(t,a),d==null||d(t,a)},e.onNodeDoubleClick=function(t,a){var n=e.props,d=n.onDoubleClick,u=n.expandAction;u==="doubleClick"&&e.triggerExpandActionExpand(t,a),d==null||d(t,a)},e.onNodeSelect=function(t,a){var n=e.state.selectedKeys,d=e.state,u=d.keyEntities,y=d.fieldNames,v=e.props,g=v.onSelect,K=v.multiple,h=a.selected,i=a[y.key],x=!h;x?K?n=J(n,i):n=[i]:n=V(n,i);var m=n.map(function(f){var k=u[f];return k?k.node:null}).filter(function(f){return f});e.setUncontrolledState({selectedKeys:n}),g==null||g(n,{event:"select",selected:x,node:a,selectedNodes:m,nativeEvent:t.nativeEvent})},e.onNodeCheck=function(t,a,n){var d=e.state,u=d.keyEntities,y=d.checkedKeys,v=d.halfCheckedKeys,g=e.props,K=g.checkStrictly,h=g.onCheck,i=a.key,x,m={event:"check",node:a,checked:n,nativeEvent:t.nativeEvent};if(K){var f=n?J(y,i):V(y,i),k=V(v,i);x={checked:f,halfChecked:k},m.checkedNodes=f.map(function(O){return u[O]}).filter(function(O){return O}).map(function(O){return O.node}),e.setUncontrolledState({checkedKeys:f})}else{var C=Se([].concat(ve(y),[i]),!0,u),b=C.checkedKeys,w=C.halfCheckedKeys;if(!n){var S=new Set(b);S.delete(i);var I=Se(Array.from(S),{checked:!1,halfCheckedKeys:w},u);b=I.checkedKeys,w=I.halfCheckedKeys}x=b,m.checkedNodes=[],m.checkedNodesPositions=[],m.halfCheckedKeys=w,b.forEach(function(O){var T=u[O];if(!!T){var $=T.node,M=T.pos;m.checkedNodes.push($),m.checkedNodesPositions.push({node:$,pos:M})}}),e.setUncontrolledState({checkedKeys:b},!1,{halfCheckedKeys:w})}h==null||h(x,m)},e.onNodeLoad=function(t){var a=t.key,n=new Promise(function(d,u){e.setState(function(y){var v=y.loadedKeys,g=v===void 0?[]:v,K=y.loadingKeys,h=K===void 0?[]:K,i=e.props,x=i.loadData,m=i.onLoad;if(!x||g.indexOf(a)!==-1||h.indexOf(a)!==-1)return null;var f=x(t);return f.then(function(){var k=e.state.loadedKeys,C=J(k,a);m==null||m(C,{event:"load",node:t}),e.setUncontrolledState({loadedKeys:C}),e.setState(function(b){return{loadingKeys:V(b.loadingKeys,a)}}),d()}).catch(function(k){if(e.setState(function(b){return{loadingKeys:V(b.loadingKeys,a)}}),e.loadingRetryTimes[a]=(e.loadingRetryTimes[a]||0)+1,e.loadingRetryTimes[a]>=Ht){var C=e.state.loadedKeys;he(!1,"Retry for `loadData` many times but still failed. No more retry."),e.setUncontrolledState({loadedKeys:J(C,a)}),d()}u(k)}),{loadingKeys:J(h,a)}})});return n.catch(function(){}),n},e.onNodeMouseEnter=function(t,a){var n=e.props.onMouseEnter;n==null||n({event:t,node:a})},e.onNodeMouseLeave=function(t,a){var n=e.props.onMouseLeave;n==null||n({event:t,node:a})},e.onNodeContextMenu=function(t,a){var n=e.props.onRightClick;n&&(t.preventDefault(),n({event:t,node:a}))},e.onFocus=function(){var t=e.props.onFocus;e.setState({focused:!0});for(var a=arguments.length,n=new Array(a),d=0;d<a;d++)n[d]=arguments[d];t==null||t.apply(void 0,n)},e.onBlur=function(){var t=e.props.onBlur;e.setState({focused:!1}),e.onActiveChange(null);for(var a=arguments.length,n=new Array(a),d=0;d<a;d++)n[d]=arguments[d];t==null||t.apply(void 0,n)},e.getTreeNodeRequiredProps=function(){var t=e.state,a=t.expandedKeys,n=t.selectedKeys,d=t.loadedKeys,u=t.loadingKeys,y=t.checkedKeys,v=t.halfCheckedKeys,g=t.dragOverNodeKey,K=t.dropPosition,h=t.keyEntities;return{expandedKeys:a||[],selectedKeys:n||[],loadedKeys:d||[],loadingKeys:u||[],checkedKeys:y||[],halfCheckedKeys:v||[],dragOverNodeKey:g,dropPosition:K,keyEntities:h}},e.setExpandedKeys=function(t){var a=e.state,n=a.treeData,d=a.fieldNames,u=be(n,t,d);e.setUncontrolledState({expandedKeys:t,flattenNodes:u},!0)},e.onNodeExpand=function(t,a){var n=e.state.expandedKeys,d=e.state,u=d.listChanging,y=d.fieldNames,v=e.props,g=v.onExpand,K=v.loadData,h=a.expanded,i=a[y.key];if(!u){var x=n.indexOf(i),m=!h;if(he(h&&x!==-1||!h&&x===-1,"Expand state not sync with index check"),m?n=J(n,i):n=V(n,i),e.setExpandedKeys(n),g==null||g(n,{node:a,expanded:m,nativeEvent:t.nativeEvent}),m&&K){var f=e.onNodeLoad(a);f&&f.then(function(){var k=be(e.state.treeData,n,y);e.setUncontrolledState({flattenNodes:k})}).catch(function(){var k=e.state.expandedKeys,C=V(k,i);e.setExpandedKeys(C)})}}},e.onListChangeStart=function(){e.setUncontrolledState({listChanging:!0})},e.onListChangeEnd=function(){setTimeout(function(){e.setUncontrolledState({listChanging:!1})})},e.onActiveChange=function(t){var a=e.state.activeKey,n=e.props.onActiveChange;a!==t&&(e.setState({activeKey:t}),t!==null&&e.scrollTo({key:t}),n==null||n(t))},e.getActiveItem=function(){var t=e.state,a=t.activeKey,n=t.flattenNodes;return a===null?null:n.find(function(d){var u=d.key;return u===a})||null},e.offsetActiveKey=function(t){var a=e.state,n=a.flattenNodes,d=a.activeKey,u=n.findIndex(function(g){var K=g.key;return K===d});u===-1&&t<0&&(u=n.length),u=(u+t+n.length)%n.length;var y=n[u];if(y){var v=y.key;e.onActiveChange(v)}else e.onActiveChange(null)},e.onKeyDown=function(t){var a=e.state,n=a.activeKey,d=a.expandedKeys,u=a.checkedKeys,y=a.fieldNames,v=e.props,g=v.onKeyDown,K=v.checkable,h=v.selectable;switch(t.which){case se.UP:{e.offsetActiveKey(-1),t.preventDefault();break}case se.DOWN:{e.offsetActiveKey(1),t.preventDefault();break}}var i=e.getActiveItem();if(i&&i.data){var x=e.getTreeNodeRequiredProps(),m=i.data.isLeaf===!1||!!(i.data[y.children]||[]).length,f=q(D(D({},fe(n,x)),{},{data:i.data,active:!0}));switch(t.which){case se.LEFT:{m&&d.includes(n)?e.onNodeExpand({},f):i.parent&&e.onActiveChange(i.parent.key),t.preventDefault();break}case se.RIGHT:{m&&!d.includes(n)?e.onNodeExpand({},f):i.children&&i.children.length&&e.onActiveChange(i.children[0].key),t.preventDefault();break}case se.ENTER:case se.SPACE:{K&&!f.disabled&&f.checkable!==!1&&!f.disableCheckbox?e.onNodeCheck({},f,!u.includes(n)):!K&&h&&!f.disabled&&f.selectable!==!1&&e.onNodeSelect({},f);break}}}g==null||g(t)},e.setUncontrolledState=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;if(!e.destroyed){var d=!1,u=!0,y={};Object.keys(t).forEach(function(v){if(v in e.props){u=!1;return}d=!0,y[v]=t[v]}),d&&(!a||u)&&e.setState(D(D({},y),n))}},e.scrollTo=function(t){e.listRef.current.scrollTo(t)},e}return Nt(s,[{key:"componentDidMount",value:function(){this.destroyed=!1,this.onUpdated()}},{key:"componentDidUpdate",value:function(){this.onUpdated()}},{key:"onUpdated",value:function(){var o=this.props.activeKey;o!==void 0&&o!==this.state.activeKey&&(this.setState({activeKey:o}),o!==null&&this.scrollTo({key:o}))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("dragend",this.onWindowDragEnd),this.destroyed=!0}},{key:"resetDragState",value:function(){this.setState({dragOverNodeKey:null,dropPosition:null,dropLevelOffset:null,dropTargetKey:null,dropContainerKey:null,dropTargetPos:null,dropAllowed:!1})}},{key:"render",value:function(){var o,p=this.state,c=p.focused,t=p.flattenNodes,a=p.keyEntities,n=p.draggingNodeKey,d=p.activeKey,u=p.dropLevelOffset,y=p.dropContainerKey,v=p.dropTargetKey,g=p.dropPosition,K=p.dragOverNodeKey,h=p.indent,i=this.props,x=i.prefixCls,m=i.className,f=i.style,k=i.showLine,C=i.focusable,b=i.tabIndex,w=b===void 0?0:b,S=i.selectable,I=i.showIcon,O=i.icon,T=i.switcherIcon,$=i.draggable,M=i.checkable,R=i.checkStrictly,L=i.disabled,F=i.motion,Y=i.loadData,_=i.filterTreeNode,re=i.height,j=i.itemHeight,H=i.virtual,U=i.titleRender,le=i.dropIndicatorRender,oe=i.onContextMenu,A=i.onScroll,ie=i.direction,Ne=i.rootClassName,pe=i.rootStyle,ke=Ct(this.props,{aria:!0,data:!0}),G;return $&&(Ke($)==="object"?G=$:typeof $=="function"?G={nodeDraggable:$}:G={}),E(Xe.Provider,{value:{prefixCls:x,selectable:S,showIcon:I,icon:O,switcherIcon:T,draggable:G,draggingNodeKey:n,checkable:M,checkStrictly:R,disabled:L,keyEntities:a,dropLevelOffset:u,dropContainerKey:y,dropTargetKey:v,dropPosition:g,dragOverNodeKey:K,indent:h,direction:ie,dropIndicatorRender:le,loadData:Y,filterTreeNode:_,titleRender:U,onNodeClick:this.onNodeClick,onNodeDoubleClick:this.onNodeDoubleClick,onNodeExpand:this.onNodeExpand,onNodeSelect:this.onNodeSelect,onNodeCheck:this.onNodeCheck,onNodeLoad:this.onNodeLoad,onNodeMouseEnter:this.onNodeMouseEnter,onNodeMouseLeave:this.onNodeMouseLeave,onNodeContextMenu:this.onNodeContextMenu,onNodeDragStart:this.onNodeDragStart,onNodeDragEnter:this.onNodeDragEnter,onNodeDragOver:this.onNodeDragOver,onNodeDragLeave:this.onNodeDragLeave,onNodeDragEnd:this.onNodeDragEnd,onNodeDrop:this.onNodeDrop},children:E("div",{role:"tree",className:ye(x,m,Ne,(o={},z(o,"".concat(x,"-show-line"),k),z(o,"".concat(x,"-focused"),c),z(o,"".concat(x,"-active-focused"),d!==null),o)),style:pe,children:E(at,{ref:this.listRef,prefixCls:x,style:f,data:t,disabled:L,selectable:S,checkable:!!M,motion:F,dragging:n!==null,height:re,itemHeight:j,virtual:H,focusable:C,focused:c,tabIndex:w,activeItem:this.getActiveItem(),onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onActiveChange:this.onActiveChange,onListChangeStart:this.onListChangeStart,onListChangeEnd:this.onListChangeEnd,onContextMenu:oe,onScroll:A,...this.getTreeNodeRequiredProps(),...ke})})})}}],[{key:"getDerivedStateFromProps",value:function(o,p){var c=p.prevProps,t={prevProps:o};function a(C){return!c&&C in o||c&&c[C]!==o[C]}var n,d=p.fieldNames;if(a("fieldNames")&&(d=Ae(o.fieldNames),t.fieldNames=d),a("treeData")?n=o.treeData:a("children")&&(he(!1,"`children` of Tree is deprecated. Please use `treeData` instead."),n=Qe(o.children)),n){t.treeData=n;var u=Ze(n,{fieldNames:d});t.keyEntities=D(z({},ne,nt),u.keyEntities)}var y=t.keyEntities||p.keyEntities;if(a("expandedKeys")||c&&a("autoExpandParent"))t.expandedKeys=o.autoExpandParent||!c&&o.defaultExpandParent?we(o.expandedKeys,y):o.expandedKeys;else if(!c&&o.defaultExpandAll){var v=D({},y);delete v[ne],t.expandedKeys=Object.keys(v).map(function(C){return v[C].key})}else!c&&o.defaultExpandedKeys&&(t.expandedKeys=o.autoExpandParent||o.defaultExpandParent?we(o.defaultExpandedKeys,y):o.defaultExpandedKeys);if(t.expandedKeys||delete t.expandedKeys,n||t.expandedKeys){var g=be(n||p.treeData,t.expandedKeys||p.expandedKeys,d);t.flattenNodes=g}if(o.selectable&&(a("selectedKeys")?t.selectedKeys=_e(o.selectedKeys,o):!c&&o.defaultSelectedKeys&&(t.selectedKeys=_e(o.defaultSelectedKeys,o))),o.checkable){var K;if(a("checkedKeys")?K=De(o.checkedKeys)||{}:!c&&o.defaultCheckedKeys?K=De(o.defaultCheckedKeys)||{}:n&&(K=De(o.checkedKeys)||{checkedKeys:p.checkedKeys,halfCheckedKeys:p.halfCheckedKeys}),K){var h=K,i=h.checkedKeys,x=i===void 0?[]:i,m=h.halfCheckedKeys,f=m===void 0?[]:m;if(!o.checkStrictly){var k=Se(x,!0,y);x=k.checkedKeys,f=k.halfCheckedKeys}t.checkedKeys=x,t.halfCheckedKeys=f}}return a("loadedKeys")&&(t.loadedKeys=o.loadedKeys),t}}]),s}(N.exports.Component);Te.defaultProps={prefixCls:"rc-tree",showLine:!1,showIcon:!0,selectable:!0,multiple:!1,checkable:!1,disabled:!1,checkStrictly:!1,draggable:!1,defaultExpandParent:!0,autoExpandParent:!1,defaultExpandAll:!1,defaultExpandedKeys:[],defaultCheckedKeys:[],defaultSelectedKeys:[],dropIndicatorRender:_t,allowDrop:function(){return!0},expandAction:!1};Te.TreeNode=xe;var zt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file",theme:"outlined"};const qt=zt;var rt=function(l,s){return E(ae,{...D(D({},l),{},{ref:s,icon:qt})})};rt.displayName="FileOutlined";const ot=N.exports.forwardRef(rt);var jt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 444H820V330.4c0-17.7-14.3-32-32-32H473L355.7 186.2a8.15 8.15 0 00-5.5-2.2H96c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h698c13 0 24.8-7.9 29.7-20l134-332c1.5-3.8 2.3-7.9 2.3-12 0-17.7-14.3-32-32-32zM136 256h188.5l119.6 114.4H748V444H238c-13 0-24.8 7.9-29.7 20L136 643.2V256zm635.3 512H159l103.3-256h612.4L771.3 768z"}}]},name:"folder-open",theme:"outlined"};const Ut=jt;var it=function(l,s){return E(ae,{...D(D({},l),{},{ref:s,icon:Ut})})};it.displayName="FolderOpenOutlined";const Vt=N.exports.forwardRef(it);var Bt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"};const Wt=Bt;var dt=function(l,s){return E(ae,{...D(D({},l),{},{ref:s,icon:Wt})})};dt.displayName="FolderOutlined";const Yt=N.exports.forwardRef(dt);var B;(function(r){r[r.None=0]="None",r[r.Start=1]="Start",r[r.End=2]="End"})(B||(B={}));function Le(r,l){function s(e){var o=e.key,p=e.children;l(o,e)!==!1&&Le(p||[],l)}r.forEach(s)}function Gt(r){var l=r.treeData,s=r.expandedKeys,e=r.startKey,o=r.endKey,p=[],c=B.None;if(e&&e===o)return[e];if(!e||!o)return[];function t(a){return a===e||a===o}return Le(l,function(a){if(c===B.End)return!1;if(t(a)){if(p.push(a),c===B.None)c=B.Start;else if(c===B.Start)return c=B.End,!1}else c===B.Start&&p.push(a);return s.indexOf(a)!==-1}),p}function Oe(r,l){var s=ve(l),e=[];return Le(r,function(o,p){var c=s.indexOf(o);return c!==-1&&(e.push(p),s.splice(c,1)),!!s.length}),e}var Ve=globalThis&&globalThis.__rest||function(r,l){var s={};for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&l.indexOf(e)<0&&(s[e]=r[e]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,e=Object.getOwnPropertySymbols(r);o<e.length;o++)l.indexOf(e[o])<0&&Object.prototype.propertyIsEnumerable.call(r,e[o])&&(s[e[o]]=r[e[o]]);return s};function Xt(r){var l=r.isLeaf,s=r.expanded;return l?E(ot,{}):s?E(Vt,{}):E(Yt,{})}function Be(r){var l=r.treeData,s=r.children;return l||Qe(s)}var Jt=function(l,s){var e=l.defaultExpandAll,o=l.defaultExpandParent,p=l.defaultExpandedKeys,c=Ve(l,["defaultExpandAll","defaultExpandParent","defaultExpandedKeys"]),t=N.exports.useRef(),a=N.exports.useRef(),n=N.exports.createRef();N.exports.useImperativeHandle(s,function(){return n.current});var d=function(){var M=Ze(Be(c)),R=M.keyEntities,L;return e?L=Object.keys(R):o?L=we(c.expandedKeys||p||[],R):L=c.expandedKeys||p,L},u=N.exports.useState(c.selectedKeys||c.defaultSelectedKeys||[]),y=Q(u,2),v=y[0],g=y[1],K=N.exports.useState(d()),h=Q(K,2),i=h[0],x=h[1];N.exports.useEffect(function(){"selectedKeys"in c&&g(c.selectedKeys)},[c.selectedKeys]),N.exports.useEffect(function(){"expandedKeys"in c&&x(c.expandedKeys)},[c.expandedKeys]);var m=function(M,R){var L;return"expandedKeys"in c||x(M),(L=c.onExpand)===null||L===void 0?void 0:L.call(c,M,R)},f=function(M,R){var L,F=c.multiple,Y=R.node,_=R.nativeEvent,re=Y.key,j=re===void 0?"":re,H=Be(c),U=W(W({},R),{selected:!0}),le=(_==null?void 0:_.ctrlKey)||(_==null?void 0:_.metaKey),oe=_==null?void 0:_.shiftKey,A;F&&le?(A=M,t.current=j,a.current=A,U.selectedNodes=Oe(H,A)):F&&oe?(A=Array.from(new Set([].concat(ve(a.current||[]),ve(Gt({treeData:H,expandedKeys:i,startKey:j,endKey:t.current}))))),U.selectedNodes=Oe(H,A)):(A=[j],t.current=j,a.current=A,U.selectedNodes=Oe(H,A)),(L=c.onSelect)===null||L===void 0||L.call(c,A,U),"selectedKeys"in c||g(A)},k=N.exports.useContext(Ge),C=k.getPrefixCls,b=k.direction,w=c.prefixCls,S=c.className,I=Ve(c,["prefixCls","className"]),O=C("tree",w),T=ye("".concat(O,"-directory"),z({},"".concat(O,"-directory-rtl"),b==="rtl"),S);return E(un,{icon:Xt,ref:n,blockNode:!0,...I,prefixCls:O,className:T,expandedKeys:i,selectedKeys:v,onSelect:f,onExpand:m})},st=N.exports.forwardRef(Jt);st.defaultProps={showIcon:!0,expandAction:"click"};const Qt=st;var We=4;function Zt(r){var l,s=r.dropPosition,e=r.dropLevelOffset,o=r.prefixCls,p=r.indent,c=r.direction,t=c===void 0?"ltr":c,a=t==="ltr"?"left":"right",n=t==="ltr"?"right":"left",d=(l={},z(l,a,-e*p+We),z(l,n,0),l);switch(s){case-1:d.top=-3;break;case 1:d.bottom=-3;break;default:d.bottom=-3,d[a]=p+We;break}return E("div",{style:d,className:"".concat(o,"-drop-indicator")})}var en={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M840.4 300H183.6c-19.7 0-30.7 20.8-18.5 35l328.4 380.8c9.4 10.9 27.5 10.9 37 0L858.9 335c12.2-14.2 1.2-35-18.5-35z"}}]},name:"caret-down",theme:"filled"};const tn=en;var lt=function(l,s){return E(ae,{...D(D({},l),{},{ref:s,icon:tn})})};lt.displayName="CaretDownFilled";const nn=N.exports.forwardRef(lt);var an={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"minus-square",theme:"outlined"};const rn=an;var ct=function(l,s){return E(ae,{...D(D({},l),{},{ref:s,icon:rn})})};ct.displayName="MinusSquareOutlined";const on=N.exports.forwardRef(ct);var dn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}},{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z"}}]},name:"plus-square",theme:"outlined"};const sn=dn;var ut=function(l,s){return E(ae,{...D(D({},l),{},{ref:s,icon:sn})})};ut.displayName="PlusSquareOutlined";const ln=N.exports.forwardRef(ut);function cn(r,l,s,e){var o=e.isLeaf,p=e.expanded,c=e.loading;if(c)return E(kt,{className:"".concat(r,"-switcher-loading-icon")});var t;if(s&&Ke(s)==="object"&&(t=s.showLeafIcon),o)return s?Ke(s)==="object"&&!t?E("span",{className:"".concat(r,"-switcher-leaf-line")}):E(ot,{className:"".concat(r,"-switcher-line-icon")}):null;var a="".concat(r,"-switcher-icon"),n=typeof l=="function"?l(e):l;return Ot(n)?wt(n,{className:ye(n.props.className||"",a)}):n||(s?p?E(on,{className:"".concat(r,"-switcher-line-icon")}):E(ln,{className:"".concat(r,"-switcher-line-icon")}):E(nn,{className:a}))}var me=N.exports.forwardRef(function(r,l){var s,e=N.exports.useContext(Ge),o=e.getPrefixCls,p=e.direction,c=e.virtual,t=r.prefixCls,a=r.className,n=r.showIcon,d=r.showLine,u=r.switcherIcon,y=r.blockNode,v=r.children,g=r.checkable,K=r.selectable,h=r.draggable,i=o("tree",t),x=W(W({},r),{showLine:Boolean(d),dropIndicatorRender:Zt}),m=N.exports.useMemo(function(){if(!h)return!1;var f={};switch(Ke(h)){case"function":f.nodeDraggable=h;break;case"object":f=W({},h);break}return f.icon!==!1&&(f.icon=f.icon||E(Lt,{})),f},[h]);return E(Te,{itemHeight:20,ref:l,virtual:c,...x,prefixCls:i,className:ye((s={},z(s,"".concat(i,"-icon-hide"),!n),z(s,"".concat(i,"-block-node"),y),z(s,"".concat(i,"-unselectable"),!K),z(s,"".concat(i,"-rtl"),p==="rtl"),s),a),direction:p,checkable:g&&E("span",{className:"".concat(i,"-checkbox-inner")}),selectable:K,switcherIcon:function(k){return cn(i,u,d,k)},draggable:m,children:v})});me.TreeNode=xe;me.DirectoryTree=Qt;me.defaultProps={checkable:!1,selectable:!0,showIcon:!1,motion:W(W({},Et),{motionAppear:!1}),blockNode:!1};const un=me;export{Vt as F,un as T,Yt as a,ot as b};
