import{a as e,F as A,j as i,r as p,a9 as F,q as me,s as pe,v as he,x as ge,d as fe,C as ve,c as ne,e as j,k as xe,_ as le,m as Fe,ak as Ce,aY as be,M as Ee,al as ye,a5 as we,a4 as De,a6 as Ne,a3 as Be}from"./index.bb86fbbf.js";import{C as ie}from"./row.b57345b2.js";import{i as x}from"./use-immer.module.c8467ba8.js";import{I as Z}from"./index.da25c8fe.js";import{B as se,r as Ie}from"./button.aa0bb50b.js";import{F as r}from"./index.2f0a4123.js";import"./index.61964446.js";import{I as S}from"./index.837f2673.js";import"./iconUtil.02bc4596.js";import{S as J}from"./index.445b6a21.js";import{S as re}from"./index.4c04c22e.js";import{I as f}from"./index.34a54fb6.js";import{P as ae}from"./PlusOutlined.c73517e2.js";/* empty css               */import{M as ke}from"./index.bb824a09.js";/* empty css               *//* empty css               */import{T as Se}from"./Table.134cf6cf.js";import"./index.9ea41163.js";import"./Pagination.4574862b.js";import{g as Ae,R as O}from"./index.11df8be1.js";import"./Tree.4ceb5bc3.js";import{D}from"./index.2ab34b44.js";import{P as _e}from"./index.29ffa237.js";import{d as U}from"./dayjs.min.bdeb7890.js";import{d as Pe}from"./duration.bb39ae3f.js";import{c as Le}from"./clsx.m.70024c70.js";import{W as Te}from"./workbenchContext.3d2abc29.js";import"./styleChecker.d685456c.js";import"./context.24d2ae58.js";import"./Portal.a4c68d61.js";import"./type.4482a080.js";import"./_baseIsEqual.08bd8828.js";import"./omit.fd69d8d2.js";import"./responsiveObserve.57a0a6d3.js";import"./EyeOutlined.7a3a19f7.js";import"./css.7dd30b7b.js";import"./DialogWrap.ab5d7a46.js";import"./PortalWrapper.eb4c9ec4.js";import"./pickAttrs.38f17648.js";import"./RightOutlined.93d63f13.js";import"./statusUtils.077f8a48.js";import"./SearchOutlined.7a88f9ff.js";import"./Overflow.7a0e3cac.js";import"./SearchOutlined.5704e58e.js";import"./index.c0722274.js";import"./Dropdown.6fe64b76.js";import"./Sider.d20f3d2a.js";import"./useForceUpdate.c2f36fab.js";import"./conductUtil.03254829.js";import"./DoubleRightOutlined.3d4f0e16.js";import"./isSymbol.5f361b44.js";import"./index.86464724.js";const Ve="_setTitle_nzxix_13",He="_authSetFrom_nzxix_77",Oe="_envTable_nzxix_168",I={"picture-box":"_picture-box_nzxix_1","item-label":"_item-label_nzxix_6",setTitle:Ve,"descriptions-box":"_descriptions-box_nzxix_21","check-info":"_check-info_nzxix_30","modal-save-btn":"_modal-save-btn_nzxix_35","save-btn":"_save-btn_nzxix_39","save-env-btn":"_save-env-btn_nzxix_55",authSetFrom:He,"ant-modal-title":"_ant-modal-title_nzxix_97","switch-edit-btn":"_switch-edit-btn_nzxix_104","edit-btn":"_edit-btn_nzxix_110","form-contain":"_form-contain_nzxix_138","security-form-contain":"_security-form-contain_nzxix_147","form-delete-icon":"_form-delete-icon_nzxix_151",envTable:Oe};function Re(){return e(A,{children:e("div",{className:"pt-8",children:i("div",{className:`${I["picture-box"]} flex`,children:[i("div",{className:"ml-8",children:[e(Z,{src:"/assets/system.svg",alt:"\u56FE\u7247\u4E0D\u89C1\u4E86"}),e("div",{className:"text-14px text-center leading-5 mt-2",children:"\u7CFB\u7EDF"})]}),i("div",{className:"ml-9",children:[e(Z,{src:"/assets/light.svg",alt:"\u56FE\u7247\u4E0D\u89C1\u4E86"}),e("div",{className:"text-14px text-center leading-5 mt-2",children:"\u4EAE\u8272"})]}),i("div",{className:"ml-9",children:[e(Z,{src:"/assets/dark.svg",alt:"\u56FE\u7247\u4E0D\u89C1\u4E86"}),e("div",{className:"text-14px text-center leading-5 mt-2",children:"\u6697\u8272"})]}),i("div",{className:"ml-9",children:[e(Z,{src:"/assets/black.svg",alt:"\u56FE\u7247\u4E0D\u89C1\u4E86"}),e("div",{className:"text-14px text-center leading-5 mt-2",children:"\u9ED1\u8272"})]})]})})})}const Me={wrapperCol:{xs:{span:24},sm:{span:16}}};function $e(){const[l,t]=x({}),[n]=r.useForm(),[s,a]=p.exports.useState(),h=/^(http(s?)|):\/\/(.+)$/,o=p.exports.useCallback(async(c,d)=>{await F.post("/global",{key:c,val:d})},[]);return p.exports.useEffect(()=>{F.get("/setting/corsConfiguration").then(c=>{t(c)})},[s]),e(A,{children:l.allowedOrigins?e("div",{className:"pt-8 pl-8",children:i(r,{form:n,initialValues:{allowedMethods:l.allowedMethods,maxAge:l.maxAge,allowedHeaders:l.allowedHeaders.join(","),exposedHeaders:l.exposedHeaders.join(","),allowCredentials:l.allowCredentials},labelAlign:"left",labelCol:{xs:{span:3},sm:{span:3}},wrapperCol:{xs:{span:10},sm:{span:9}},children:[e(r.Item,{label:"\u5141\u8BB8\u57DF\u540D",wrapperCol:{xs:{span:20},sm:{span:20}},children:e(r.List,{name:"allowedOrigins",initialValue:l.allowedOrigins,children:(c,{add:d,remove:y},{errors:m})=>i(A,{children:[c.map((N,E)=>p.exports.createElement(r.Item,{...Me,required:!1,key:N.key},e(r.Item,{...N,validateTrigger:["onChange","onBlur"],noStyle:!0,rules:[{pattern:h,message:"\u8BF7\u586B\u5199\u89C4\u8303\u57DF\u540D"}],children:i("div",{children:[e("div",{children:"\u57DF\u540D"+(E+1).toString()+":"}),e(S,{placeholder:"\u8BF7\u8F93\u5165\u57DF\u540D...",style:{width:"60%"},defaultValue:l.allowedOrigins[E],onBlur:()=>{o("allowedOrigins",n.getFieldValue("allowedOrigins")).then(()=>{a(!s)})},onPressEnter:()=>{o("allowedOrigins",n.getFieldValue("allowedOrigins")).then(()=>{a(!s)})}}),e(f,{type:"icon-guanbi",className:`${I["form-delete-icon"]}`,onClick:()=>{F.post("/global",{key:"allowedOrigins",val:n.getFieldValue("allowedOrigins").filter((v,b)=>b!=E)}).then(()=>{y(E)})}})]})}))),i(r.Item,{wrapperCol:{span:20},children:[e(se,{type:"dashed",style:{width:"48%"},onClick:()=>{d()},icon:e(ae,{}),className:"text-gray-500/60",children:"\u65B0\u589E\u57DF\u540D"}),e(r.ErrorList,{errors:m})]})]})})}),e(r.Item,{name:"allowedMethods",label:"\u5141\u8BB8\u65B9\u6CD5",className:"-mt-3",children:e(re,{style:{width:"90%"},mode:"multiple",placeholder:"\u8BF7\u9009\u62E9...",onChange:c=>{o("allowedMethods",c).then(()=>{a(!s)})},children:["GET","POST","PUT","DELETE"].map(c=>e(re.Option,{value:c,children:c},c))})}),e(r.Item,{name:"allowedHeaders",label:"\u5141\u8BB8\u5934",children:e(S,{placeholder:"\u8BF7\u8F93\u5165...",onBlur:()=>{o("allowedHeaders",n.getFieldValue("allowedHeaders").split(",")).then(()=>{a(!s)})},onPressEnter:()=>{o("allowedHeaders",n.getFieldValue("allowedHeaders").split(",")).then(()=>{a(!s)})}})}),e(r.Item,{name:"exposedHeaders",label:"\u6392\u9664\u5934",children:e(S,{placeholder:"\u8BF7\u8F93\u5165...",onBlur:()=>{o("exposedHeaders",n.getFieldValue("exposedHeaders").split(",")).then(()=>{a(!s)})},onPressEnter:()=>{o("exposedHeaders",n.getFieldValue("exposedHeaders").split(",")).then(()=>{a(!s)})}})}),i(r.Item,{label:"\u8DE8\u57DF\u65F6\u95F4",children:[e(r.Item,{name:"maxAge",validateTrigger:["onChange","onBlur"],noStyle:!0,rules:[{validator:(c,d)=>{if(d)return d<0||d>86400?Promise.reject("\u8BF7\u586B\u5199\u8303\u56F4\u5185\u7684\u8DE8\u57DF\u65F6\u95F4,\u8303\u56F4\u4E3A0- 86400 \u79D2"):Promise.resolve()}}],children:e(S,{onBlur:()=>{o("maxAge",Number(n.getFieldValue("maxAge"))).then(()=>{a(!s)})},onPressEnter:()=>{o("maxAge",Number(n.getFieldValue("maxAge"))).then(()=>{a(!s)})}})}),e("span",{className:"ml-2",children:"\u79D2"})]}),i(r.Item,{label:"\u5141\u8BB8\u8BC1\u4E66",children:[e(r.Item,{valuePropName:"checked",name:"allowCredentials",noStyle:!0,required:!0,children:e(J,{checked:l.allowCredentials,onChange:c=>{o("allowCredentials",c).then(()=>{a(!s)})}})}),i("span",{className:"ml-4 text-gray-500 inline-block h-6",children:[e(f,{type:"icon-zhuyi",className:"text-[14px]"})," \u662F\u5426\u5141\u8BB8\u8BC1\u4E66"]})]})]})}):""})}function ze(){var Y,B,W;const[l]=r.useForm(),[t,n]=p.exports.useState(),[s,a]=x(!1),[h,o]=x(!1),[c,d]=x(!1),[y,m]=x(!0),[N,E]=x([]),[v,b]=x(-1),[k,L]=x([]),[R,_]=p.exports.useState("");p.exports.useEffect(()=>{F.get("/env").then(g=>{L(g),E(g.filter(w=>{w.envType==1}))})},[t]);const u=g=>{if(v==-1)F.post("/env",g).then(()=>{n(!t)});else{const w={...g,id:v};F.put("/env",w).then(()=>{n(!t)})}},C=g=>{console.log("Failed:",g)},K=g=>{F.delete(`/env/${g}`).then(()=>{n(!t)})},q=()=>{a(!s)},G=g=>g===R,M=g=>{_(g),d(!c)},X=()=>{l.resetFields(),o(!0)},Q=()=>{const g=l.getFieldsError().some(({errors:w})=>w.length);m(g)},ee=[{title:"\u53D8\u91CF\u540D",dataIndex:"key",key:"key",width:200},{title:"\u5F00\u53D1\u73AF\u5883",dataIndex:"devEnv",key:"devEnv",width:200},{title:"\u751F\u4EA7\u73AF\u5883",key:"proEnv",dataIndex:"proEnv",width:200,render:(g,{key:w,proEnv:T})=>G(w)?c?i("div",{children:[e("span",{children:T})," ",e(f,{type:"icon-xiaoyanjing-chakan",className:"ml-6",onClick:()=>M(w)})," "]}):i("div",{children:[" ",e("span",{children:"**************"})," ",e(f,{type:"icon-xiaoyanjing-yincang",className:"ml-6",onClick:()=>M(w)})]}):i("div",{children:[" ",e("span",{children:"**************"})," ",e(f,{type:"icon-xiaoyanjing-yincang",className:"ml-6",onClick:()=>M(w)})]})},{title:"\u64CD\u4F5C",dataIndex:"action",width:200,render:(g,{id:w,key:T,devEnv:V,proEnv:te})=>i("div",{children:[e(f,{type:"icon-zhongmingming",onClick:()=>{o(!0),l.setFieldsValue({key:T,devEnv:V,proEnv:te}),b(w)},className:"mr-3"}),e(_e,{title:"\u786E\u5B9A\u8981\u5220\u9664?",okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",onConfirm:H=>{H.stopPropagation(),K(w)},onCancel:H=>{H.stopPropagation()},children:e(f,{type:"icon-shanchu",onClick:H=>H.stopPropagation()})})]})}];return e(A,{children:i("div",{className:"px-8 bg-white h-full pt-7",children:[i("div",{className:"flex justify-between",children:[e("div",{className:"mt-0",children:e("span",{children:"\u73AF\u5883\u53D8\u91CF"})}),e("button",{className:"btn-save mb-4 border-none font-14px",onClick:X,children:e("span",{className:"h-7",onClick:()=>{l.setFieldsValue({key:"",devEnv:"",proEnv:""}),o(!0),b(-1)},children:"\u65B0\u5EFA\u53D8\u91CF"})})]}),e(ke,{mask:!1,title:v===-1?"\u65B0\u589E\u73AF\u5883\u53D8\u91CF":"\u4FEE\u6539\u73AF\u5883\u53D8\u91CF",forceRender:!0,transitionName:"",bodyStyle:{width:"549px",height:"200px",margin:"12px auto"},open:h,onOk:()=>o(!1),onCancel:()=>o(!1),okButtonProps:{disabled:y},okText:e("span",{className:I["save-env-btn"],onClick:()=>{l.submit()},children:v===-1?"\u521B\u5EFA":"\u4FDD\u5B58"}),cancelText:e("span",{className:"w-10",children:"\u53D6\u6D88"}),okType:"text",children:i(r,{name:"envList",form:l,validateTrigger:["onBlur","onChange"],className:"ml-15",labelCol:{span:4},wrapperCol:{span:15},onFinish:g=>{u(g)},autoComplete:"off",onValuesChange:Q,onFinishFailed:C,labelAlign:"left",children:[e(r.Item,{label:"\u540D\u79F0",name:"key",rules:[{required:!0,message:"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A"},{pattern:new RegExp("^[a-zA-Z_][a-zA-Z0-9_]*$","g"),message:"\u4EE5\u5B57\u6BCD\u6216\u4E0B\u5212\u7EBF\u5F00\u5934\uFF0C\u53EA\u80FD\u7531\u6570\u5B57\u3001\u5B57\u6BCD\u3001\u4E0B\u5212\u7EBF\u7EC4\u6210"},{validator:(g,w)=>k.findIndex(V=>V.key==w)!=-1?Promise.reject("\u540D\u79F0\u91CD\u590D"):Promise.resolve()}],children:e(S,{})}),e(r.Item,{label:"\u5F00\u53D1\u73AF\u5883",name:"devEnv",rules:[{required:!0,message:"\u5F00\u53D1\u73AF\u5883\u4E0D\u80FD\u4E3A\u7A7A"},{pattern:/^[/\w]{1,256}$/g,message:"\u8BF7\u8F93\u5165\u957F\u5EA6\u4E0D\u5927\u4E8E256\u7684\u975E\u7A7A\u503C"}],children:e(S,{})}),e(r.Item,{label:"\u751F\u4EA7\u73AF\u5883",name:"proEnv",rules:[{required:!0,message:"\u751F\u4EA7\u73AF\u5883\u4E0D\u80FD\u4E3A\u7A7A"},{pattern:/^[/\w]{1,256}$/g,message:"\u8BF7\u8F93\u5165\u957F\u5EA6\u4E0D\u5927\u4E8E256\u7684\u975E\u7A7A\u503C"}],children:e(S,{})})]})}),e(Se,{columns:ee,dataSource:k,rowKey:g=>g.key,pagination:!1,className:"mb-3 "+I.envTable}),i("div",{className:"border-gray border-b",children:[e("div",{children:e("span",{children:"\u7CFB\u7EDF\u53D8\u91CF"})}),e(D,{className:"mt-3",bordered:!0,column:1,size:"small",labelStyle:{color:"#5F6269",backgroundColor:"white",width:"30%",borderRight:"none",borderBottom:"none"},children:e(D.Item,{label:(Y=N[0])!=null&&Y.key?(B=N[0])==null?void 0:B.key:"FIREBOOM_ADMINZ_SECR",children:e("span",{onClick:q,children:s?i("div",{children:[(W=N[0])==null?void 0:W.devEnv,e(f,{type:"icon-xiaoyanjing-chakan",className:"ml-6"})]}):i("div",{children:[e("span",{children:"**************"}),e(f,{type:"icon-xiaoyanjing-yincang",className:"ml-6"})]})})})})]})]})})}const ue={wrapperCol:{xs:{span:24},sm:{span:16}}};function je(){const[l,t]=x([]),[n,s]=x(!1),[a]=r.useForm(),[h,o]=p.exports.useState(),c=/^(http(s?)|):\/\/(.+)$/;return p.exports.useEffect(()=>{F.get("/auth/redirectUrl").then(d=>{t(d),s(!0)})},[h]),e(A,{children:n?e("div",{className:`${I["form-contain"]} `,children:e(r,{form:a,initialValues:{redirectURLs:l},labelAlign:"left",labelCol:{xs:{span:4},sm:{span:4}},wrapperCol:{xs:{span:10},sm:{span:9}},children:e(r.Item,{label:"\u914D\u7F6E\u91CD\u5B9A\u5411URL",wrapperCol:{xs:{span:20},sm:{span:20}},children:e(r.List,{name:"redirectURLs",children:(d,{add:y,remove:m},{errors:N})=>i(A,{children:[d.map((E,v)=>p.exports.createElement(r.Item,{...ue,required:!1,key:E.key},e(r.Item,{...E,validateTrigger:["onChange","onBlur"],noStyle:!0,rules:[{pattern:c,message:"\u8BF7\u586B\u5199\u89C4\u8303\u57DF\u540D"}],children:i("div",{children:[e("div",{children:"\u57DF\u540D"+(v+1).toString()+":"}),e(S,{placeholder:"\u8BF7\u8F93\u5165\u57DF\u540D",style:{width:"60%"},defaultValue:l[v],onBlur:()=>{F.post("/auth/redirectUrl",{redirectURLs:a.getFieldValue("redirectURLs")}).then(()=>{o(!h)})},onPressEnter:()=>{F.post("/auth/redirectUrl",{redirectURLs:a.getFieldValue("redirectURLs")}).then(()=>{o(!h)})}}),e(f,{type:"icon-guanbi",className:`${I["form-delete-icon"]}`,onClick:()=>{F.post("/auth/redirectUrl",{redirectURLs:a.getFieldValue("redirectURLs").filter((b,k)=>k!=v)}).then(()=>{m(v),o(!h)})}})]})}))),i(r.Item,{wrapperCol:{span:20},className:"mt-4",children:[e(se,{type:"dashed",style:{width:"48%"},icon:e(ae,{}),className:"text-gray-500/60",onClick:()=>y(),children:"\u65B0\u589E\u57DF\u540D"}),e(r.ErrorList,{errors:N})]})]})})})})}):null})}function Ue(){const[l]=r.useForm(),[t,n]=x({}),[s,a]=p.exports.useState(),h=/^(http(s?)|):\/\/(.+)$/,o=d=>{F.post("/global",{key:"enableGraphQLEndpoint",val:0}).then(()=>{a(!s)})},c=async(d,y)=>{await F.post("/global",{key:d,val:y})};return p.exports.useEffect(()=>{F.get("/setting/securityConfig").then(d=>{n(d)})},[s]),i("div",{className:"pl-8 pt-4 bg-white h-full",children:[t.allowedHosts?e("div",{className:`${I["security-form-contain"]}`,children:i(r,{form:l,name:"dynamic_form_item",initialValues:{allowedHosts:t==null?void 0:t.allowedHosts,enableGraphQLEndpoint:t.enableGraphQLEndpoint},onFinish:o,labelAlign:"left",labelCol:{xs:{span:4},sm:{span:4}},wrapperCol:{xs:{span:10},sm:{span:9}},children:[i(r.Item,{label:"GraphQL\u7AEF\u70B9\uFF1A",children:[e(r.Item,{name:"enableGraphQLEndpoint",noStyle:!0,required:!0,children:e(J,{className:I["switch-edit-btn"],checked:t.enableGraphQLEndpoint,size:"small",onChange:d=>{c("enableGraphQLEndpoint",d).then(()=>{a(!s)})}})}),i("span",{className:I.setTitle,children:[e(f,{type:"icon-zhuyi",className:"mr-1 text-[14px]"}),e("span",{children:"https://loacalhost:9991/api/main/graphql"})]})]}),e(r.Item,{label:"\u5141\u8BB8\u57DF\u540D",wrapperCol:{xs:{span:2},sm:{span:20}},children:e(r.List,{name:"allowedHosts",children:(d,{add:y,remove:m},{errors:N})=>i(A,{children:[d.map((E,v)=>p.exports.createElement(r.Item,{...ue,required:!1,key:E.key},e(r.Item,{...E,validateTrigger:["onChange","onBlur"],noStyle:!0,rules:[{pattern:h,message:"\u8BF7\u586B\u5199\u89C4\u8303\u57DF\u540D"}],children:i("div",{className:"",children:[e("div",{children:"\u57DF\u540D"+(v+1).toString()+":"}),e(S,{placeholder:"\u8BF7\u8F93\u5165\u57DF\u540D...",style:{width:"60%"},defaultValue:t.allowedHosts[v],onBlur:b=>{b.target.value!=""&&c("allowedHosts",l.getFieldValue("allowedHosts")).then(()=>{a(!s)})},onPressEnter:b=>{b.target.value!=""&&c("allowedHosts",l.getFieldValue("allowedHosts")).then(()=>{a(!s)})}}),e(f,{type:"icon-guanbi",className:`${I["form-delete-icon"]}`,onClick:()=>{F.post("/global",{key:"allowedHosts",val:l.getFieldValue("allowedHosts").filter((b,k)=>k!=v)}).then(()=>{m(v)})}})]})}))),i(r.Item,{wrapperCol:{span:20},className:"mt-4",children:[e(se,{type:"dashed",style:{width:"48%"},onClick:()=>y(),icon:e(ae,{}),className:"text-gray-500/60",children:"\u65B0\u589E\u57DF\u540D"}),e(r.ErrorList,{errors:N})]})]})})})]})}):null,e(je,{})]})}var qe=function(l){me(n,l);var t=pe(n);function n(){var s;return he(this,n),s=t.apply(this,arguments),s.state={error:void 0,info:{componentStack:""}},s}return ge(n,[{key:"componentDidCatch",value:function(a,h){this.setState({error:a,info:h})}},{key:"render",value:function(){var a=this.props,h=a.message,o=a.description,c=a.children,d=this.state,y=d.error,m=d.info,N=m&&m.componentStack?m.componentStack:null,E=typeof h>"u"?(y||"").toString():h,v=typeof o>"u"?N:o;return y?e(de,{type:"error",message:E,description:e("pre",{children:v})}):c}}]),n}(p.exports.Component),Ge=globalThis&&globalThis.__rest||function(l,t){var n={};for(var s in l)Object.prototype.hasOwnProperty.call(l,s)&&t.indexOf(s)<0&&(n[s]=l[s]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(l);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(l,s[a])&&(n[s[a]]=l[s[a]]);return n},Qe={success:Ce,info:be,error:Ee,warning:ye},Ye={success:we,info:De,error:Ne,warning:Be},We=function(t){var n=t.description,s=t.icon,a=t.prefixCls,h=t.type,o=(n?Ye:Qe)[h]||null;return s?Ie(s,e("span",{className:"".concat(a,"-icon"),children:s}),function(){return{className:ne("".concat(a,"-icon"),j({},s.props.className,s.props.className))}}):p.exports.createElement(o,{className:"".concat(a,"-icon")})},Ze=function(t){var n=t.isClosable,s=t.closeText,a=t.prefixCls,h=t.closeIcon,o=t.handleClose;return n?e("button",{type:"button",onClick:o,className:"".concat(a,"-close-icon"),tabIndex:0,children:s?e("span",{className:"".concat(a,"-close-text"),children:s}):h}):null},ce=function(t){var n,s=t.description,a=t.prefixCls,h=t.message,o=t.banner,c=t.className,d=c===void 0?"":c,y=t.style,m=t.onMouseEnter,N=t.onMouseLeave,E=t.onClick,v=t.afterClose,b=t.showIcon,k=t.closable,L=t.closeText,R=t.closeIcon,_=R===void 0?e(Fe,{}):R,u=t.action,C=Ge(t,["description","prefixCls","message","banner","className","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action"]),K=p.exports.useState(!1),q=fe(K,2),G=q[0],M=q[1],X=p.exports.useRef(),Q=p.exports.useContext(ve),ee=Q.getPrefixCls,Y=Q.direction,B=ee("alert",a),W=function(P){var z;M(!0),(z=C.onClose)===null||z===void 0||z.call(C,P)},g=function(){var P=C.type;return P!==void 0?P:o?"warning":"info"},w=L?!0:k,T=g(),V=o&&b===void 0?!0:b,te=ne(B,"".concat(B,"-").concat(T),(n={},j(n,"".concat(B,"-with-description"),!!s),j(n,"".concat(B,"-no-icon"),!V),j(n,"".concat(B,"-banner"),!!o),j(n,"".concat(B,"-rtl"),Y==="rtl"),n),d),H=Ae(C);return e(xe,{visible:!G,motionName:"".concat(B,"-motion"),motionAppear:!1,motionEnter:!1,onLeaveStart:function(P){return{maxHeight:P.offsetHeight}},onLeaveEnd:v,children:function($){var P=$.className,z=$.style;return i("div",{ref:X,"data-show":!G,className:ne(te,P),style:le(le({},y),z),onMouseEnter:m,onMouseLeave:N,onClick:E,role:"alert",...H,children:[V?e(We,{description:s,icon:C.icon,prefixCls:B,type:T}):null,i("div",{className:"".concat(B,"-content"),children:[h?e("div",{className:"".concat(B,"-message"),children:h}):null,s?e("div",{className:"".concat(B,"-description"),children:s}):null]}),u?e("div",{className:"".concat(B,"-action"),children:u}):null,e(Ze,{isClosable:!!w,closeText:L,prefixCls:B,closeIcon:_,handleClose:W})]})}})};ce.ErrorBoundary=qe;const de=ce;U.extend(Pe);function Je(){const[l,t]=x(!1),[n,s]=x(!1),[a,h]=x(!1),[o,c]=x(!1),[d,y]=x(!1),[m,N]=x({}),[E,v]=x(0),[b,k]=p.exports.useState();p.exports.useEffect(()=>{F.get("/setting/systemConfig").then(u=>{N(u)})},[b]),p.exports.useEffect(()=>{F.get("/setting/getTime").then(u=>{const C=Date.parse(u);v(C)}).then(()=>{k(!b)})},[]),p.exports.useEffect(()=>{const u=setInterval(()=>v(C=>C+1),1e3);return()=>{clearInterval(u)}},[]);const L=(u,C)=>{F.post("/setting",{key:C,val:u.target.value}).then(()=>{k(!b)})},R=u=>{const C=U.duration(U().diff(U(u),"seconds"),"seconds");return`${C.$d.days}\u5929 ${C.$d.hours}\u65F6 ${C.$d.minutes}\u5206 ${C.$d.seconds}\u79D2`},_=(u,C)=>{C==""&&!["apiHost","oidcHost"].includes(u)||F.post("/setting",{key:u,val:C}).then(()=>{k(!b)})};return e(A,{children:m.apiPort?i("div",{className:"pt-8 pl-8",children:[i(D,{colon:!1,column:1,className:I["descriptions-box"],labelStyle:{width:"15%"},children:[e(D.Item,{label:"\u8FD0\u884C\u65F6\u957F:",children:R(U(E).format("YYYY-MM-DD HH:mm:ss"))}),i(D.Item,{label:"\u8BA4\u8BC1\u5668\u57DF\u540D:",className:"w-20",children:[a?e(S,{defaultValue:m.oidcHost,autoFocus:!0,style:{width:"300px",height:"24px",paddingLeft:"6px"},type:"text",onBlur:u=>{h(!a),_("oidcHost",u.target.value)}}):e("span",{children:m.oidcHost}),e(f,{type:"icon-bianji",className:"ml-2",onClick:()=>{h(!a)}})]}),i(D.Item,{label:"\u8BA4\u8BC1\u5668\u7AEF\u53E3:",className:"w-20",children:[o?e(S,{defaultValue:m.oidcPort,autoFocus:!0,style:{width:"300px",height:"24px",paddingLeft:"6px"},type:"text",onBlur:u=>{c(!o),_("oidcPort",u.target.value)}}):e("span",{children:m.oidcPort}),e(f,{type:"icon-bianji",className:"ml-2",onClick:()=>{c(!o)}})]}),i(D.Item,{label:"API\u57DF\u540D:",className:"w-20",children:[l?e(S,{defaultValue:m.apiHost,autoFocus:!0,style:{width:"300px",height:"24px",paddingLeft:"6px"},type:"text",onBlur:u=>{t(!l),_("apiHost",u.target.value)}}):e("span",{children:m.apiHost}),e(f,{type:"icon-bianji",className:"ml-2",onClick:()=>{t(!l)}})]}),i(D.Item,{label:"API\u7AEF\u53E3:",className:"w-20",children:[n?e(S,{defaultValue:m.apiPort,autoFocus:!0,style:{width:"300px",height:"24px",paddingLeft:"6px"},type:"text",onBlur:u=>{s(!n),_("apiPort",u.target.value)}}):e("span",{children:m.apiPort}),e(f,{type:"icon-bianji",className:"ml-2",onClick:()=>{s(!n)}})]}),i(D.Item,{label:"\u4E2D\u95F4\u4EF6\u7AEF\u53E3:",children:[d?e(S,{defaultValue:m.middlewarePort,autoFocus:!0,type:"text",style:{width:"300px",height:"24px",paddingLeft:"6px"},onBlur:u=>{y(!d),_("middlewarePort",u.target.value)}}):e("span",{children:m.middlewarePort}),e(f,{type:"icon-bianji",className:"ml-2",onClick:()=>{y(!d)}})]}),e(D.Item,{label:"\u65E5\u5FD7\u6C34\u5E73:",children:i(O.Group,{value:m.logLevel,onChange:u=>{L(u,"logLevel")},children:[e(O,{value:"1",className:"mr-15 ",children:"info"}),e(O,{value:"2",className:"mr-15",children:"debug"}),e(O,{value:"3",children:" error "})]})}),e(D.Item,{label:"\u5F00\u53D1\u73AF\u5883",children:i(O.Group,{value:m.devSwitch,onChange:u=>{L(u,"devSwitch")},children:[e(O,{value:!0,className:"mr-15",children:"\u5F00\u53D1\u73AF\u5883"}),e(O,{value:!1,children:"\u751F\u4EA7\u73AF\u5883"})]})}),e(D.Item,{label:"\u8C03\u8BD5:",children:e(J,{onChange:u=>{F.post("/setting",{key:"debugSwitch",val:u}).then(()=>{k(!b)})},defaultChecked:m.debugSwitch,className:I["switch-edit-btn"],size:"small"})}),m.devSwitch?null:e(D.Item,{label:"\u5F3A\u5236\u8DF3\u8F6C:",children:e(J,{checked:m.forcedJumpSwitch,className:I["switch-edit-btn"],size:"small",onChange:u=>{F.post("/setting",{key:"forcedJumpSwitch",val:u}).then(()=>{k(!b)})}})})]}),e("div",{className:"w-2/3",children:e(de,{message:"\u4FEE\u6539\u8BBE\u7F6E\u540E\uFF0C\u8BF7\u91CD\u65B0\u7F16\u8BD1",type:"warning",showIcon:!0})})]}):null})}function Ke(){const[l,t]=x({});return p.exports.useEffect(()=>{async function n(){const s=await F.get("/setting/versionConfig");t(s)}n()},[]),e(A,{children:e("div",{className:"pl-8 pt-6 bg-white h-full",children:i(D,{column:1,size:"small",className:I["descriptions-box"],labelStyle:{width:"15%"},children:[e(D.Item,{label:"\u7248\u672C",children:i("div",{className:"flex items-center",children:[l.versionNum?e("div",{children:l.versionNum}):e("div",{className:"w-50px h-22px",children:" "}),e("div",{className:I["check-info"],children:"\u67E5\u770B\u66F4\u65B0\u65E5\u5FD7"})]})}),e(D.Item,{label:"prisma\u7248\u672C",children:l.prismaVersion}),e(D.Item,{label:"\u7248\u6743",children:l.copyright})]})})})}function Xe({showType:l}){const[t,n]=x(""),[s,a]=x("");return p.exports.useEffect(()=>{switch(l){case"colorTheme":a("\u5916\u89C2"),n(e(Re,{}));break;case"system":a("\u7CFB\u7EDF"),n(e(Je,{}));break;case"secure":a("\u5B89\u5168"),n(e(Ue,{}));break;case"cors":a("\u8DE8\u57DF"),n(e($e,{}));break;case"path":a("\u73AF\u5883\u53D8\u91CF"),n(e(ze,{}));break;case"version":a("\u7248\u672C"),n(e(Ke,{}));break;default:n(e("div",{children:"error"}));break}},[l]),e(A,{children:t})}function et({handleToggleDesigner:l,settingType:t,active:n}){return i("div",{className:Le("flex pl-4 h-9 items-center mb-1 cursor-pointer",{"bg-[rgba(95,98,105,0.1)] rounded-4px":n}),onClick:()=>{l(t)},children:[e("div",{className:"mr-4 text-[16px]",children:t.icon}),e("div",{className:I["item-label"],children:t.name})]})}const oe=[{name:"\u5916\u89C2",type:"colorTheme",icon:e(f,{type:"icon-waiguan"})},{name:"\u7CFB\u7EDF",type:"system",icon:e(f,{type:"icon-xitong"})},{name:"\u5B89\u5168",type:"secure",icon:e(f,{type:"icon-anquan"})},{name:"\u8DE8\u57DF",type:"cors",icon:e(f,{type:"icon-kuayu"})},{name:"\u73AF\u5883\u53D8\u91CF",type:"path",icon:e(f,{type:"icon-huanjingbianliang"})},{name:"\u7248\u672C",type:"version",icon:e(f,{type:"icon-banben"})}];function tt({handleToggleDesigner:l,showType:t}){return p.exports.useEffect(()=>{l(oe[0])},[]),e("div",{className:"bg-[#f8f8f8] h-full pt-5.5 px-4",children:oe.map(n=>e(et,{active:t===n.type,handleToggleDesigner:l,settingType:n},n.type))})}function tn(){const{setFullscreen:l}=p.exports.useContext(Te),[t,n]=x("data");p.exports.useEffect(()=>{l(!0)},[]);function s(a){n(a.type)}return i("div",{className:"flex flex-col h-full",children:[i("div",{className:"flex-0 h-56px bg-white flex items-center pl-8",style:{border:"1px solid rgba(95,98,105,0.1)"},children:[e("img",{alt:"\u8BBE\u7F6E",src:"/assets/workbench/header-setting.png",className:"w-4 h-4 mr-2"}),e("span",{className:"text-default font-medium",children:"\u8BBE\u7F6E"})]}),i("div",{className:"flex flex-1 min-h-0",children:[e(ie,{className:"w-188px flex-0",children:e(tt,{showType:t,handleToggleDesigner:s})}),e(ie,{className:"flex-1 min-w-0 h-full overflow-y-auto bg-white",children:e(Xe,{showType:t})})]})]})}export{tn as default};
