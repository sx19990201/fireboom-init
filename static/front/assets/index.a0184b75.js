import{r as u,a as r,A as Ye,g as he,n as q,aa as fe,j as f,F as R,a9 as k,a3 as Ze,aw as xt}from"./index.bb86fbbf.js";import{B as wt}from"./button.aa0bb50b.js";import{D as ne}from"./index.80acc5c7.js";import{I as Q}from"./index.837f2673.js";import"./index.61964446.js";import{M as we}from"./index.bb824a09.js";/* empty css               *//* empty css               */import{S as J}from"./index.445b6a21.js";import{T as Ct,F as Ft,a as bt,b as St}from"./Tree.4ceb5bc3.js";import{M as et,D as tt}from"./index.c0722274.js";import{P as rt}from"./index.29ffa237.js";import{T as re}from"./styleChecker.d685456c.js";import{H as Nt}from"./Helmet.0418c866.js";import{i as V}from"./use-immer.module.c8467ba8.js";import{B as ze}from"./index.459a5958.js";import{D as Et}from"./iconUtil.02bc4596.js";import{T as Ce}from"./Table.134cf6cf.js";import"./index.9ea41163.js";import"./Pagination.4574862b.js";import"./index.11df8be1.js";import{S as Se}from"./index.4c04c22e.js";import{I as w}from"./index.34a54fb6.js";import{R as Be}from"./index.682dcb84.js";import{i as G,a as kt}from"./utils.c9742588.js";import{E as Ne}from"./404.4247b5cd.js";import{p as Ee}from"./parser.416ca819.js";import{a as At,p as Bt,b as Dt}from"./parameter.aff251c0.js";import{p as Ot}from"./printer.6dfbd086.js";import{l as nt}from"./Editor.6c4f1911.js";import{E as it}from"./index.db465a01.js";import{F as U}from"./index.2f0a4123.js";import"./row.b57345b2.js";import{D as De,a as Oe,b as at,s as Rt,c as Re,d as _t,e as Pt,f as $t}from"./datasource-reducer.65a5fa66.js";/* empty css              */import{C as ot}from"./index.4aaa6195.js";import{P as Mt}from"./PlusOutlined.c73517e2.js";import{E as It}from"./50x.88c69611.js";import{C as qt}from"./CaretRightOutlined.b47366d4.js";import{M as Tt}from"./MoreOutlined.b21a3a37.js";import"./omit.fd69d8d2.js";import"./type.4482a080.js";import"./context.24d2ae58.js";import"./Portal.a4c68d61.js";import"./_baseIsEqual.08bd8828.js";import"./statusUtils.077f8a48.js";import"./EyeOutlined.7a3a19f7.js";import"./SearchOutlined.7a88f9ff.js";import"./DialogWrap.ab5d7a46.js";import"./PortalWrapper.eb4c9ec4.js";import"./pickAttrs.38f17648.js";import"./conductUtil.03254829.js";import"./RightOutlined.93d63f13.js";import"./Dropdown.6fe64b76.js";import"./Overflow.7a0e3cac.js";import"./Sider.d20f3d2a.js";import"./index.86464724.js";import"./index.10921ee9.js";import"./css.7dd30b7b.js";import"./useForceUpdate.c2f36fab.js";import"./DoubleRightOutlined.3d4f0e16.js";import"./responsiveObserve.57a0a6d3.js";import"./isSymbol.5f361b44.js";import"./SearchOutlined.5704e58e.js";import"./index.da25c8fe.js";import"./source.c7b92d0a.js";import"./state-local.735e622b.js";import"./workbenchContext.3d2abc29.js";/* empty css               */import"./index.2ab34b44.js";import"./index.6d8ed736.js";import"./dayjs.min.bdeb7890.js";import"./index.f3604e26.js";import"./index.d80e831a.js";import"./index.4a2fd767.js";import"./PaperClipOutlined.9913305c.js";import"./DeleteOutlined.71bf1760.js";var zt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"}}]},name:"edit",theme:"outlined"};const jt=zt;var st=function(t,n){return r(Ye,{...he(he({},t),{},{ref:n,icon:jt})})};st.displayName="EditOutlined";const Ut=u.exports.forwardRef(st);var Vt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM544 472c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v108H372c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h108v108c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V644h108c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V472z"}}]},name:"file-add",theme:"outlined"};const Lt=Vt;var lt=function(t,n){return r(Ye,{...he(he({},t),{},{ref:n,icon:Lt})})};lt.displayName="FileAddOutlined";const Gt=u.exports.forwardRef(lt),je=(e,t)=>G(t)?`@${e}`:`@${e}(${t.map(n=>n.rendered).join(`
`)})`;function Ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,i)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ue(Object(n),!0).forEach(function(i){E(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ue(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function ie(e){return ie=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ie(e)}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kt(e){return Wt(e)||Ht(e)||ut(e)||Qt()}function Wt(e){if(Array.isArray(e))return e}function Ht(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ut(e,t){if(!!e){if(typeof e=="string")return Ve(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ve(e,t)}}function Ve(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Qt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ut(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var i=0,s=function(){};return{s,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(c){throw c},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,o=!1,l;return{s:function(){n=n.call(e)},n:function(){var c=n.next();return a=c.done,c},e:function(c){o=!0,l=c},f:function(){try{!a&&n.return!=null&&n.return()}finally{if(o)throw l}}}}var Jt=function(e){return{get:function(n){return!n[e]&&typeof n.get=="function"?n.get(e):n[e]},mod:function(n){return function(i){var s,a,o,l=arguments;return function(){for(s=l.length,a=new Array(s>1?s-1:0),o=1;o<s;o++)a[o-1]=l[o];return typeof i.set=="function"?i.set(e,n(i[e]||i.get(e))):Array.isArray(i)?i.slice(0,e).concat(n.apply(void 0,[i[e]].concat(a))).concat(i.slice(e+1)):ke(ke({},i),{},E({},e,n.apply(void 0,[i[e]].concat(a))))}()}},traversal:!1}},ae=function(t){return t?typeof t.keys=="function"?t.keys():Object.keys(t):[]},Xt=function(t){switch(t){case Map:return function(n,i,s){return n.set(i,s),n};case Set:return function(n,i,s){return n.add(s)};case Object:return function(n,i,s){return n[i]=s,n}}},Yt=function(t){switch(t){case Map:return function(n,i){return n.get(i)};case Set:return function(n,i){return i};case Object:return function(n,i){return n[i]}}},oe=function(t){var n=t.native,i=t.overrides;return function(s){for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return function(c){var p=pt(s);if(typeof c>"u"||c===null)return c;if(typeof c[n]=="function")return c[n].apply(c,[p].concat(o));var h=Object.getPrototypeOf(c).constructor,v=i[h];if(v)return v(h,Yt(h),Xt(h)).apply(void 0,[c,p].concat(o))}}};(function(){var e,t=function(i,s,a){return function(o,l){var c=new i,p=X(ae(o)),h;try{for(p.s();!(h=p.n()).done;){var v=h.value,C=s(o,v);l(C,v)&&a(c,v,C)}}catch(g){p.e(g)}finally{p.f()}return c}};return oe({native:"filter",overrides:(e={},E(e,Object,t),E(e,Map,t),E(e,Set,t),e)})})();var _e=function(){var e,t=function(i,s,a){return function(o,l){var c=new i,p=X(ae(o)),h;try{for(p.s();!(h=p.n()).done;){var v=h.value;a(c,v,l(s(o,v),v))}}catch(C){p.e(C)}finally{p.f()}return c}};return oe({native:"map",overrides:(e={},E(e,Object,t),E(e,Map,t),E(e,Set,t),E(e,Promise,function(){return function(n,i){return n.then(i)}}),e)})}();(function(){var e,t=function(i,s,a){return function(o,l){var c;if(!o)return c;var p=X(ae(o)),h;try{for(p.s();!(h=p.n()).done;){var v=h.value,C=s(o,v);if(l(C,v))return C}}catch(g){p.e(g)}finally{p.f()}}};return oe({native:"find",overrides:(e={},E(e,Object,t),E(e,Map,t),E(e,Set,t),e)})})();(function(){var e,t=function(i,s,a){return function(o,l){var c=X(ae(o)),p;try{for(c.s();!(p=c.n()).done;){var h=p.value;if(l(s(o,h),h))return!0}}catch(v){c.e(v)}finally{c.f()}return!1}};return oe({native:"some",overrides:(e={},E(e,Object,t),E(e,Map,t),E(e,Set,t),e)})})();var Le=function(){var e,t=function(i,s,a){return function(o,l,c){var p=new i,h=X(ae(o)),v;try{for(h.s();!(v=h.n()).done;){var C=v.value;l(p,s(o,C),C)}}catch(g){h.e(g)}finally{h.f()}return c}};return oe({native:"reduce",overrides:(e={},E(e,Object,t),E(e,Map,t),E(e,Set,t),e)})}(),Zt=function(t){var n=X(t),i;try{for(n.s();!(i=n.n()).done;){var s=i.value;if(!s)return!1}}catch(a){n.e(a)}finally{n.f()}return!0},me=function(t){return["string","number"].includes(ie(t))?Jt(t):ke({traversal:!1,optional:!1},t)},ct=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===1?me(t[0]):{get:function(s){return t.map(me).reduce(function(a,o){var l=a.traverser,c=a.state,p=a.shortCircuited,h=p?null:l(o.get)(c);return{state:h,traverser:o.traversal?function(v){return _e(l(v))}:l,shortCircuited:p||o.optional&&h==null}},{state:s,traverser:function(o){return o},shortCircuited:!1}).state},mod:function(s){return function(a){for(var o,l=arguments.length,c=new Array(l>1?l-1:0),p=1;p<l;p++)c[p-1]=arguments[p];return o=function h(v,C){var g,S,y;return g=Kt(C),S=g[0],y=g.slice(1),y.length===0?S.mod(s).apply(void 0,[v].concat(c)):S.mod(function($){return h($,y)}).apply(void 0,[v].concat(c))},o(a,t.map(me))}}}},Pe=function(){return ct.apply(void 0,arguments).get},er=function e(t){return function(n){return t&&ie(t)==="object"?!!n&&Zt(Object.keys(t).map(function(i){return e(Pe(i)(t))(tr(i)(n))})):typeof t=="function"?t(n):t===n}},tr=function(t){return function(n){var i;return i=Pe(t)(n),typeof i=="function"?i.bind(n):i}},pt=function(t){return typeof t=="function"?t:ie(t)==="object"?er(t):Pe(t)},rr=function(t){return t},$e=function(t){return function(n){var i=pt(n);return function(s,a){return t(s,a,i)}}},nr=$e(function(e,t,n){return n(t)>n(e)?t:e}),ir=$e(function(e,t,n){return n(t)<n(e)?t:e}),ar=$e(function(e,t,n){return n(e)?e:n(t)?t:null}),Fe=function(){return ct.apply(void 0,arguments).mod},Ge=function(){return{get:rr,mod:_e,traversal:!0}};Object.assign(Ge,Ge());var Me=function(t){return t.of=t,t},Ie=function(t){return function(n){return me({get:Le(t(n)),mod:function(s){return function(a){var o=Le(t(n))(a);return _e(function(l){return l===o?s(l):l})(a)}}})}},be=Me(Ie(ar));Me(Ie(nr));Me(Ie(ir));const or="_label_2z63k_1",sr="_caption_2z63k_5",lr="_content_2z63k_12",de={label:or,caption:sr,content:lr},{Option:Ke}=Se,ur=[{title:"\u8BF7\u6C42\u53C2\u6570",key:"0"},{title:"\u6CE8\u5165\u53C2\u6570",key:"1"}],cr=[{title:"\u5B57\u6BB5\u540D\u79F0",dataIndex:"fieldName"},{title:"\u5B57\u6BB5\u7C7B\u578B",dataIndex:"fieldType",render:e=>r("div",{children:e.isList?f("span",{className:"text-[#04B582]",children:["List",r("span",{className:"text-[#000000A6]",children:`<${e.type}>`})]}):e.isScalar?r("span",{className:"text-[#E66B83]",children:e.type}):f("span",{className:"text-[#177FFF]",children:["Object",r("span",{className:"text-[#000000A6]",children:`<${e.type}>`})]})})}],pr=[{title:"\u53C2\u6570\u540D",dataIndex:"name"},{title:"\u4F4D\u7F6E",dataIndex:"position"},{title:"\u7C7B\u578B",dataIndex:"type"},{title:"\u5FC5\u987B",dataIndex:"isRequired",render:e=>r("div",{children:e?"\u662F":"\u5426"})},{title:"jsonSchema",dataIndex:"jsonSchema"},{title:"\u5907\u6CE8",dataIndex:"remark"}],dr=[{title:"\u53C2\u6570\u540D",dataIndex:"name"},{title:"\u7C7B\u578B",dataIndex:"type"},{title:"\u6765\u6E90",dataIndex:"source"}],fr=[{key:"requireMatchAll",label:"requireMatchAll"},{key:"requireMatchAny",label:"requireMatchAny"},{key:"denyMatchAll",label:"denyMatchAll"},{key:"denyMatchAny",label:"denyMatchAny"}],mr=({nodeId:e})=>{var j;const[t,n]=u.exports.useState(void 0),[i,s]=u.exports.useState(void 0),[a,o]=u.exports.useState(),[l,c]=u.exports.useState([]),[p,h]=u.exports.useState([]),[v,C]=u.exports.useState("0"),[g,S]=u.exports.useState(!1),[y,$]=u.exports.useState(),[M,L]=u.exports.useState(),[x,se]=u.exports.useState(),[T,Y]=u.exports.useState("requireMatchAll"),[I,F]=u.exports.useState();u.exports.useEffect(()=>{q("/operateApi/getGenerateSchema").then(d=>Ee(d,{noLocation:!0}).definitions).then(d=>s(d)).catch(d=>{throw d})},[]),u.exports.useEffect(()=>{F(y==null?void 0:y.value)},[y==null?void 0:y.value]),u.exports.useEffect(()=>{if(!e||e===0){o(void 0);return}Y("requireMatchAll"),F([]),q(`/operateApi/${e}`).then(d=>(o(d),d)).then(d=>Ee(d.content,{noLocation:!0}).definitions).then(d=>n(d)).catch(d=>{throw d}),q("/role").then(d=>d.map(b=>({key:b.code,label:b.code}))).then(d=>L(d))},[e]),u.exports.useEffect(()=>{var d,b;if(!(!t||!i))try{c(At(i,t[0])),h(Bt(t[0].variableDefinitions)),$(Dt((d=t.at(0))==null?void 0:d.directives)),se(((b=t==null?void 0:t.at(0))==null?void 0:b.operation)==="query"?"GET":"POST")}catch(N){fe.error("\u89E3\u6790\u5931\u8D25"),console.error(N);return}},[t,i]);const z=d=>d.map(b=>{var N,_,W;return G(b.directives)?{...b,directiveNames:[]}:{...b,source:b.directives.map(B=>je(B.name,B.args)).join(", "),directiveNames:b.directives.map(B=>B.name),jsonSchema:(W=(_=(N=b.directives)==null?void 0:N.find(B=>B.name==="jsonSchema"))==null?void 0:_.payload)==null?void 0:W.join(", "),remark:b.directives.filter(B=>!["jsonSchema"].includes(B.name)).map(B=>je(B.name,B.args)).join(", ")}}),ve=d=>{const b=["hooksVariable","jsonSchema"];return d.filter(N=>N.directiveNames.length===0||N.directiveNames.filter(_=>b.includes(_)).length!==0)},Z=d=>{const b=["internal","fromClaim","injectCurrentDateTime","injectEnvironmentVariable","injectGeneratedUUID"];return d.filter(N=>N.directiveNames.length!==0).filter(N=>N.directiveNames.filter(_=>b.includes(_)).length!==0)},K=d=>{var b;return!d||d.length===0?!1:(b=d[0].directiveNames)==null?void 0:b.includes("internalOperation")};function le(d){k.put(`/operateApi/${a.id}`,{...a,remark:d}).then(b=>o(b)),S(!1)}function ge(d){Y(d),te(d,I!=null?I:[])}function ee(d){F(d),te(T!=null?T:"",d)}function te(d,b){var ue,ce;const N=JSON.parse(JSON.stringify(t[0])),_=(ce=(ue=N.directives)==null?void 0:ue.find(D=>D.name.value==="rbac"))!=null?ce:{kind:"Directive",name:{kind:"Name",value:"rbac"},arguments:[{kind:"Argument",name:{kind:"Name",value:""},value:{kind:"ListValue",values:[]}}]};G(N.directives)&&(N.directives=[_]);const W=Fe("arguments",be(D=>D.name.kind==="Name"),"name","value")(D=>d)(_),B=Fe("arguments",be(D=>D.name.kind==="Name"),"value","values")(D=>b.map(xe=>({kind:"EnumValue",value:xe})))(W),ye=Fe("directives",be(D=>D.name.value==="rbac"))(D=>B)(N);if(d||T||(y==null?void 0:y.key)){const D=Ot(ye);k.put(`/operateApi/content/${a.id}`,{content:D})}}return!a||a.isDir?r(Ne,{}):f(R,{children:[f("div",{className:"flex items-center",children:[f("div",{className:"flex items-center flex-shrink-0 space-x-1",children:[g?r(Q,{placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8",size:"small",defaultValue:a.remark||a.title,onPressEnter:d=>le(d.target.value),onKeyUp:d=>d.key=="Escape"&&S(!1),onBlur:()=>S(!1)}):r("span",{className:"text-12px  text-[#5F6269] leading-17px",children:a.remark||"\u6682\u65E0\u5907\u6CE8"}),r(Ut,{onClick:()=>S(!g)})]}),f("div",{className:"flex items-center flex-1",children:[f("div",{className:"flex items-center space-x-1 ml-4",children:[r("span",{className:"text-[#AFB0B4]",children:a.id}),r(w,{type:"icon-fuzhi",className:"text-[#AFB0B4]",onClick:()=>void navigator.clipboard.writeText(`${a.id}`)})]}),r("div",{className:"flex items-center space-x-1 ml-7",children:K(l)?f(R,{children:[r(ze,{status:"error"}),r("span",{className:"text-[#000000D9] leading-20px",children:"\u975E\u516C\u5F00"})]}):f(R,{children:[r(ze,{status:"success",color:"#1BDD8A"}),r("span",{className:"text-[#000000D9] leading-20px",children:"\u516C\u5F00"})]})})]})]}),K(l)?r(R,{}):f(R,{children:[f("div",{className:"mt-4 flex items-center",children:[r("span",{className:`text-[#5F6269] ${de.label}`,children:x}),r("span",{className:"flex-1 text-[#000000D9]",children:(j=a==null?void 0:a.path)!=null?j:""})]}),f("div",{className:"mt-4 flex items-center",children:[r("span",{className:`text-[#5F6269] ${de.label}`,children:"\u7528\u6237\u89D2\u8272"}),f("div",{className:"flex-1 flex items-center",children:[r(Se,{className:"w-160px",value:T||(y==null?void 0:y.key)||"requireMatchAll",onChange:d=>ge(d),children:fr.map(d=>r(Ke,{value:d.label,children:d.key},d.key))}),r(Se,{className:"flex-1",mode:"multiple",value:I!=null?I:y==null?void 0:y.value,onChange:d=>ee(d),placeholder:"\u6682\u65E0\u89D2\u8272",children:M?M.map(d=>r(Ke,{value:d.label,children:d.key},d.key)):[]})]})]})]}),f("div",{className:"mt-42px",children:[r(Be,{tabs:ur,onTabClick:C,activeKey:v}),v==="0"?r(Ce,{size:"middle",className:"mt-6",columns:pr,dataSource:ve(z(p)),pagination:!1}):r(Ce,{size:"middle",className:"mt-6",columns:dr,dataSource:Z(z(p)),pagination:!1})]}),f("div",{className:"my-10.5",children:[r("div",{className:"text-[#5F6269] leading-22px text-16px",children:"\u8FD4\u56DE\u54CD\u5E94"}),f("div",{className:"mt-3",children:[r("span",{className:de.caption,children:"\u6210\u529F\uFF08201\uFF09"}),f("div",{className:`${de.content}`,children:[f("div",{className:"leading-20px text-[#5F6269]",children:[r("span",{children:"HTTP \u72B6\u6001\u7801\uFF1A201"}),r("span",{className:"ml-82px",children:"\u5185\u5BB9\u683C\u5F0F\uFF1AJSON"})]}),r(Ce,{size:"middle",className:"mt-6",rowClassName:"text-[#000000A6]",columns:cr,dataSource:l,pagination:!1,defaultExpandAllRows:!0,expandable:{defaultExpandAllRows:!0}})]})]})]})]})},hr="_monaco_z5qeb_1",vr={monaco:hr};nt.config({paths:{vs:"/modules/monaco-editor/min/vs"}});const We={preResolve:`// import type { User } from "../../../wundergraph/.wundergraph/generated/wundergraph.server"
// import type { InternalClient } from "../../../wundergraph/.wundergraph/generated/wundergraph.internal.client"
// import type { Context } from "@wundergraph/sdk"

// export default preResolveHook(ctx: Context<User, InternalClient>) {
//     console.log('hello')
//     return
// }`,postResolve:`// import type { User } from "../../../wundergraph/.wundergraph/generated/wundergraph.server"
// import type { InternalClient } from "../../../wundergraph/.wundergraph/generated/wundergraph.internal.client"
// import type { Context } from "@wundergraph/sdk"

// export default postResolveHook(ctx: Context<User, InternalClient>) {
//     console.log('hello')
//     return
// }`,customResolve:`// import type { User } from "../../../wundergraph/.wundergraph/generated/wundergraph.server"
// import type { InternalClient } from "../../../wundergraph/.wundergraph/generated/wundergraph.internal.client"
// import type { Context } from "@wundergraph/sdk"

// export default customResolveHook(ctx: Context<User, InternalClient>) {
//     console.log('hello')
//     return
// }`,mutatingPreResolve:`// import type { User } from "../../../wundergraph/.wundergraph/generated/wundergraph.server"
// import type { InternalClient } from "../../../wundergraph/.wundergraph/generated/wundergraph.internal.client"
// import type { Context } from "@wundergraph/sdk"

// export default mutatingPreResolveHook(ctx: Context<User, InternalClient>) {
//     console.log('hello')
//     return
// }`,mutatingPostResolve:`// import type { User } from "../../../wundergraph/.wundergraph/generated/wundergraph.server"
// import type { InternalClient } from "../../../wundergraph/.wundergraph/generated/wundergraph.internal.client"
// import type { Context } from "@wundergraph/sdk"

// export default mutatingPostResolveHook(ctx: Context<User, InternalClient>) {
//     console.log('hello')
//     return
// }`,onRequest:`// import type {WunderGraphRequest,WunderGraphResponse, WunderGraphRequestContext} from "../../../wundergraph/node_modules/@wundergraph/sdk";
// import type {User} from "../../../wundergraph/.wundergraph/generated/wundergraph.server";

// export default async function (ctx: WunderGraphRequestContext<User>, request: WunderGraphRequest) {
//   console.log('onOriginRequest', request.headers)
//   return request
// }`,onResponse:`// import type {WunderGraphRequest,WunderGraphResponse, WunderGraphRequestContext} from "../../../wundergraph/node_modules/@wundergraph/sdk";
// import type {User} from "../../../wundergraph/.wundergraph/generated/wundergraph.server";

// export default async function (ctx: WunderGraphRequestContext<User>, request: WunderGraphResponse) {
//   console.log('onOriginRequest', request.headers)
//   return request
// }`},He=({node:e})=>{const[t,n]=u.exports.useState((e==null?void 0:e.id)===0?"onRequest":"preResolve"),[i,s]=V([]),[a,o]=u.exports.useState([]),[l,c]=u.exports.useState();u.exports.useEffect(()=>{if(!e)return;const g=e.id===0?"/operateApi/hooks":`/operateApi/hooks/${e.id}`;q(g).then(S=>s(S)).catch(S=>{throw S})},[e,l]),u.exports.useEffect(()=>{!i||o(i.map(g=>({key:g.hookName,title:g.hookName})))},[i]),u.exports.useEffect(()=>{G(a)||t||n(a[0].key)},[t,a]);const p=u.exports.useMemo(()=>i==null?void 0:i.find(g=>g.hookName===t),[t,i]),h=()=>{if(!e)return;const g=e.id===0?"/operateApi/hooks":`/operateApi/hooks/${e.id}`;k.put(g,{hookName:t,content:p==null?void 0:p.content,hookSwitch:p==null?void 0:p.hookSwitch}),c(!l)};function v(g){!g||s(S=>{let y=S.find($=>$.hookName===t);y||(y={content:"",fileName:"",hookName:t,hookSwitch:!1}),y.content=g})}function C(){if(!e)return;const g=e.id===0?"/operateApi/hooks":`/operateApi/hooks/${e.id}`;k.put(g,{hookName:t,hookSwitch:!(p!=null&&p.hookSwitch),content:p==null?void 0:p.content}),c(!l)}return f("div",{children:[r(Be,{tabs:a,onTabClick:n,activeKey:t}),f("div",{className:"mt-4",children:[f("div",{className:"flex justify-between items-center",children:[f("div",{className:"text-[#00000040] flex items-center",children:[r(Ze,{}),r("span",{className:"text-12px leading-17px ml-2",children:"\u4E3B\u8981\u7528\u4E8E\u65E5\u5FD7\u7B49\u526F\u4F5C\u7528\u64CD\u4F5C"})]}),f("div",{className:"space-x-4 flex items-center",children:[r("div",{className:"text-[#E92E5E] cursor-pointer",onClick:h,children:r("span",{className:"leading-20px ml-1",children:"\u4FDD\u5B58"})}),r(J,{onClick:C,checked:p==null?void 0:p.hookSwitch})]})]}),r(it,{height:"90vh",defaultLanguage:"typescript",defaultValue:We[t],value:(p==null?void 0:p.content)||We[t],onChange:g=>v(g),className:`mt-4 ${vr.monaco}`})]})]})},gr="_monaco_z5qeb_1",yr={monaco:gr};nt.config({paths:{vs:"/modules/monaco-editor/min/vs"}});const Qe=`// import type { User } from "../../../wundergraph/.wundergraph/generated/wundergraph.server"
// import type { InternalClient } from "../../../wundergraph/.wundergraph/generated/wundergraph.internal.client"
// import type { Context } from "@wundergraph/sdk"

// export default mock(ctx: Context<User, InternalClient>) {
//     console.log('hello')
//     return
// }`,xr=({node:e})=>{const[t,n]=u.exports.useState(),[i,s]=u.exports.useState();u.exports.useEffect(()=>{!e||q(`/operateApi/mock/${e.id}`).then(c=>n(c)).catch(c=>{throw c})},[e,i]);function a(c){var p;!c||n({content:c,mockSwitch:(p=t==null?void 0:t.mockSwitch)!=null?p:!1})}const o=()=>{!e||k.put(`/operateApi/mock/${e.id}`,{mockSwitch:t==null?void 0:t.mockSwitch,content:t==null?void 0:t.content}).then(()=>s(!i))};function l(){!e||k.put(`/operateApi/mock/${e.id}`,{mockSwitch:!(t!=null&&t.mockSwitch),content:t==null?void 0:t.content}).then(()=>s(!i))}return f(R,{children:[f("div",{className:"flex justify-between items-center",children:[f("div",{className:"text-[#00000040] flex items-center",children:[r(Ze,{}),r("span",{className:"text-12px leading-17px ml-2",children:"\u4E3B\u8981\u7528\u4E8E\u65E5\u5FD7\u7B49\u526F\u4F5C\u7528\u64CD\u4F5C"})]}),f("div",{className:"space-x-4 flex items-center",children:[r("div",{className:"text-[#E92E5E] cursor-pointer",onClick:o,children:r("span",{className:"leading-20px ml-1",children:"\u4FDD\u5B58"})}),r(J,{onClick:l,checked:t==null?void 0:t.mockSwitch})]})]}),r(it,{height:"90vh",defaultLanguage:"typescript",defaultValue:Qe,value:(t==null?void 0:t.content)||Qe,onChange:c=>a(c),className:`mt-4 ${yr.monaco}`})]})},Je=({node:e})=>{const[t,n]=u.exports.useState(),[i,s]=u.exports.useState(),[a,o]=u.exports.useState(),[l]=U.useForm(),c=u.exports.useMemo(()=>(e==null?void 0:e.id)===0?2:1,[e==null?void 0:e.id]);u.exports.useEffect(()=>{!t||l.resetFields()},[t]),u.exports.useEffect(()=>{!t||l.submit()},[a]),u.exports.useEffect(()=>{if(!e)return;const h=e.id===0?"/operateApi/setting":`/operateApi/setting/${e.id}`;q(h,{settingType:c}).then(v=>n(v)).catch(v=>{throw v})},[e,i,c]);function p(h){if(!e)return;const v={...h,cachingMaxAge:h.cachingMaxAge?+h.cachingMaxAge:0,cachingStaleWhileRevalidate:h.cachingStaleWhileRevalidate?+h.cachingStaleWhileRevalidate:0,liveQueryPollingIntervalSeconds:h.liveQueryPollingIntervalSeconds?+h.liveQueryPollingIntervalSeconds:0};n(v);const C=e.id===0?"/operateApi/setting":`/operateApi/setting/${e.id}`;k.put(C,{...v,settingType:c}).then(g=>s(!i))}return f(U,{form:l,name:"basic",labelCol:{span:4},wrapperCol:{span:16},initialValues:t,autoComplete:"off",labelAlign:"left",onFinish:p,children:[r(ne,{orientation:"left",orientationMargin:0,children:f("div",{className:"text-[#AFB0B4] text-14px space-x-1",children:[r(w,{type:"icon-shouquan"}),r("span",{children:"\u6388\u6743"})]})}),f(U.Item,{label:"\u9700\u8981\u6388\u6743",name:"authenticationRequired",valuePropName:"checked",rules:[{required:!1,message:"\u8BF7\u9009\u62E9"}],children:[r(J,{checked:t==null?void 0:t.authenticationRequired,onChange:()=>{n({...t,authenticationRequired:!(t!=null&&t.authenticationRequired)}),o(!a)}}),f("span",{className:"ml-26px text-[#00000040] text-12px inline-flex items-center ",children:[r(w,{type:"icon-zhuyi"}),r("span",{className:"ml-1",children:"\u5F00\u542F\u540E\uFF0C\u767B\u5F55\u540E\u624D\u80FD\u8BBF\u95EE"})]})]}),(e==null?void 0:e.operationType)!=="query"?r(R,{}):f(R,{children:[r(ne,{orientation:"left",orientationMargin:0,className:"mt-42px",children:f("div",{className:"text-[#AFB0B4] text-14px space-x-1",children:[r(w,{type:"icon-huancun"}),r("span",{children:"\u7F13\u5B58"})]})}),r(U.Item,{label:"\u5F00\u542F\u7F13\u5B58",name:"cachingEnable",valuePropName:"checked",rules:[{required:!1,message:"Please input your password!"}],children:r(J,{onChange:()=>o(!a)})}),r(U.Item,{label:"\u6700\u5927\u65F6\u957F",name:"cachingMaxAge",rules:[{required:!1,message:"Please input your password!"}],children:r(Q,{suffix:"\u79D2",onBlur:()=>o(!a)})}),r(U.Item,{label:"\u91CD\u6821\u9A8C\u65F6\u957F",name:"cachingStaleWhileRevalidate",rules:[{required:!1,message:"Please input your password!"}],children:r(Q,{suffix:"\u79D2",onBlur:()=>o(!a)})}),r(ne,{orientation:"left",orientationMargin:0,className:"mt-42px",children:f("div",{className:"text-[#AFB0B4] text-14px space-x-1",children:[r(w,{type:"icon-shishi"}),r("span",{children:"\u5B9E\u65F6"})]})}),r(U.Item,{label:"\u5F00\u542F\u5B9E\u65F6",name:"liveQueryEnable",valuePropName:"checked",rules:[{required:!1,message:"Please input your password!"}],children:r(J,{onChange:()=>o(!a)})}),r(U.Item,{label:"\u8F6E\u8BE2\u95F4\u9694",name:"liveQueryPollingIntervalSeconds",rules:[{required:!1,message:"Please input your password!"}],children:r(Q,{suffix:"\u79D2",onBlur:()=>o(!a)})})]})]})};function wr({datasourceItem:e,onClickItem:t}){var M,L;const n=u.exports.useContext(De),[i,s]=V(e.name==""),[a,o]=V(!1),{handleToggleDesigner:l}=u.exports.useContext(Oe),{currDBId:c}=u.exports.useContext(at),[p,h]=V(!1),v=e.config,C=x=>{x.domEvent.stopPropagation(),(x.key==="1"||x.key==="2")&&o(!1)};async function g(x){x===""?n({type:"deleted",data:e}):(await k.put("/dataSource",{...e,name:x,config:{...v,apiNameSpace:x}}),k.get("/dataSource").then(se=>{n({type:"fetched",data:se})})),s(!1)}async function S(x){await k.delete(`/dataSource/${x.id}`),n({type:"deleted",data:x})}function y(x){x==!1&&(h(!1),o(!1))}const $=r(et,{onClick:C,items:[{key:"1",label:f("div",{onClick:()=>s(!i),children:[r(w,{type:"icon-zhongmingming"}),r("span",{className:"ml-1.5",children:"\u91CD\u547D\u540D"})]})},{key:"2",label:f("div",{onClick:()=>l("form",e.id),children:[r(w,{type:"icon-bianji"}),r("span",{className:"ml-1.5",children:"\u7F16\u8F91"})]})},{key:"3",label:r(rt,{placement:"right",title:"\u786E\u8BA4\u5220\u9664\u8BE5\u5B9E\u4F53\u5417\uFF1F",onConfirm:()=>void S(e),okText:"\u5220\u9664",cancelText:"\u53D6\u6D88",onCancel:()=>o(!1),overlayClassName:Rt["delete-label"],okType:"danger",children:f("div",{children:[r(w,{type:"icon-a-shanchu2"}),r("span",{className:"ml-1.5",children:"\u5220\u9664"})]})})}]});return f("div",{className:`flex justify-between items-center py-2.5 pl-5 cursor-pointer
      ${e.id===c?"bg-[#F8F8F9]":""}`,style:p?{background:"#F8F8F9"}:{},onMouseEnter:()=>h(!0),onMouseLeave:()=>y(a),onDoubleClick:()=>s(!0),onClick:()=>t(e),children:[f("div",{className:"flex items-center cursor-pointer",children:[r(w,{type:"icon-tuozhuai-xuanzhong",className:"-ml-3 mr-1",style:{visibility:p?"visible":"hidden"}}),e.sourceType==1?r(w,{type:v.dbType=="SQLite"?"icon-shujuyuantubiao2":v.dbType=="PostgreSQL"?"icon-shujuyuantubiao3":v.dbType=="MongoDB"?"icon-shujuyuantubiao4":"icon-shujuyuantubiao1"}):e.sourceType==2?r(w,{type:"icon-wenjian1",className:"text-[16px]"}):e.sourceType==3?r(w,{type:"icon-QLweixuanzhong1",className:"text-[16px]"}):r(w,{type:"icon-wenjian",className:"text-[16px]"}),i?r(Q,{onBlur:x=>void g(x.target.value),onPressEnter:x=>void g(x.target.value),onKeyUp:x=>{x.key=="Escape"&&s(!1)},className:"text-sm font-normal leading-4 h-5 w-5/7",defaultValue:e.name,autoFocus:!0,placeholder:"\u8BF7\u8F93\u5165\u5916\u90E8\u6570\u636E\u6E90\u540D"}):r("div",{className:`text-sm font-normal ml-2 leading-4 ${e.switch==0?"text-[#000000]":"text-[#AFB0B4]"} ${e.id===c?"font-650":""}`,children:e.name})]}),f("div",{children:[r("span",{className:"text-[#AFB0B4] text-[14px] mr-3",children:v.dbName||((L=v.databaseUrl)==null?void 0:L.val.substring(((M=v.databaseUrl)==null?void 0:M.val.length)-3))}),r(tt,{overlay:$,trigger:["click"],placement:"bottomRight",open:a,onOpenChange:x=>{o(x),y(x)},children:r(w,{type:"icon-gengduo-shu-xuanzhong",onClick:x=>x.stopPropagation(),className:"m-auto mr-0 pr-2",style:{visibility:p?"visible":"hidden"}})})]})]},e.name)}const{Panel:Cr}=ot;function Fr({onClickItem:e}){const t=u.exports.useContext(Re);return r(R,{children:t.map(n=>{if(n.name!="")return r(wr,{datasourceItem:n,onClickItem:e},n.id)})})}function br({onClickItem:e}){u.exports.useContext(De),u.exports.useContext(Re);const{handleToggleDesigner:t}=u.exports.useContext(Oe),[n,i]=u.exports.useState(!1);function s(o){o.stopPropagation(),t("db-select")}const a=f("div",{className:"flex justify-between items-center",onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[r("div",{className:"w-52 flex justify-between py-2",children:"\u5916\u90E8\u6570\u636E\u6E90"}),r("div",{className:n?"block":"hidden",children:r(Mt,{onClick:s})})]});return r(R,{children:r("div",{className:_t["datasource-collapse"],children:r(ot,{ghost:!0,bordered:!0,children:r(Cr,{header:a,children:r(Fr,{onClickItem:e})},1)})})})}const Sr="_divider_1yzna_16",Nr="_symbol_1yzna_56",H={"api-manage":"_api-manage_1yzna_1",divider:Sr,"col-left":"_col-left_1yzna_22","datasource-container":"_datasource-container_1yzna_33","my-button":"_my-button_1yzna_37","tree-item":"_tree-item_1yzna_56",symbol:Nr},Er=[{title:"\u8BE6\u60C5",key:"0"},{title:"Mock",key:"1"},{title:"\u94A9\u5B50",key:"2"},{title:"\u8BBE\u7F6E",key:"3"}];function Ae(e,t="0"){return e?e.map((n,i)=>({...n,key:`${t}-${i}`,title:n.path.split("/")[n.path.split("/").length-1],baseDir:n.path.split("/").slice(0,-1).join("/"),currDir:n.isDir?n.path:n.path.split("/").slice(0,-1).join("/"),children:Ae(n.children,`${t}-${i}`)})):[]}function kr(e){let t;const n=i=>{!i||i.find(s=>{var a;return s.title===""?(t=s,s):n((a=s.children)!=null?a:void 0)})};return n(e),t}function Xe(e,t){let n;const i=(s,a)=>{!a||a.find(o=>{var l;return o.key===s?(n=o,o):i(s,(l=o.children)!=null?l:void 0)})};return i(e,t),n}function Ar(e,t){let n,i;const s=(a,o)=>{if(!o)return[];n=void 0,o.find(l=>{var c;return l.key===a?(i=l,[n,i]):(G(l.children)||(n=l),s(a,(c=l.children)!=null?c:void 0))})};return s(e,t),n=i?n:void 0,{parent:n,curr:i}}function Br(e,t){return e.isDir?k.put("/operateApi/dir",{oldPath:`${e.path}`,newPath:`${e.baseDir}/${t}`}):k.put(`/operateApi/${e.id}`,{...e,path:`${e.baseDir}/${t}`})}function Dr(e){return e.isDir?k.delete("/operateApi/dir",{data:{path:e.path}}):k.delete(`/operateApi/${e.id}`)}function Or(e,t,n){if(e.isDir)return k.post("/operateApi/dir",{path:`${e.baseDir}/${t}`});{const i=Ee(n,{noLocation:!0}).definitions[0];return k.post("/operateApi",{path:`${e.baseDir}/${t}`,content:n,operationType:i.operation})}}const ri=()=>{var qe;const[e,t]=u.exports.useState(null),[n,i]=u.exports.useState([]),[s,a]=u.exports.useState(""),[o,l]=u.exports.useState(null),[c,p]=u.exports.useState(""),[h,v]=u.exports.useState("0"),[C,g]=u.exports.useState(),[S,y]=u.exports.useState(!1),[$,M]=u.exports.useState(!1),[L,x]=u.exports.useState(!1),[se,T]=u.exports.useState(),[Y,I]=u.exports.useState(!1),F=u.exports.useMemo(()=>Xe(s,n),[s,n]),z=u.exports.useMemo(()=>o?Xe(o,n):null,[o,n]),[ve,Z]=V(!1),[K,le]=u.exports.useReducer(Pt,[]),[ge,ee]=V("detail"),[te,j]=V(null),[d,b]=V(!0);xt();const N=u.exports.useMemo(()=>d?{height:"calc(100vh - 226px - 36px)"}:{height:"calc(100vh - 380px -36px)"},[d]);u.exports.useEffect(()=>{k.get("/dataSource").then(m=>{var O;le({type:"fetched",data:m}),j((O=m.filter(A=>A.sourceType==1).at(0))==null?void 0:O.id)}).catch(m=>{throw m})},[]);const _=m=>{Z(!0),m.name==""?ee("form"):ee("detail"),j(m.id)},W=(m,O,A)=>{var P;Z(!0),ee(m),O&&O<0?j(((P=K.filter(pe=>pe.sourceType==A).at(0))==null?void 0:P.id)||0):j(O)},B=K.find(m=>m.id===te);u.exports.useEffect(()=>{q("/operateApi").then(m=>i(Ae(m))).catch(m=>{throw m})},[C]),u.exports.useEffect(()=>{if(z){const m=kr(n);if(!m)return;l(m.key)}},[n]),u.exports.useEffect(()=>{!S&&Y&&(t(null),l(null),g(!C)),I(!1)},[S,Y]),u.exports.useEffect(()=>{e==="\u7F16\u8F91"&&s&&xe()},[s,e]);const ye=()=>{if(!z){t(null);return}switch(e){case"\u91CD\u547D\u540D":Br(z,c).then(()=>{l(null),g(!C)});break;case"\u521B\u5EFA\u76EE\u5F55":Or(z,c,"").then(()=>{l(null),g(!C)});break;case"\u521B\u5EFA\u6587\u4EF6":G(c)?(l(null),g(!C)):kt(c.at(0))?(z.title=c,T(""),y(!0)):fe.warn("\u6587\u4EF6\u540D\u5FC5\u987B\u4EE5\u5927\u5199\u5B57\u6BCD\u5F00\u5934\uFF01");break}},ue=u.exports.useCallback(m=>p(m.target.value),[]),ce=u.exports.useCallback(m=>{m.stopPropagation()},[]),D=m=>{var Te;t(m);const{parent:O,curr:A}=Ar(s,n),P={title:"",baseDir:(Te=A==null?void 0:A.currDir)!=null?Te:"",isDir:m==="\u521B\u5EFA\u76EE\u5F55",key:Date.now().toString()};(A==null?void 0:A.children)===null&&(A.children=[]);const pe=n!=null?n:[];A!=null&&A.isDir?A.children.push(P):O?O.children.push(P):pe.push(P),l(P.key),i([...pe])};function xe(){!(F!=null&&F.path)||(q(`/operateApi/${F.id}`).then(m=>{T(m.content)}),y(!0))}const dt=m=>{Dr(m).then(()=>{l(null),g(!C)})},ft=u.exports.useCallback(m=>{Z(!1),m[0]&&m[0]!==s&&a(m[0])},[]);function mt(m){return m.legal?f("div",{className:"",children:[r(w,{type:"icon-zhuyi",color:"red"}),r("span",{className:"ml-1",children:"\u975E\u6CD5"})]}):m.isPublic?m.method:"\u5185\u90E8"}const ht=m=>{const O=mt(m),A=r(et,{items:[{key:"0",label:f("div",{onClick:()=>{l(m.key),t("\u91CD\u547D\u540D")},children:[r(w,{type:"icon-zhongmingming"}),r("span",{className:"ml-1.5",children:"\u91CD\u547D\u540D"})]})},{key:"1",label:f("div",{onClick:()=>{t("\u7F16\u8F91"),a(m.key)},children:[r(w,{type:"icon-chakan"}),r("span",{className:"ml-1.5",children:"\u7F16\u8F91"})]})},{key:"2",label:r(rt,{title:"\u786E\u5B9A\u5220\u9664\u5417?",onConfirm:()=>dt(m),okText:"\u5220\u9664",cancelText:"\u53D6\u6D88",placement:"right",children:f("a",{href:"#",onClick:P=>P.stopPropagation(),children:[r(w,{type:"icon-shanchu"}),r("span",{className:"ml-1.5",children:"\u5220\u9664"})]})})}]});return r("div",{className:`flex justify-between items-center ${H["tree-item"]}`,children:o&&m.key===o?r(Q,{defaultValue:m.title,onPressEnter:ye,onChange:ue,autoFocus:!0,onClick:ce,onBlur:()=>I(!0)}):f(R,{children:[r("span",{className:"max-w-9rem truncate",children:m.title}),f("div",{className:"flex space-x-4 text-12px items-center",children:[r("span",{className:"text-[#AFB0B499]",children:O}),r("span",{className:`text-[#AFB0B4] ${H.symbol}`,children:r(tt,{overlay:A,trigger:["click"],placement:"bottomRight",children:r(Tt,{onClick:P=>P.stopPropagation()})})})]})]})})},vt=m=>!G(m.data.children)||m.data.id===0?m.expanded?r(Ft,{}):r(bt,{}):r(St,{});function gt(m){!F||k.put(`/operateApi/${F.id}`,{...F,enable:m}).then(()=>g(!C))}const yt=f("div",{className:"flex items-center",children:[r(J,{checked:F==null?void 0:F.enable,checkedChildren:"\u5F00\u542F",unCheckedChildren:"\u5173\u95ED",onChange:gt,className:"bg-[#8ABE2A] ml-6 w-15"}),r(wt,{className:`${H["my-button"]} ml-12`,onClick:()=>t("\u7F16\u8F91"),children:r("span",{children:"\u7F16\u8F91"})})]});return f(R,{children:[r(Nt,{children:r("title",{children:"API \u7BA1\u7406"})}),r(Re.Provider,{value:K,children:r(De.Provider,{value:le,children:r(at.Provider,{value:{currDBId:te,setCurrDBId:j},children:r(Oe.Provider,{value:{handleToggleDesigner:W},children:f("div",{className:`flex ${H["api-manage"]} h-full`,children:[f("div",{className:"flex-shrink-0 pt-6  w-280px",children:[f("div",{className:"px-4",children:[f("div",{className:"flex text-18px leading-25px justify-between",children:[r("span",{className:"font-bold",children:"API \u7BA1\u7406"}),r(w,{type:"icon-wenjianshezhi",style:{fontSize:"18px"}})]}),f("div",{className:"flex mt-7 justify-between",children:[r(re,{className:"cursor-pointer",placement:"top",title:"\u8BBE\u7F6E",children:r(w,{onClick:()=>M(!$),type:"icon-shezhi1",style:{fontSize:"20px"}})}),r(re,{className:"cursor-pointer",placement:"top",title:"\u94A9\u5B50",children:r(w,{onClick:()=>x(!L),type:"icon-shengchanqianyi",style:{fontSize:"20px"}})}),r(re,{className:"cursor-pointer",placement:"top",title:"\u5BFC\u51FA",children:r("a",{href:"/api/v1/operateApi/json",download:"oas.json",children:r(w,{type:"icon-neisheng",style:{fontSize:"18px"}})})}),r(re,{className:"cursor-pointer",placement:"top",title:"\u8868\u5355\u8BBE\u8BA1\u5668",children:r(w,{type:"icon-biaodanshejiqi",style:{fontSize:"20px"}})}),r(re,{className:"cursor-pointer",placement:"top",title:"\u4E0B\u8F7DSDK",children:r("a",{href:"/api/v1/operateApi/sdk",download:"sdk",children:r(w,{type:"icon-xiazaiSDK",style:{fontSize:"20px"}})})})]})]}),r(ne,{style:{margin:"14px 0",opacity:0}}),f("div",{className:"flex px-4 justify-between",children:[r("span",{className:"font-bold leading-20px",children:"\u6982\u89C8"}),f("div",{className:"flex space-x-4 items-center",children:[r(Gt,{onClick:()=>D("\u521B\u5EFA\u6587\u4EF6")}),r(w,{type:"icon-wenjianjia1",style:{fontSize:"18px"},onClick:()=>D("\u521B\u5EFA\u76EE\u5F55")}),r(w,{type:"icon-shuaxin",style:{fontSize:"16px"},onClick:()=>{q("/operateApi").then(m=>i(Ae(m))).then(()=>fe.success("\u5237\u65B0\u5B8C\u6210\uFF01")).catch(m=>{throw fe.error("\u83B7\u53D6\u6587\u4EF6\u5217\u8868\u5931\u8D25\uFF01"),m})}})]})]}),r(ne,{style:{margin:"14px 0",opacity:0}}),r(Ct,{rootClassName:"overflow-auto",rootStyle:N,titleRender:ht,icon:vt,showIcon:!0,defaultExpandAll:!0,defaultExpandParent:!0,switcherIcon:r(Et,{}),treeData:n,selectedKeys:[s],onSelect:ft}),r("div",{className:"bg-white bottom-9 w-70 fixed",style:{overflow:"auto"},onClick:()=>b(!d),children:r(br,{onClickItem:_})})]}),r("div",{className:H.divider}),ve?r("div",{className:`w-6/7 ${H["datasource-container"]}`,children:r($t,{showType:ge,content:B})}):f("div",{className:"flex-1 px-6 pt-6",children:[f("div",{className:"flex justify-between items-center",children:[f("div",{className:"flex space-x-2 leading-25px",children:[r("span",{className:"font-bold text-18px",children:"API \u7BA1\u7406"}),r(qt,{}),r("span",{className:"font-bold text-16px",children:(qe=F==null?void 0:F.title)!=null?qe:""})]}),f("div",{className:"space-x-4",children:[r(w,{type:"icon-lianxi",style:{fontSize:"18px"}}),r(w,{type:"icon-wenjian1",style:{fontSize:"18px"}}),r(w,{type:"icon-bangzhu",style:{fontSize:"18px"}})]})]}),F?F!=null&&F.isDir?r(Ne,{}):f("div",{className:"mt-7",children:[r(Be,{tabs:Er,onTabClick:v,activeKey:h,extra:yt}),r("div",{className:"h-[calc(100vh_-_167px)] overflow-auto",children:h==="0"?r(mr,{nodeId:F==null?void 0:F.id}):h==="1"?r(xr,{node:F}):h==="2"?r(He,{node:F}):h==="3"?r(Je,{node:F}):r(It,{})})]}):r(Ne,{})]})]})})})})}),r(we,{title:"\u5168\u5C40\u8BBE\u7F6E",open:$,onOk:()=>M(!1),onCancel:()=>M(!1),footer:null,bodyStyle:{top:"20px"},width:"60vw",children:r(Je,{node:{id:0}})}),r(we,{title:"\u5168\u5C40\u94A9\u5B50",open:L,onOk:()=>x(!1),onCancel:()=>x(!1),footer:null,bodyStyle:{top:"20px"},width:"60vw",children:r(He,{node:{id:0}})}),r(we,{title:"GraphiQL",open:S,onOk:()=>{l(null),t(null),y(!1)},onCancel:()=>{l(null),t(null),y(!1)},footer:null,centered:!0,bodyStyle:{height:"90vh"},width:"90vw"})]})};export{ri as default};
