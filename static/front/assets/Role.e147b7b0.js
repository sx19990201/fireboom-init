import{r as a,a9 as m,n as K,j as n,a as t}from"./index.bb86fbbf.js";import{B as g}from"./button.aa0bb50b.js";import{F as i}from"./index.2f0a4123.js";import"./row.b57345b2.js";import"./index.61964446.js";import{I as x}from"./index.837f2673.js";import{M}from"./index.bb824a09.js";/* empty css               *//* empty css               */import{T as C}from"./Table.134cf6cf.js";import"./index.9ea41163.js";import"./iconUtil.02bc4596.js";import"./Pagination.4574862b.js";import"./index.11df8be1.js";import"./Tree.4ceb5bc3.js";import{T as A}from"./index.4a2fd767.js";import{P as j}from"./index.29ffa237.js";import{l as V}from"./Editor.6c4f1911.js";import{i as p}from"./use-immer.module.c8467ba8.js";import{I as _}from"./index.6d8ed736.js";import{g as q}from"./getDefaultCode.40c4b411.js";import{R as z}from"./index.682dcb84.js";import{s as r}from"./subs.module.7d96a7ba.js";V.config({paths:{vs:"/modules/monaco-editor/min/vs"}});const{TabPane:D}=A,k={postAuthentication:"auth/postAuthentication",mutatingPostAuthentication:"auth/mutatingPostPreResolve"};function pe(){const[d]=i.useForm(),[B,l]=p(!1),[h,y]=p([]),[c,f]=a.exports.useState(),[o,T]=a.exports.useState("postAuthentication"),[u,N]=p([]),[v,L]=a.exports.useState(),[E,F]=a.exports.useState(""),P=[{key:"postAuthentication",title:"postAuthentication"},{key:"mutatingPostAuthentication",title:"mutatingPostAuthentication"}];a.exports.useEffect(()=>{m.get("/role").then(e=>{y(e)})},[c]);const w=async e=>{await m.post("/role",e),f(!c)},I=async e=>{await m.delete(`/role/${e}`),f(!c)},b=[{title:"\u89D2\u8272",dataIndex:"code",key:"code"},{title:"\u89D2\u8272\u63CF\u8FF0",dataIndex:"remark",key:"remark"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",key:"createTime"},{title:"\u64CD\u4F5C",key:4,render:(e,{id:s})=>t(j,{title:"\u786E\u5B9A\u8981\u5220\u9664?",okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",onConfirm:()=>{I(s)},children:t("span",{className:"pl-0 text-red-500 cursor-pointer",children:"\u5220\u9664"})})}];a.exports.useEffect(()=>{K("/auth/hooks").then(e=>N(e)).catch(e=>{throw e})},[v]),a.exports.useMemo(()=>u==null?void 0:u.find(e=>e.hookName===o),[o,u]),a.exports.useEffect(()=>{F(""),q(o).then(e=>{F(e)})},[o]);const[R,S]=a.exports.useState("role");return n("div",{className:"relative",children:[R==="role"?t("div",{className:"absolute top-2px right-0",children:t(g,{className:"px-4 py-0 h-7.5",onClick:()=>{l(!0)},children:t("span",{className:"text-sm text-gray",children:"\u6DFB\u52A0"})})}):"",n(A,{renderTabBar:(e,s)=>t(s,{className:r.pillTab,...e}),onChange:S,children:[n(D,{tab:"\u89D2\u8272\u7BA1\u7406",className:r.tabContent,children:[t(M,{mask:!1,title:"\u6DFB\u52A0",style:{top:"200px"},width:549,transitionName:"",open:B,onOk:()=>l(!1),onCancel:()=>l(!1),okText:t(g,{className:r["save-btn"],onClick:()=>{d.submit()},children:t("span",{children:"\u4FDD\u5B58"})}),okType:"text",cancelText:"\u53D6\u6D88",children:n(i,{name:"roleList",form:d,labelCol:{span:6},wrapperCol:{span:16},initialValues:{remember:!0},onFinish:e=>{w(e)},autoComplete:"off",labelAlign:"left",className:"h-30 mt-8 ml-8",children:[t(i.Item,{label:"\u89D2\u8272code",name:"code",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u89D2\u8272\u7F16\u7801"},{pattern:/^[_a-zA-Z][_a-zA-Z\d]*$/g,message:"\u8BF7\u8F93\u5165\u6570\u5B57\u3001\u5B57\u6BCD\u6216\u4E0B\u5212\u7EBF\uFF0C\u7B2C\u4E00\u4F4D\u4E0D\u80FD\u662F\u6570\u5B57"}],children:t(x,{})}),t(i.Item,{label:"\u89D2\u8272\u63CF\u8FF0",name:"remark",children:t(x,{})})]})}),t("div",{className:r["role-container-table"],children:h.length>0?t(C,{columns:b,dataSource:h,rowKey:e=>e.id,rowClassName:(e,s)=>s%2===1?r["role-table"]:"",pagination:!1}):t(C,{columns:b,dataSource:[],rowKey:e=>e.id,rowClassName:(e,s)=>s%2===1?r["role-table"]:"",pagination:!1})})]},"role"),t(D,{tab:"\u8EAB\u4EFD\u9274\u6743",className:r.tabContent,children:n("div",{children:[t(z,{tabs:P,onTabClick:T,activeKey:o}),t(_,{hookPath:k[o],defaultLanguage:"typescript",onChange:console.log,defaultCode:E},k[o])]})},"auth")]})]})}export{pe as A};
